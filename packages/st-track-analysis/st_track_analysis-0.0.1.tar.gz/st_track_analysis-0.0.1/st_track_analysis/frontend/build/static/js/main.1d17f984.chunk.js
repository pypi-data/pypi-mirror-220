(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{196:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(46),i=a.n(r),o=a(96),s=a(9),l=a(19),u=(a(196),a(25)),d=["red","purple","cyan","green","pink"],j=["Pedestrian","Bicycle","Light vehicle","Heavy vehicle","Unknown"];function b(e,t,a,n,c,r){var i,o=new Map,l=Object(u.a)(e);try{for(l.s();!(i=l.n()).done;){var d=Object(s.a)(i.value,5),b=d[0],h=d[1],m=d[2],f=d[3],g=d[4];if(a.onlyConfirmed&&1===g||-1===t.indexOf(j[f]));else if(o.has(b)){var O=o.get(b),x=Object(s.a)(O,5),p=x[0],v=x[1],k=(x[2],x[3],x[4]);p.push(h),v.push(m),k.push(g)}else o.set(b,[[h],[m],f,b,[g]])}}catch(y){l.e(y)}finally{l.f()}return o.forEach((function(e,t){n&&(e[0].length<c||e[0].length>r)&&o.delete(t)})),Array.from(o.values(),(function(e){return function(e,t,a){var n=Object(s.a)(e,5),c=n[0],r=n[1],i=n[2],o=n[3],l=n[4],u=[c[0],r[0],0],d=[c[c.length-1],r[r.length-1],0],j=c.map((function(e,n){var i=l[n],o="L ".concat(e," ").concat(r[n]);if((t&&0===i||a&&1===i&&0!==n)&&0!==n){var s=0===i?6:3,u=[c[n-1],r[n-1]],d=u[0],j=u[1],b=[e,r[n]],h=b[0],m=b[1],f=Math.sqrt(Math.pow(h-d,2)+Math.pow(m-j,2)),g=[(j-m)/f,(h-d)/f],O=.707,x=g[0]*O-g[1]*O,p=g[0]*O+g[1]*O;o+="L ".concat(e+x*s," ").concat(r[n]+p*s," L ").concat(e," ").concat(r[n]," L ").concat(e-p*s," ").concat(r[n]+x*s," L ").concat(e," ").concat(r[n])}return o})).join(" ");return["M ".concat(c[0]," ").concat(r[0]," ").concat(j),i,o,u,d]}(e,a.markMeasurements,a.markEstimated)}))}var h=a(2),m=function(e){var t=e.WIDTH,a=e.HEIGHT,n=e.scale,c=e.pathStrings,r=e.showId,i=e.selectedIndices,o=e.vertices;return Object(h.jsxs)("svg",{width:t*n,height:a*n,style:{transform:"scale(".concat(n,")"),transformOrigin:"top left"},children:[c.map((function(e,t){return i.has(t)?Object(h.jsx)(h.Fragment,{}):Object(h.jsxs)("g",{children:[Object(h.jsx)("path",{d:e[0],stroke:d[e[1]],fill:"none"}),Object(h.jsx)("circle",{cx:e[3][0],cy:e[3][1],r:4,fill:"green",strokeWidth:"4"}),Object(h.jsx)("circle",{cx:e[4][0],cy:e[4][1],r:4,fill:"red",strokeWidth:"4"}),r&&Object(h.jsx)("text",{x:e[4][0],y:e[4][1],fill:"white",fontFamily:"sans-serif",fontSize:10,children:e[2]})]},e[0])})),o]})},f=a(140),g=a.n(f),O=a(269),x=a(271),p=a(293),v=a(308),k=a(309),y=a(274),w=a(310),C=a(311),S=a(312),M=a(295),I=function(e){e.label;var t=e.image,a=e.WIDTH,c=e.HEIGHT,r=e.tracks,i=e.from,o=e.to,u=e.showType,d=e.filterLength,j=e.minLength,f=e.maxLength,I=Object(n.useState)(1),L=Object(s.a)(I,2),D=L[0],T=L[1],E=Object(n.useState)({markMeasurements:!1,markEstimated:!1,onlyConfirmed:!1,trackId:!1,showLines:!1}),H=Object(s.a)(E,2),R=H[0],N=H[1],F=Object(n.useState)(new Map),W=Object(s.a)(F,2),Y=W[0],A=W[1],B=Object(n.useMemo)((function(){return b(r.slice(i,o),u,R,d,j,f)}),[i,o,u,R,d,j,f]),P=Object(h.jsx)(m,{WIDTH:a,HEIGHT:c,scale:D,pathStrings:B,showId:R.trackId,selectedIndices:Y,vertices:[]});var G;return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"control-container",children:Object(h.jsx)(p.a,{value:D,"aria-label":"Default",valueLabelDisplay:"auto",onChange:function(e,t){"number"===typeof t&&T(t)},min:0,max:10,step:.01,color:"primary",className:"slider",style:{width:300,margin:0}})}),Object(h.jsxs)("div",{style:{overflow:"hidden",display:"flex"},children:[Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(h.jsx)(g.a,{children:Object(h.jsx)("div",{className:"image-container",style:{width:a*D,height:c*D,backgroundImage:"url(".concat(t,")")},children:P})}),Object(h.jsx)("div",{style:{marginTop:10},children:Object(h.jsxs)(v.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",position:"relative",overflow:"auto",maxHeight:400,"& ul":{padding:0},borderRadius:1},subheader:Object(h.jsx)(k.a,{children:"Tracks"}),component:"nav","aria-label":"main mailbox folders",children:[Object(h.jsx)(y.a,{}),(G=B,G.map((function(e,t){return Object(h.jsxs)(O.a,{selected:Y.has(t),onClick:function(e){Y.has(t)?A((function(e){return e.delete(t),new Map(e)})):function(e,t){A((function(e){return new Map(e.set(t,!0))}))}(0,t)},children:[Object(h.jsx)(x.a,{primary:e[2]}),Object(h.jsx)(x.a,{primary:e[1]})]},t)})))]})})]}),Object(h.jsx)(w.a,{sx:{margin:0,marginLeft:2},component:"fieldset",variant:"standard",children:Object(h.jsxs)(C.a,{children:[Object(h.jsx)(S.a,{control:Object(h.jsx)(M.a,{checked:R.markMeasurements,onChange:function(e){N((function(t){return Object(l.a)(Object(l.a)({},t),{},{markMeasurements:e.target.checked})}))}}),label:"Mark measurments"}),Object(h.jsx)(S.a,{control:Object(h.jsx)(M.a,{checked:R.markEstimated,onChange:function(e){N((function(t){return Object(l.a)(Object(l.a)({},t),{},{markEstimated:e.target.checked})}))}}),label:"Mark estimated"}),Object(h.jsx)(S.a,{control:Object(h.jsx)(M.a,{checked:R.onlyConfirmed,onChange:function(e){N((function(t){return Object(l.a)(Object(l.a)({},t),{},{onlyConfirmed:e.target.checked})}))}}),label:"Show only confirmed"}),Object(h.jsx)(S.a,{control:Object(h.jsx)(M.a,{checked:R.trackId,onChange:function(e){N((function(t){return Object(l.a)(Object(l.a)({},t),{},{trackId:e.target.checked})}))}}),label:"Show track id"}),Object(h.jsx)(S.a,{control:Object(h.jsx)(M.a,{checked:R.showLines,onChange:function(e){N((function(t){return Object(l.a)(Object(l.a)({},t),{},{showLines:e.target.checked})}))}}),label:"Show lines"})]})})]})]})},L=a(146),D=a(275),T=a(290),E=a(289),H=a(29),R=a.n(H),N=a(300),F=a(301),W=a(291),Y=a(303),A=a(306),B=a(302),P=a(95),G=function(){var e=Object(o.useRenderData)(),t=Object(n.useState)(0),a=Object(s.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(0),u=Object(s.a)(l,2),d=u[0],b=u[1],m=Object(n.useState)(0),f=Object(s.a)(m,2),g=f[0],O=f[1],p=Object(n.useState)(R()(e.args.date)),v=Object(s.a)(p,2),k=v[0],y=v[1],C=Object(n.useState)(R()(e.args.date)),H=Object(s.a)(C,2),G=H[0],V=H[1],_=Object(n.useState)(R()(e.args.date)),J=Object(s.a)(_,2),q=J[0],z=J[1],U=Object(n.useState)(1),K=Object(s.a)(U,2),Q=K[0],X=K[1],Z=c.a.useState(j),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(s.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(n.useState)(0),oe=Object(s.a)(ie,2),se=oe[0],le=oe[1],ue=Object(n.useState)(0),de=Object(s.a)(ue,2),je=de[0],be=de[1],he=Object(n.useState)(e.args.tracks),me=Object(s.a)(he,2),fe=me[0],ge=(me[1],e.args.image),Oe=e.args.height,xe=e.args.width;console.log(ge);Object(n.useEffect)((function(){k.isValid()&&P.Streamlit.setComponentValue(k.format("YYYY-MM-DD"))}),[k]),Object(n.useEffect)((function(){!function(){var e,t;if(0===g)e=ke(G,0,fe.length-1),t=ke(q,0,fe.length-1);else if(1===g){for(var a=e=d+1;a<fe.length-1&&R()(fe[a][5]).isBefore(q);)a++;t=a}else{console.log("Backwards",r,fe[r][5],G.toISOString());for(var n=t=r;n>0&&G.isBefore(R()(fe[n][5]));)n--;e=n+1}i(e),b(t),console.log("First track:",fe[e]),console.log("Last track",fe[t-1]),console.log("From ".concat(e," to ").concat(t))}()}),[G,q]);var pe=function(){V((function(e){return e.subtract(Q,"minutes")})),z((function(e){return e.subtract(Q,"minutes")})),O(-1)},ve=function(){V((function(e){return e.add(Q,"minutes")})),z((function(e){return e.add(Q,"minutes")})),O(1)};function ke(e,t,a){if(t<a){var n=Math.floor((t+a)/2);if(0===n)return 0;var c=R()(fe[n][5]);return c.isAfter(e)&&R()(fe[n-1][5]).isBefore(e)?n:c.isAfter(e)?ke(e,t,n):ke(e,n+1,a)}return t===a?t:-1}Object(n.useEffect)((function(){var e=function(e){"ArrowRight"===e.key?ve():"ArrowLeft"===e.key&&pe()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[Q]);var ye=[Object(h.jsx)(I,{image:ge,WIDTH:xe,HEIGHT:Oe,tracks:fe,from:r,to:d,label:"Version 1",showType:ee,filterLength:ce,minLength:se,maxLength:je})],we={PaperProps:{style:{maxHeight:224,width:250}}};return Object(h.jsxs)("div",{style:{flexDirection:"column",marginTop:30},children:[Object(h.jsxs)(L.a,{dateAdapter:D.a,children:[Object(h.jsx)(E.a,{label:"Date",format:"YYYY-MM-DD",value:k,onChange:function(e){e&&y(e)},sx:{backgroundColor:"background.default",borderRadius:1,marginRight:2}}),Object(h.jsx)(T.a,{label:"From time",value:G,onChange:function(e){e&&(V(e),z(e.add(Q,"minutes")),O(0))},ampm:!1,sx:{backgroundColor:"background.default",borderRadius:1,marginRight:2}})]}),Object(h.jsx)(N.a,{label:"Interval in minutes",id:"outlined-start-adornment",sx:{width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:Q,onChange:function(e){var t=Number(e.target.value);isNaN(t)||(X(t),z(G.add(t,"minutes")))}}),Object(h.jsxs)(w.a,{sx:{m:1,width:300,margin:0},children:[Object(h.jsx)(F.a,{id:"demo-multiple-name-label",children:"Show types"}),Object(h.jsx)(W.a,{labelId:"demo-multiple-name-label",id:"demo-multiple-name",multiple:!0,value:ee,onChange:function(e){var t=e.target.value;te("string"===typeof t?t.split(","):t)},input:Object(h.jsx)(Y.a,{label:"Show types"}),renderValue:function(e){return e.join(", ")},MenuProps:we,sx:{backgroundColor:"background.default"},children:j.map((function(e){return Object(h.jsxs)(A.a,{value:e,children:[Object(h.jsx)(M.a,{checked:ee.indexOf(e)>-1}),Object(h.jsx)(x.a,{primary:e})]},e)}))})]}),Object(h.jsx)("div",{children:Object(h.jsx)(S.a,{control:Object(h.jsx)(M.a,{checked:ce,onChange:function(e){re(e.target.checked)}}),label:"Filter length",style:{margin:0,marginTop:10}})}),ce&&Object(h.jsxs)("div",{style:{marginTop:10},children:[Object(h.jsx)(N.a,{label:"Minimum length",id:"outlined-start-adornment",sx:{m:1,width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:se,onChange:function(e){var t=Number(e.target.value);isNaN(t)||le(t)}}),Object(h.jsx)(N.a,{label:"Maximum length",id:"outlined-start-adornment",sx:{m:1,width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:je,onChange:function(e){var t=Number(e.target.value);isNaN(t)||be(t)}})]}),Object(h.jsxs)("div",{style:{margin:0,marginTop:10},children:[Object(h.jsx)(B.a,{sx:{marginRight:2,backgroundColor:"background.default"},onClick:function(){return pe()},children:"<"}),Object(h.jsx)(B.a,{sx:{marginRight:2,backgroundColor:"background.default"},onClick:function(){return ve()},children:">"})]}),Object(h.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(h.jsxs)("div",{style:{flexDirection:"row",flexWrap:"wrap"},children:[ye.map((function(e){return e})),Object(h.jsx)("div",{style:{height:1e4}})]})})]})},V=a(151),_=a(297);console.warn=function(){};var J=Object(V.a)({palette:{primary:{main:"#F63366"},common:{black:"#F63366"},secondary:{main:"#F0F2F6"},text:{primary:"#fff",secondary:"#fff"},action:{active:"#fff"},background:{default:"#262730",paper:"#262730"}}});i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(o.StreamlitProvider,{children:Object(h.jsx)(_.a,{theme:J,children:Object(h.jsx)(G,{})})})}),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.1d17f984.chunk.js.map