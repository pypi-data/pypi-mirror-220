"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4438],{66494:(e,a,i)=>{var t=i(89793),n=i.n(t),l=i(60216),s=i.n(l),r=i(32735),d=i(12788),o=i(25591),c=i(48060),m=i(25899),u=i(67986),f=i(57176),g=i(33344),p=i(40327),b=i(19306),E=i(59090);function y(e){let{cancelURL:a,moderated:i,initialValues:t,hasPredefinedAffiliations:l,showAccountForm:s,syncedValues:d,emails:y,affiliationMeta:w,hasPendingUser:v,mandatoryFields:F,lockedFields:h,lockedFieldMessage:k}=e;return r.createElement(o.Form,{onSubmit:async(e,a)=>{const i=(0,g.hS)(e,a);let t;delete i.password_confirm,l?i.affiliation_data&&(i.affiliation=i.affiliation_data.text.trim(),i.affiliation_id=i.affiliation_data.id,delete i.affiliation_data):delete i.affiliation_data;try{t=await E.indicoAxios.post(location.href,i)}catch(e){return(0,g.qf)(e,l?{affiliation:"affiliation_data"}:{})}location.href=t.data.redirect,await new Promise((()=>{}))},initialValues:t,initialValuesEqual:n(),subscription:{submitting:!0},validate:e=>{const a={};return e.password&&e.password_confirm&&e.password_confirm!==e.password&&(a.password_confirm=b.vN.string("Passwords must match")),a}},(e=>r.createElement(c.Z,{onSubmit:e.handleSubmit},!s&&r.createElement(o.Field,{name:"synced_fields",isEqual:n(),render:()=>null}),v&&r.createElement(m.Z,{info:!0},r.createElement(b.vN,null,"There is already some information in Indico that concerns you. We are going to link it automatically.")),r.createElement(p.pg,{legend:b.vN.string("User information"),active:s||i},y.length>1?r.createElement(f.xF,{name:"email",label:b.vN.string("Email address"),options:y.map((e=>({key:e,value:e,text:e}))),syncedValues:d,lockedFields:h,lockedFieldMessage:k,required:!0}):r.createElement(f.zm,{name:"email",label:b.vN.string("Email address"),syncedValues:d,lockedFields:h,lockedFieldMessage:k,readOnly:!0}),r.createElement(c.Z.Group,{widths:"equal"},r.createElement(f.zm,{name:"first_name",label:b.vN.string("First name"),required:!0,syncedValues:d,lockedFields:h,lockedFieldMessage:k}),r.createElement(f.zm,{name:"last_name",label:b.vN.string("Last name"),required:!0,syncedValues:d,lockedFields:h,lockedFieldMessage:k})),l?r.createElement(f.wp,{name:"affiliation_data",required:i&&F.includes("affiliation"),syncName:"affiliation",syncedValues:d,lockedFields:h,lockedFieldMessage:k,currentAffiliation:w}):r.createElement(f.zm,{name:"affiliation",label:b.vN.string("Affiliation"),required:i&&F.includes("affiliation"),syncedValues:d,lockedFields:h,lockedFieldMessage:k}),"address"in d&&r.createElement(f.a0,{name:"address",label:b.vN.string("Address"),syncedValues:d,lockedFields:h,lockedFieldMessage:k}),"phone"in d&&r.createElement(f.zm,{name:"phone",label:b.vN.string("Phone number"),syncedValues:d,lockedFields:h,lockedFieldMessage:k})),s&&r.createElement(p.pg,{legend:b.vN.string("Login details")},r.createElement(g._t,{name:"username",label:b.vN.string("Username"),required:!0}),r.createElement(c.Z.Group,{widths:"equal"},r.createElement(g._t,{name:"password",type:"password",label:b.vN.string("Password"),autoComplete:"new-password",required:!0}),r.createElement(g._t,{name:"password_confirm",type:"password",label:b.vN.string("Confirm password"),autoComplete:"new-password",required:!0}))),i&&r.createElement(p.pg,{legend:b.vN.string("Account moderation")},r.createElement(m.Z,{info:!0},r.createElement(b.vN,null,"Each new account needs to be approved by an administrator. We will send you an email as soon as your request has been approved.")),r.createElement(p.wY,{required:F.includes("comment"),name:"comment",initialValue:"",label:b.vN.string("Comment"),description:b.vN.string("You can provide additional information or a comment for the administrators who will review your registration.")})),r.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.createElement(g.Ei,{disabledUntilChange:!1,label:i?b.vN.string("Submit registration request"):b.vN.string("Create my Indico profile"),className:"submit-button"}),r.createElement(c.Z.Field,{disabled:e.submitting},r.createElement(u.Z,{as:"a",href:a,disabled:e.submitting},r.createElement(b.vN,null,"Cancel")))))))}y.propTypes={cancelURL:s().string.isRequired,moderated:s().bool.isRequired,initialValues:s().object.isRequired,hasPredefinedAffiliations:s().bool.isRequired,showAccountForm:s().bool.isRequired,syncedValues:s().object.isRequired,emails:s().arrayOf(s().string).isRequired,affiliationMeta:s().object,hasPendingUser:s().bool,mandatoryFields:s().arrayOf(s().string).isRequired,lockedFields:s().arrayOf(s().string),lockedFieldMessage:s().string},y.defaultProps={affiliationMeta:null,hasPendingUser:!1,lockedFields:[],lockedFieldMessage:""},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#signup-container");if(!e)return;const a=JSON.parse(e.dataset.config);d.render(r.createElement(y,a),e)}))}},e=>{e.O(0,[5514,3044,8592],(()=>{return a=66494,e(e.s=a);var a}));e.O()}]);
//# sourceMappingURL=module_auth.signup.4660d5cd.bundle.js.map