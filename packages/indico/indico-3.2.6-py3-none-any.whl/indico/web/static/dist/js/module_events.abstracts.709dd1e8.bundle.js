"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8549],{78189:(e,t,a)=>{var i=a(95023),n=a.n(i),l=a(28995),s=(a(84038),a(95499),a(68101),a(63025)),o=a(60216),r=a.n(o),c=a(32735),d=a(12788),m=a(67986),u=a(13213),p=a(8892),h=a(43114),v=a(33344),b=a(54733),g=a(19306),f=a(59090);const y=s.ZP.bind(null,{endpoint:"abstracts.manage_custom_boa",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"abstracts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"boa",isDynamic:!1},{data:"/",isDynamic:!1},{data:"custom",isDynamic:!1}]}]},"/"),D=s.ZP.bind(null,{endpoint:"abstracts.upload_boa_file",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"abstracts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"boa",isDynamic:!1},{data:"/",isDynamic:!1},{data:"custom",isDynamic:!1},{data:"/",isDynamic:!1},{data:"upload",isDynamic:!1}]}]},"/");function w(e){let{eventId:t,initialFile:a,hasLatex:i}=e;const[n,l]=(0,c.useState)(!1),[s,o]=(0,c.useState)(!1),[r,d]=(0,c.useState)(!1);let h;return h=i?a?g.vN.string("Manage custom PDF"):g.vN.string("Upload custom PDF"):a?g.vN.string("Manage PDF"):g.vN.string("Upload PDF"),c.createElement(c.Fragment,null,c.createElement("span",{className:"i-button "+(a?"icon-file-pdf":"icon-arrow-up"),style:{marginRight:"0.3rem"},onClick:()=>l(!0)},h),n&&c.createElement(b.Yp,{id:"custom-boa",onClose:()=>l(!1),onSubmit:async e=>{let{file:a}=e;try{await f.indicoAxios.post(y({event_id:t}),{file:a})}catch(e){return(0,v.qf)(e)}location.reload(),await new Promise((()=>{}))},submitLabel:g.vN.string("Upload BoA"),initialValues:{file:a?a.uuid:null},size:"small",header:i?c.createElement(g.vN,null,"Manage custom Book of Abstracts"):c.createElement(g.vN,null,"Manage Book of Abstracts"),extraActions:e=>null!==a&&c.createElement(m.Z,{style:{marginRight:"auto"},onClick:()=>d(!0),disabled:e.submitting,negative:!0},i?c.createElement(g.vN,null,"Delete custom PDF"):c.createElement(g.vN,null,"Delete current PDF"))},c.createElement("div",{style:{marginBottom:"20px",textAlign:"center"}},c.createElement(p.FinalSingleFileManager,{name:"file",validExtensions:["pdf"],initialFileDetails:a,uploadURL:D({event_id:t}),required:!0,hideValidationError:!0})),c.createElement("div",{className:"description",style:{margin:"10px"}},i?c.createElement(g.vN,null,"You can upload a custom PDF for your Book of Abstracts. Please note that this overrides the autogenerated file. To switch back to the default book of abstracts you'll have to delete the custom file."):c.createElement(g.vN,null,"You can upload a PDF file with the Book of Abstracts here."))),c.createElement(u.Z,{open:r,onClose:()=>d(!1),size:"tiny",closeOnDimmerClick:!1},c.createElement(u.Z.Header,{content:g.vN.string("Confirm deletion")}),c.createElement(u.Z.Content,null,i?c.createElement(g.vN,null,"Do you really want to delete the custom Book of Abstracts? This will revert to the default auto-generated one."):c.createElement(g.vN,null,"Do you really want to delete the Book of Abstracts? This will disable the Book of Abstracts until you upload a new one.")),c.createElement(u.Z.Actions,null,c.createElement(m.Z,{onClick:()=>d(!1),disabled:s},c.createElement(g.vN,null,"Cancel")),c.createElement(m.Z,{negative:!0,onClick:async()=>{o(!0);try{await f.indicoAxios.delete(y({event_id:t}))}catch(e){return(0,f.handleAxiosError)(e),void o(!1)}location.reload()},disabled:s,loading:s},c.createElement(g.vN,null,"Delete")))))}var E;w.propTypes={eventId:r().number.isRequired,hasLatex:r().bool.isRequired,initialFile:h.U},w.defaultProps={initialFile:null},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#boa-custom-upload");if(!e)return;const t=parseInt(e.dataset.eventId,10),a=JSON.parse(e.dataset.file),i="hasLatex"in e.dataset;d.render(c.createElement(w,{eventId:t,initialFile:a,hasLatex:i}),e)})),(E=window).setupAbstractList=function(){const e=$("#abstract-list"),t=setupListGenerator({itemHandle:"tr",listItems:"#abstract-list tbody tr",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"});e.on("indico:htmlUpdated",(function(){e.find(".js-mathjax").mathJax(),n()(t)}))},E.setupAbstractEmailTemplatesPage=function(){$(".js-edit-tpl-dropdown").parent().dropdown(),$(".email-templates > ul").sortable({axis:"y",containment:"parent",cursor:"move",distance:2,handle:".ui-i-box-sortable-handle",items:"> li",tolerance:"pointer",forcePlaceholderSize:!0,placeholder:"regform-section-sortable-placeholder",update(){const e=$(".email-templates > ul"),t=e.find("li.js-email-template").map(((e,t)=>$(t).data("id"))).get();$.ajax({url:e.data("url"),method:"POST",contentType:"application/json",data:JSON.stringify({sort_order:t}),complete:IndicoUI.Dialogs.Util.progress(),error:handleAjaxError})}}),$(".email-preview-btn").on("click",(function(e){e.preventDefault();const t=$(this).data("id"),a=$(`#email-preview-btn-${t}`);a.data("visible")?(a.text(l.$T.gettext("Show preview")),$(`#email-preview-${t}`).slideToggle(),a.data("visible",!1)):(a.text(l.$T.gettext("Hide preview")),$(`#email-preview-${t}`).slideToggle(),a.data("visible",!0))})),$("#email-template-manager .ui-i-box-sortable-handle").on("mousedown",(function(){$(".email-preview").hide(),$(".email-preview-btn").text(l.$T.gettext("Show preview")).data("visible",!1)})),$(".js-toggle-stop-on-match").on("click",(function(e){e.preventDefault();const t=$(this),a=!t.data("stop-on-match");t.hasClass("disabled")||$.ajax({url:t.data("href"),method:t.data("method"),data:JSON.stringify({stop_on_match:a}),dataType:"json",contentType:"application/json",error:handleAjaxError,success(){t.data("stop-on-match",a),t.toggleClass("stop-processing-enabled",a)}})}))},E.setupCallForAbstractsPage=function(e){e=$.extend({hasAbstracts:!1},e),"#submit-abstract"===location.hash&&$(document).ready((function(){$(".js-show-abstract-form").trigger("click")})),e.hasAbstracts&&setupSearchBox({itemHandle:"div.contribution-row",listItems:"#display-contribution-list div.contribution-row",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"})()},E.setupAbstractJudgment=function(e){e=$.extend({trackSessionMap:{}},e),$("body").on("change","#accepted_track",(function(){const t=e.trackSessionMap[$(this).val()];$("#session").val(t||"__None")})),$("#accepted_track").trigger("change")}}},e=>{e.O(0,[5514,3044,8592],(()=>{return t=78189,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_events.abstracts.709dd1e8.bundle.js.map