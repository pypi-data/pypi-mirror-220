import{d as M,V as O,v as j,R as w,c as r,r as v,X as q,Y as z,_ as P,b as k,e as t,w as c,o as s,i as a,u as e,$ as Q,h as b,L as X,F as h,a0 as Y,S as F,a1 as Z,g as d,O as p,a2 as $,a3 as G,a4 as I,a5 as J,a6 as K,a7 as W,a8 as ee,A as se,k as oe,a9 as te}from"./index-cb67f98f.js";import{u as ne}from"./usePageTitle-e9e1cd1d.js";const le={class:"flow-runs__list"},ae={class:"flow-runs__list-controls"},ue={class:"flow-runs__list-controls--right"},fe=M({__name:"FlowRuns",setup(re){const C=O(),i=j(),_=w(i.flowRuns.getFlowRunsCount,[{}]),g=r(()=>_.executed),S=r(()=>_.response===0),f=v(),V=q(f,1200),{filter:o,isCustomFilter:x}=z({flowRuns:{nameLike:V}}),m={interval:3e4},R=w(i.flowRuns.getFlowRunsCount,[o],m),B=r(()=>R.response),T=w(i.ui.getFlowRunHistory,[o],m),N=r(()=>T.response??[]),{flowRuns:y,subscriptions:L,loadMore:A}=P(o,m),n=v([]);function D(){C.push(te.flowRuns())}const H=()=>{n.value=[],L.refresh(),R.refresh()};return ne("Flow Runs"),(ce,l)=>{const U=k("p-button"),E=k("p-layout-default");return s(),t(E,{class:"flow-runs"},{header:c(()=>[a(e(Q))]),default:c(()=>[g.value?(s(),b(h,{key:0},[S.value?(s(),t(e(X),{key:0})):(s(),b(h,{key:1},[a(e(Y)),e(F).md?(s(),t(e(Z),{key:0,history:N.value,"start-date":e(o).flowRuns.expectedStartTimeAfter,"end-date":e(o).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):d("",!0),p("div",le,[p("div",ae,[p("div",ue,[n.value.length==0?(s(),t(e($),{key:0,count:B.value,label:"Flow run"},null,8,["count"])):(s(),t(e(G),{key:1,count:n.value.length},null,8,["count"])),a(e(I),{selected:n.value,onDelete:H},null,8,["selected"])]),e(F).md?(s(),t(e(J),{key:0,modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=u=>f.value=u),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):d("",!0),a(e(K),{modelValue:e(o).sort,"onUpdate:modelValue":l[1]||(l[1]=u=>e(o).sort=u)},null,8,["modelValue"])]),a(e(W),{selected:n.value,"onUpdate:selected":l[2]||(l[2]=u=>n.value=u),selectable:"","flow-runs":e(y),onBottom:e(A)},null,8,["selected","flow-runs","onBottom"]),e(y).length?d("",!0):(s(),t(e(ee),{key:0},se({_:2},[e(x)?{name:"actions",fn:c(()=>[a(U,{size:"sm",secondary:"",onClick:D},{default:c(()=>[oe(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):d("",!0)]),_:1})}}});export{fe as default};
