"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[174],{1210:function(e,n,t){t.d(n,{Z:function(){return k}});var i=t(82394),r=t(21831),l=t(82684),o=t(47999),u=t(49894),c=t(93461),s=t(57384),d=t(41424),a=t(72454),f=t(28598);function h(e,n){var t=e.children;return(0,f.jsx)(a.HS,{ref:n,children:t})}var p=l.forwardRef(h),g=t(32063),j=t(85019),v=t(82531),x=t(66166),Z=t(3055),b=t(49125),m=t(91427),C=t(24141);function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=function(e){var n,t=e.after,i=e.afterHidden,h=e.afterWidth,E=e.afterWidthOverride,k=e.before,A=e.beforeWidth,I=e.breadcrumbs,P=e.children,y=e.errors,O=e.headerMenuItems,w=e.headerOffset,T=e.mainContainerHeader,S=e.navigationItems,N=e.setErrors,D=e.subheaderChildren,M=e.title,z=e.uuid,L=(0,C.i)().width,R="dashboard_after_width_".concat(z),B="dashboard_before_width_".concat(z),H=(0,l.useRef)(null),V=(0,l.useState)(E?h:(0,m.U2)(R,h)),F=V[0],q=V[1],U=(0,l.useState)(!1),W=U[0],Y=U[1],K=(0,l.useState)(k?Math.max((0,m.U2)(B,A),13*b.iI):null),J=K[0],Q=K[1],X=(0,l.useState)(!1),$=X[0],G=X[1],ee=(0,l.useState)(null)[1],ne=v.ZP.projects.list({},{revalidateOnFocus:!1}).data,te=null===ne||void 0===ne?void 0:ne.projects,ie=[];I?ie.push.apply(ie,(0,r.Z)(I)):(null===te||void 0===te?void 0:te.length)>=1&&ie.push.apply(ie,[{label:function(){var e;return null===(e=te[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return M}}]),(0,l.useEffect)((function(){null===H||void 0===H||!H.current||W||$||null===ee||void 0===ee||ee(H.current.getBoundingClientRect().width)}),[W,F,$,J,H,ee,L]),(0,l.useEffect)((function(){W||(0,m.t8)(R,F)}),[i,W,F,R]),(0,l.useEffect)((function(){$||(0,m.t8)(B,J)}),[$,J,B]);var re=(0,x.Z)(h);return(0,l.useEffect)((function(){E&&re!==h&&q(h)}),[E,h,re]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{title:M}),(0,f.jsx)(d.Z,{breadcrumbs:ie,menuItems:O,project:null===te||void 0===te?void 0:te[0],version:null===te||void 0===te||null===(n=te[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(a.Nk,{children:[0!==(null===S||void 0===S?void 0:S.length)&&(0,f.jsx)(a.lm,{showMore:!0,children:(0,f.jsx)(j.Z,{navigationItems:S,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(g.Z,{after:t,afterHeightOffset:Z.Mz,afterHidden:i,afterMousedownActive:W,afterWidth:F,before:k,beforeHeightOffset:Z.Mz,beforeMousedownActive:$,beforeWidth:a.k1+(k?J:0),headerOffset:w,hideAfterCompletely:!0,leftOffset:k?a.k1:null,mainContainerHeader:T,mainContainerRef:H,setAfterMousedownActive:Y,setAfterWidth:q,setBeforeMousedownActive:G,setBeforeWidth:Q,children:[D&&(0,f.jsx)(p,{children:D}),P]})})]}),y&&(0,f.jsx)(o.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===N||void 0===N?void 0:N(null)},children:(0,f.jsx)(u.Z,_(_({},y),{},{onClose:function(){return null===N||void 0===N?void 0:N(null)}}))})]})}},97225:function(e,n,t){var i=t(75582),r=t(12691),l=t.n(r),o=t(82684),u=t(83455),c=t(34376),s=t(60328),d=t(16634),a=t(47999),f=t(67971),h=t(10919),p=t(93348),g=t(62609),j=t(86673),v=t(87815),x=t(19711),Z=t(46261),b=t(82531),m=t(10503),C=t(66050),E=t(49125),_=t(45838),k=t(9736),A=t(96510),I=t(66653),P=t(28598),y=1.5*E.iI;n.Z=function(e){var n=e.fetchPipelineSchedules,t=e.highlightRowOnHover,r=e.includeCreatedAtColumn,O=e.includePipelineColumn,w=e.pipeline,T=e.pipelineSchedules,S=e.pipelineTriggersByName,N=e.selectedSchedule,D=e.setErrors,M=e.setSelectedSchedule,z=e.stickyHeader,L=null===w||void 0===w?void 0:w.uuid,R=(0,c.useRouter)(),B=(0,o.useRef)({}),H=(0,o.useState)(null),V=H[0],F=H[1],q=(0,o.useState)(0),U=q[0],W=q[1],Y=(0,o.useState)(0),K=Y[0],J=Y[1],Q=(0,u.Db)((function(e){return b.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:e})}),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){n()},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),X=(0,i.Z)(Q,1)[0],$=(0,u.Db)((function(e){return b.ZP.pipeline_schedules.useDelete(e)()}),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){n(),L?R.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(L,"/triggers")):n()},onErrorCallback:function(e,n){return D({errors:n,response:e})}})}}),G=(0,i.Z)($,1)[0],ee=[{label:function(){return""},uuid:"action"},{uuid:"Info"},{uuid:"Type"},{uuid:"Name"},{uuid:"Frequency"},{uuid:"Runs"},{uuid:"Latest status"},{uuid:"Logs"}];(0,k.Ct)()||ee.push({label:function(){return""},uuid:"edit/delete"});var ne=[null,null,null,1,null,null,null,null,null];return O&&(ee.splice(2,0,{uuid:"Pipeline"}),ne.splice(2,0,2)),r&&(ee.splice(3,0,{uuid:"Created at"}),ne.splice(3,0,null)),(0,P.jsx)(_.cl,{overflowVisible:!0,children:0===T.length?(0,P.jsx)(j.Z,{px:3,py:1,children:(0,P.jsx)(x.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No triggers available"})}):(0,P.jsx)(v.Z,{columnFlex:ne,columns:ee,highlightRowOnHover:t,isSelectedRow:function(e){return T[e].id===(null===N||void 0===N?void 0:N.id)},onClickRow:M?function(e){return null===M||void 0===M?void 0:M(T[e])}:null,rowVerticalPadding:6,rows:T.map((function(e,n){var t,i,u=e.id,c=e.created_at,v=e.pipeline_runs_count,b=e.pipeline_uuid,_=e.last_pipeline_run_status,A=e.name,w=e.schedule_interval,T=e.status,N=L||b;B.current[u]=(0,o.createRef)(),p.fq.ACTIVE===T?i=(0,P.jsx)(d.Z,{size:y,success:!0}):p.fq.INACTIVE===T&&(i=(0,P.jsx)(d.Z,{borderSize:1,size:y,square:!0,warning:!0}));var D=[(0,P.jsx)(s.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,I.j)(n),X({id:e.id,status:p.fq.ACTIVE===T?p.fq.INACTIVE:p.fq.ACTIVE})},children:p.fq.ACTIVE===T?(0,P.jsx)(m.dz,{muted:!0,size:2*E.iI}):(0,P.jsx)(m.Py,{default:!0,size:2*E.iI})},"toggle_trigger_".concat(n)),(0,P.jsxs)(f.Z,{alignItems:"center",flexDirection:"row",children:[(0,P.jsx)(Z.Z,{block:!0,label:T,size:y,widthFitContent:!0,children:i}),(null===S||void 0===S?void 0:S[A])&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.Z,{mr:1}),(0,P.jsx)(Z.Z,{block:!0,label:"This trigger is saved in code.",size:y,widthFitContent:!0,children:(0,P.jsx)(m.EK,{default:!0,size:y})})]})]},"trigger_status_".concat(n)),(0,P.jsx)(x.ZP,{default:!0,monospace:!0,children:null===(t=p.Z4[e.schedule_type])||void 0===t?void 0:t.call(p.Z4)},"trigger_type_".concat(n)),(0,P.jsx)(l(),{as:"/pipelines/".concat(N,"/triggers/").concat(u),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,P.jsx)(h.Z,{bold:!0,onClick:function(e){(0,I.j)(e),R.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(N,"/triggers/").concat(u))},sameColorAsText:!0,children:A})},"trigger_name_".concat(n)),(0,P.jsx)(x.ZP,{default:!0,monospace:!0,children:w},"trigger_frequency_".concat(n)),(0,P.jsx)(x.ZP,{default:!0,monospace:!0,children:v},"trigger_run_count_".concat(n)),(0,P.jsx)(x.ZP,{danger:C.V.FAILED===_,default:!_,monospace:!0,success:C.V.COMPLETED===_,warning:C.V.CANCELLED===_,children:_||"N/A"},"latest_run_status_".concat(n)),(0,P.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return R.push("/pipelines/".concat(N,"/logs?pipeline_schedule_id[]=").concat(u))},children:(0,P.jsx)(m.B4,{default:!0,size:2*E.iI})},"logs_button_".concat(n))];return(0,k.Ct)()||D.push((0,P.jsxs)(f.Z,{children:[(0,P.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return R.push("/pipelines/".concat(N,"/triggers/").concat(u,"/edit"))},title:"Edit",children:(0,P.jsx)(m.I8,{default:!0,size:2*E.iI})}),(0,P.jsx)(j.Z,{mr:1}),(0,P.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){var e,n,t,i;F(u),W((null===(e=B.current[u])||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetTop)||0),J((null===(t=B.current[u])||void 0===t||null===(i=t.current)||void 0===i?void 0:i.offsetLeft)||0)},ref:B.current[u],title:"Delete",children:(0,P.jsx)(m.rF,{default:!0,size:2*E.iI})}),(0,P.jsx)(a.Z,{onClickOutside:function(){return F(null)},open:V===u,children:(0,P.jsx)(g.Z,{danger:!0,left:(K||0)-286,onCancel:function(){return F(null)},onClick:function(){F(null),G(u)},title:"Are you sure you want to delete the trigger ".concat(A,"?"),top:(U||0)-(n<=1?40:96),width:40*E.iI})})]},"edit_delete_buttons_".concat(n))),O&&D.splice(2,0,(0,P.jsx)(x.ZP,{default:!0,monospace:!0,children:N},"pipeline_name_".concat(n))),r&&D.splice(3,0,(0,P.jsx)(x.ZP,{default:!0,monospace:!0,children:c},"created_at_".concat(n))),D})),stickyHeader:z,uuid:"pipeline-triggers"})})}},51099:function(e,n,t){t.d(n,{Q:function(){return d}});t(82684);var i=t(60328),r=t(67971),l=t(86673),o=t(10503),u=t(73899),c=t(49125),s=t(28598),d=22;n.Z=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,a=e.totalPages,f=[],h=t;if(h>a)f=Array.from({length:a},(function(e,n){return n}));else{var p=Math.floor(h/2),g=n-p;n+p>=a?(g=a-h+2,h-=2):n-p<=0?(g=0,h-=2):(h-=4,g=n-Math.floor(h/2)),f=Array.from({length:h},(function(e,n){return n+g}))}return(0,s.jsx)(s.Fragment,{children:a>0&&(0,s.jsxs)(r.Z,{alignItems:"center",children:[(0,s.jsx)(i.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,s.jsx)(o.Hd,{size:1.5*c.iI,stroke:"#AEAEAE"})}),!f.includes(0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){return d(0)},borderLess:!0,noBackground:!0,children:1})},0),!f.includes(1)&&(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0)]}),f.map((function(e){return(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){e!==n&&d(e)},notClickable:e===n,backgroundColor:e===n&&u.a$,borderLess:!0,noBackground:!0,children:e+1})},e)})),!f.includes(a-1)&&(0,s.jsxs)(s.Fragment,{children:[!f.includes(a-2)&&(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0),(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){return d(a-1)},borderLess:!0,noBackground:!0,children:a})},a-1)]}),(0,s.jsx)(l.Z,{ml:1}),(0,s.jsx)(i.Z,{disabled:n===a-1,onClick:function(){return d(n+1)},children:(0,s.jsx)(o.Kw,{size:1.5*c.iI,stroke:"#AEAEAE"})})]})})}},93348:function(e,n,t){t.d(n,{TR:function(){return a},U5:function(){return c},Xm:function(){return l},Z4:function(){return d},fq:function(){return u},kJ:function(){return s}});var i,r,l,o=t(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(l||(l={}));var u,c,s,d=(i={},(0,o.Z)(i,l.API,(function(){return"API"})),(0,o.Z)(i,l.EVENT,(function(){return"event"})),(0,o.Z)(i,l.TIME,(function(){return"schedule"})),i);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(u||(u={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(c||(c={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(s||(s={}));var a=(r={},(0,o.Z)(r,s.CREATED_AT,"Created at"),(0,o.Z)(r,s.NAME,"Name"),(0,o.Z)(r,s.PIPELINE,"Pipeline"),(0,o.Z)(r,s.STATUS,"Status"),(0,o.Z)(r,s.TYPE,"Type"),r)}}]);