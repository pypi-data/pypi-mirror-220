(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8662],{1210:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var r=n(82394),i=n(21831),o=n(82684),u=n(47999),l=n(49894),c=n(93461),s=n(57384),a=n(41424),d=n(72454),f=n(28598);function p(e,t){var n=e.children;return(0,f.jsx)(d.HS,{ref:t,children:n})}var v=o.forwardRef(p),b=n(32063),h=n(85019),O=n(82531),j=n(66166),g=n(3055),m=n(49125),y=n(91427),Z=n(24141);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t,n=e.after,r=e.afterHidden,p=e.afterWidth,x=e.afterWidthOverride,P=e.before,D=e.beforeWidth,E=e.breadcrumbs,_=e.children,k=e.errors,I=e.headerMenuItems,N=e.headerOffset,C=e.mainContainerHeader,S=e.navigationItems,R=e.setErrors,T=e.subheaderChildren,M=e.title,A=e.uuid,L=(0,Z.i)().width,U="dashboard_after_width_".concat(A),H="dashboard_before_width_".concat(A),B=(0,o.useRef)(null),F=(0,o.useState)(x?p:(0,y.U2)(U,p)),W=F[0],G=F[1],J=(0,o.useState)(!1),Y=J[0],q=J[1],z=(0,o.useState)(P?Math.max((0,y.U2)(H,D),13*m.iI):null),V=z[0],X=z[1],K=(0,o.useState)(!1),$=K[0],Q=K[1],ee=(0,o.useState)(null)[1],te=O.ZP.projects.list({},{revalidateOnFocus:!1}).data,ne=null===te||void 0===te?void 0:te.projects,re=[];E?re.push.apply(re,(0,i.Z)(E)):(null===ne||void 0===ne?void 0:ne.length)>=1&&re.push.apply(re,[{label:function(){var e;return null===(e=ne[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return M}}]),(0,o.useEffect)((function(){null===B||void 0===B||!B.current||Y||$||null===ee||void 0===ee||ee(B.current.getBoundingClientRect().width)}),[Y,W,$,V,B,ee,L]),(0,o.useEffect)((function(){Y||(0,y.t8)(U,W)}),[r,Y,W,U]),(0,o.useEffect)((function(){$||(0,y.t8)(H,V)}),[$,V,H]);var ie=(0,j.Z)(p);return(0,o.useEffect)((function(){x&&ie!==p&&G(p)}),[x,p,ie]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{title:M}),(0,f.jsx)(a.Z,{breadcrumbs:re,menuItems:I,project:null===ne||void 0===ne?void 0:ne[0],version:null===ne||void 0===ne||null===(t=ne[0])||void 0===t?void 0:t.version}),(0,f.jsxs)(d.Nk,{children:[0!==(null===S||void 0===S?void 0:S.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(h.Z,{navigationItems:S,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(b.Z,{after:n,afterHeightOffset:g.Mz,afterHidden:r,afterMousedownActive:Y,afterWidth:W,before:P,beforeHeightOffset:g.Mz,beforeMousedownActive:$,beforeWidth:d.k1+(P?V:0),headerOffset:N,hideAfterCompletely:!0,leftOffset:P?d.k1:null,mainContainerHeader:C,mainContainerRef:B,setAfterMousedownActive:q,setAfterWidth:G,setBeforeMousedownActive:Q,setBeforeWidth:X,children:[T&&(0,f.jsx)(v,{children:T}),_]})})]}),k&&(0,f.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===R||void 0===R?void 0:R(null)},children:(0,f.jsx)(l.Z,w(w({},k),{},{onClose:function(){return null===R||void 0===R?void 0:R(null)}}))})]})}},19395:function(e,t,n){"use strict";n.d(t,{IJ:function(){return a},Vx:function(){return f},eI:function(){return d},gU:function(){return v},tL:function(){return p},vJ:function(){return b}});var r,i,o=n(82394),u=n(92083),l=n.n(u);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){var n=t.block_uuid,r=t.completed_at,i=t.started_at,u=t.status,c=null;i&&r&&(c=l()(r).valueOf()-l()(i).valueOf());return s(s({},e),{},(0,o.Z)({},n,{runtime:c,status:u}))}),{})}function d(e){if(!e)return null;var t=new Date(l()(e).valueOf()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());return new Date(n)}function f(e){return"string"!==typeof e?e:d(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(i||(i={}));var p=(r={},(0,o.Z)(r,i.DAY,86400),(0,o.Z)(r,i.HOUR,3600),(0,o.Z)(r,i.MINUTE,60),(0,o.Z)(r,i.SECOND,1),r);function v(e){var t=i.SECOND,n=e;return e%86400===0?(n/=86400,t=i.DAY):e%3600===0?(n/=3600,t=i.HOUR):e%60===0&&(n/=60,t=i.MINUTE),{time:n,unit:t}}function b(e,t){return e*p[t]}},47409:function(e,t,n){"use strict";n.d(t,{Az:function(){return c},BF:function(){return l},Do:function(){return a},IK:function(){return u},VO:function(){return o},sZ:function(){return s}});var r,i=n(82394),o=n(66050).V,u=[o.FAILED,o.COMPLETED,o.RUNNING,o.CANCELLED,o.INITIAL],l=[o.INITIAL,o.RUNNING],c=[o.CANCELLED,o.COMPLETED,o.FAILED],s="__mage_variables",a=(r={},(0,i.Z)(r,o.CANCELLED,"Cancelled"),(0,i.Z)(r,o.COMPLETED,"Done"),(0,i.Z)(r,o.FAILED,"Failed"),(0,i.Z)(r,o.INITIAL,"Ready"),(0,i.Z)(r,o.RUNNING,"Running"),r)},23588:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(77837),i=n(75582),o=n(82394),u=n(38860),l=n.n(u),c=n(82684),s=n(83455),a=n(27125),d=n(60328),f=n(34744),p=n(93461),v=n(67971),b=n(87372),h=n(60547),O=n(47409),j=n(98781),g=n(41788),m=n(86673),y=n(54283),Z=n(19711),x=n(82531),w=n(26304),P=n(32316),D=n(62976),E=n(48952),_=n(82635),k=n(49125),I=n(64155),N=n(56681),C=n(19395),S=n(90211),R=n(28598),T=["blockRuns","columns","dataType","height","heightOffset","loadingData","pipeline","renderColumnHeader","rows","selectedRun","selectedTab","setSelectedTab","textData"];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={uuid:"Dependency tree"},U={uuid:"Block output"},H=[U,L];var B=n(59920),F=n(96510),W=n(66653);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){var t,n=e.pipeline,r=e.pipelineRun,o=(0,c.useState)(null),u=o[0],l=o[1],g=(0,c.useState)(H[0]),M=g[0],G=g[1],Y=(0,c.useState)(null),q=Y[0],z=Y[1],V=n.uuid,X=x.ZP.pipelines.detail(V,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,K=(0,c.useMemo)((function(){return J(J({},null===X||void 0===X?void 0:X.pipeline),{},{uuid:V})}),[X,V]),$=x.ZP.pipeline_runs.detail(r.id,{},{refreshInterval:3e3,revalidateOnFocus:!0}).data,Q=(0,c.useMemo)((function(){return(null===$||void 0===$?void 0:$.pipeline_run)||{}}),[$]),ee=Q.block_runs,te=Q.execution_date,ne=Q.id,re=Q.status,ie=(0,s.Db)(x.ZP.pipeline_runs.useUpdate(ne),{onSuccess:function(e){return(0,F.wD)(e,{callback:function(){l(null)},onErrorCallback:function(e,t){return z({errors:t,response:e})}})}}),oe=(0,i.Z)(ie,2),ue=oe[0],le=oe[1].isLoading,ce=x.ZP.outputs.block_runs.list(null===u||void 0===u?void 0:u.id),se=ce.data,ae=ce.loading,de=(null===se||void 0===se||null===(t=se.outputs)||void 0===t?void 0:t[0])||{},fe=de.sample_data,pe=de.text_data,ve=de.type;(0,c.useEffect)((function(){u||(null===M||void 0===M?void 0:M.uuid)!==U.uuid||G(L)}),[u,null===M||void 0===M?void 0:M.uuid]);var be=(0,c.useMemo)((function(){return ee||[]}),[Q]),he=((null===fe||void 0===fe?void 0:fe.columns)||[]).slice(0,40),Oe=(null===fe||void 0===fe?void 0:fe.rows)||[],je=(0,c.useMemo)((function(){return(0,R.jsx)(a.Z,{blockRuns:be,onClickRow:function(e){l((function(t){var n=be[e],r=(null===t||void 0===t?void 0:t.id)!==n.id?n:null;return r&&G((function(e){return e!==U?U:e})),r}))},pipeline:K,selectedRun:u,setErrors:z})}),[be,K,u]),ge=(null===K||void 0===K?void 0:K.type)!==j.qL.STREAMING&&re&&re!==O.VO.COMPLETED,me=((null===K||void 0===K?void 0:K.type)===j.qL.PYTHON||(null===K||void 0===K?void 0:K.type)===j.qL.INTEGRATION)&&u&&O.Az.includes(re);return(0,R.jsxs)(h.Z,{breadcrumbs:[{label:function(){return"Runs"},linkProps:{as:"/pipelines/".concat(V,"/runs"),href:"/pipelines/[pipeline]/runs"}},{label:function(){return te}}],buildSidekick:function(e){return function(e){var t=e.blockRuns,n=e.columns,r=e.dataType,i=e.height,o=e.heightOffset,u=e.loadingData,l=e.pipeline,c=e.renderColumnHeader,s=e.rows,a=e.selectedRun,d=e.selectedTab,f=e.setSelectedTab,p=e.textData,b=A({},(0,w.Z)(e,T));b.blockStatus=(0,C.IJ)(t);var h=(0,R.jsx)(m.Z,{ml:2,children:(0,R.jsx)(Z.ZP,{children:"This block run has no output."})}),O=s&&s.length>0?(0,R.jsx)(D.Z,{columnHeaderHeight:c?I.Eh:0,columns:n,height:i-o-90,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,renderColumnHeader:c,rows:s}):h,j=(0,S.Pb)(p)?JSON.stringify(JSON.parse(p),null,2):p,g=p?(0,R.jsx)(m.Z,{ml:2,children:(0,R.jsx)(Z.ZP,{monospace:!0,children:(0,R.jsx)("pre",{children:j})})}):h,x=d&&f;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{style:{position:"fixed",top:"50px"},children:x&&(0,R.jsx)(m.Z,{py:k.cd,children:(0,R.jsx)(P.Z,{onClickTab:f,selectedTabUUID:null===d||void 0===d?void 0:d.uuid,tabs:a?H:[L]})})}),(0,R.jsxs)("div",{style:{position:"relative",top:"75px"},children:[(!a||L.uuid===(null===d||void 0===d?void 0:d.uuid))&&(0,R.jsx)(E.Z,A(A({},b),{},{height:i,heightOffset:(o||0)+(x?N.u$:0),pipeline:l})),a&&U.uuid===(null===d||void 0===d?void 0:d.uuid)&&(0,R.jsxs)(R.Fragment,{children:[u&&(0,R.jsx)(m.Z,{mt:2,children:(0,R.jsx)(v.Z,{alignItems:"center",fullWidth:!0,justifyContent:"center",children:(0,R.jsx)(y.Z,{color:"white",large:!0})})}),!u&&r===_.Gi.TABLE&&O,!u&&r!==_.Gi.TABLE&&g]})]})]})}(J(J({},e),{},{blockRuns:be,columns:he,dataType:ve,loadingData:ae,rows:Oe,selectedRun:u,selectedTab:M,setSelectedTab:G,showDynamicBlocks:!0,textData:pe}))},errors:q,pageName:B.M.RUNS,pipeline:K,setErrors:z,subheader:(ge||me)&&(0,R.jsxs)(v.Z,{alignItems:"center",children:[O.BF.includes(re)&&(0,R.jsxs)(p.Z,{children:[(0,R.jsx)(Z.ZP,{bold:!0,default:!0,large:!0,children:"Pipeline is running"}),(0,R.jsx)(m.Z,{mr:1}),(0,R.jsx)(y.Z,{inverted:!0}),(0,R.jsx)(m.Z,{mr:2})]}),ge&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(d.Z,{danger:!0,loading:le,onClick:function(e){(0,W.j)(e),ue({pipeline_run:{pipeline_run_action:"retry_blocks"}})},outline:!0,children:"Retry incomplete blocks"}),(0,R.jsx)(m.Z,{mr:2})]}),me&&(0,R.jsxs)(d.Z,{loading:le,onClick:function(e){(0,W.j)(e),ue({pipeline_run:{from_block_uuid:u.block_uuid,pipeline_run_action:"retry_blocks"}})},outline:!0,primary:!0,children:["Retry from selected block (",u.block_uuid,")"]})]}),title:function(e){var t=e.name;return"".concat(t," runs")},uuid:"".concat(B.M.RUNS,"_").concat(V,"_").concat(ne),children:[(0,R.jsx)(m.Z,{mt:k.cd,px:k.cd,children:(0,R.jsx)(b.Z,{level:5,children:"Block runs"})}),(0,R.jsx)(f.Z,{light:!0,mt:k.cd,short:!0}),je]})}Y.getInitialProps=function(){var e=(0,r.Z)(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r=n.pipeline,i=n.run,e.abrupt("return",{pipeline:{uuid:r},pipelineRun:{id:i}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var q=(0,g.Z)(Y)},39525:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/runs/[run]",function(){return n(23588)}])}},function(e){e.O(0,[844,9902,426,5896,1774,9350,4259,5872,1424,1005,7815,2437,8952,4822,2043,1413,9774,2888,179],(function(){return t=39525,e(e.s=t);var t}));var t=e.O();_N_E=t}]);