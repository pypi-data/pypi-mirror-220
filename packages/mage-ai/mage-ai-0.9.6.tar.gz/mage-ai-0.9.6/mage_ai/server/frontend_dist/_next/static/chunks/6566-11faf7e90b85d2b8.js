"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6566],{1210:function(e,n,t){t.d(n,{Z:function(){return E}});var i=t(82394),r=t(21831),o=t(82684),u=t(47999),l=t(49894),c=t(93461),s=t(57384),d=t(41424),a=t(72454),f=t(28598);function p(e,n){var t=e.children;return(0,f.jsx)(a.HS,{ref:n,children:t})}var h=o.forwardRef(p),j=t(32063),b=t(85019),v=t(82531),x=t(66166),g=t(3055),m=t(49125),O=t(91427),Z=t(24141);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=function(e){var n,t=e.after,i=e.afterHidden,p=e.afterWidth,C=e.afterWidthOverride,E=e.before,I=e.beforeWidth,w=e.breadcrumbs,y=e.children,P=e.errors,k=e.headerMenuItems,D=e.headerOffset,A=e.mainContainerHeader,N=e.navigationItems,L=e.setErrors,R=e.subheaderChildren,T=e.title,S=e.uuid,M=(0,Z.i)().width,V="dashboard_after_width_".concat(S),U="dashboard_before_width_".concat(S),F=(0,o.useRef)(null),H=(0,o.useState)(C?p:(0,O.U2)(V,p)),B=H[0],z=H[1],Y=(0,o.useState)(!1),W=Y[0],G=Y[1],J=(0,o.useState)(E?Math.max((0,O.U2)(U,I),13*m.iI):null),K=J[0],q=J[1],Q=(0,o.useState)(!1),X=Q[0],$=Q[1],ee=(0,o.useState)(null)[1],ne=v.ZP.projects.list({},{revalidateOnFocus:!1}).data,te=null===ne||void 0===ne?void 0:ne.projects,ie=[];w?ie.push.apply(ie,(0,r.Z)(w)):(null===te||void 0===te?void 0:te.length)>=1&&ie.push.apply(ie,[{label:function(){var e;return null===(e=te[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return T}}]),(0,o.useEffect)((function(){null===F||void 0===F||!F.current||W||X||null===ee||void 0===ee||ee(F.current.getBoundingClientRect().width)}),[W,B,X,K,F,ee,M]),(0,o.useEffect)((function(){W||(0,O.t8)(V,B)}),[i,W,B,V]),(0,o.useEffect)((function(){X||(0,O.t8)(U,K)}),[X,K,U]);var re=(0,x.Z)(p);return(0,o.useEffect)((function(){C&&re!==p&&z(p)}),[C,p,re]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{title:T}),(0,f.jsx)(d.Z,{breadcrumbs:ie,menuItems:k,project:null===te||void 0===te?void 0:te[0],version:null===te||void 0===te||null===(n=te[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(a.Nk,{children:[0!==(null===N||void 0===N?void 0:N.length)&&(0,f.jsx)(a.lm,{showMore:!0,children:(0,f.jsx)(b.Z,{navigationItems:N,showMore:!0})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(j.Z,{after:t,afterHeightOffset:g.Mz,afterHidden:i,afterMousedownActive:W,afterWidth:B,before:E,beforeHeightOffset:g.Mz,beforeMousedownActive:X,beforeWidth:a.k1+(E?K:0),headerOffset:D,hideAfterCompletely:!0,leftOffset:E?a.k1:null,mainContainerHeader:A,mainContainerRef:F,setAfterMousedownActive:G,setAfterWidth:z,setBeforeMousedownActive:$,setBeforeWidth:q,children:[R&&(0,f.jsx)(h,{children:R}),y]})})]}),P&&(0,f.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===L||void 0===L?void 0:L(null)},children:(0,f.jsx)(l.Z,_(_({},P),{},{onClose:function(){return null===L||void 0===L?void 0:L(null)}}))})]})}},65597:function(e,n,t){t.d(n,{f:function(){return l}});var i=t(38626),r=t(23831),o=t(49125),u=t(73942),l=i.default.div.withConfig({displayName:"Tablestyle__PopupContainerStyle",componentId:"sc-8ammqd-0"})(["position:absolute;max-height:","px;z-index:10;border-radius:","px;padding:","px;"," "," "," ",""],58*o.iI,u.TR,2*o.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||r.Z.shadow).popup,";\n    background-color: ").concat((e.theme.interactive||r.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.leftOffset&&"\n    left: ".concat(e.leftOffset,"px;\n  ")}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")}))},97496:function(e,n,t){var i=t(82394),r=t(75582),o=t(12691),u=t.n(o),l=t(34376),c=t.n(l),s=t(82684),d=t(83455),a=t(60328),f=t(38341),p=t(47999),h=t(93461),j=t(67971),b=t(10919),v=t(47409),x=t(86673),g=t(54283),m=t(87815),O=t(19711),Z=t(82531),C=t(23831),_=t(73942),E=t(10503),I=t(65597),w=t(93348),y=t(45838),P=t(49125),k=t(19395),D=t(24224),A=t(9736),N=t(96510),L=t(28598);function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(e){var n=e.cancelingRunId,t=e.disabled,i=e.isLoadingCancelPipeline,o=e.onCancel,u=e.onSuccess,l=e.pipelineRun,c=e.setCancelingRunId,f=e.setErrors,h=e.setShowConfirmationId,b=e.showConfirmationId,m=(0,A.Ct)(),y=l||{},k=y.id,D=y.pipeline_schedule_id,R=y.pipeline_schedule_token,T=y.pipeline_schedule_type,S=y.status,M=i&&k===n&&v.VO.RUNNING===S,V=(0,d.Db)(w.Xm.API===T&&R?Z.ZP.pipeline_runs.pipeline_schedules.useCreateWithParent(D,R):Z.ZP.pipeline_runs.pipeline_schedules.useCreate(D),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(){u()},onErrorCallback:function(e,n){return null===f||void 0===f?void 0:f({errors:n,response:e})}})}}),U=(0,r.Z)(V,1)[0],F=(0,s.useCallback)((function(){h(null),U({pipeline_run:{backfill_id:null===l||void 0===l?void 0:l.backfill_id,event_variables:(null===l||void 0===l?void 0:l.event_variables)||{},execution_date:null===l||void 0===l?void 0:l.execution_date,pipeline_schedule_id:null===l||void 0===l?void 0:l.pipeline_schedule_id,pipeline_uuid:null===l||void 0===l?void 0:l.pipeline_uuid,variables:(null===l||void 0===l?void 0:l.variables)||{}}})}),[U,l,h]),H=(0,s.useCallback)((function(){h(null),c(k),o({id:k,status:v.VO.CANCELLED})}),[o,k,c,h]);return(0,L.jsxs)("div",{style:{position:"relative"},children:[(0,L.jsx)(a.Z,{backgroundColor:M&&C.Z.accent.yellow,beforeIcon:v.VO.INITIAL!==S&&!t&&(0,L.jsxs)(L.Fragment,{children:[v.VO.COMPLETED===S&&(0,L.jsx)(E.Jr,{size:2*P.iI}),[v.VO.FAILED,v.VO.CANCELLED].includes(S)&&(0,L.jsx)(E.Py,{inverted:v.VO.CANCELLED===S&&!m,size:2*P.iI}),[v.VO.RUNNING].includes(S)&&(0,L.jsx)(g.Z,{color:M?C.Z.status.negative:C.Z.monotone.white,small:!0})]}),borderRadius:_.D7,danger:v.VO.FAILED===S&&!m,default:v.VO.INITIAL===S,disabled:t||m,loading:!l,onClick:function(){return h(k)},padding:"6px",primary:v.VO.RUNNING===S&&!M&&!m,warning:v.VO.CANCELLED===S&&!m,children:t?"Ready":M?"Canceling":v.Do[S]}),(0,L.jsx)(p.Z,{onClickOutside:function(){return h(null)},open:b===k,children:(0,L.jsxs)(I.f,{children:[[v.VO.RUNNING,v.VO.INITIAL].includes(S)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(O.ZP,{bold:!0,color:"#9ECBFF",children:"Run is in progress"}),(0,L.jsx)(x.Z,{mb:1}),(0,L.jsxs)(O.ZP,{children:["This pipeline run is currently ongoing. Retrying will cancel",(0,L.jsx)("br",{}),"the current pipeline run."]}),(0,L.jsx)(O.ZP,{}),(0,L.jsx)(x.Z,{mt:1,children:(0,L.jsxs)(j.Z,{children:[(0,L.jsx)(a.Z,{onClick:function(){H(),F()},children:"Retry run"}),(0,L.jsx)(x.Z,{ml:1}),(0,L.jsx)(a.Z,{onClick:H,children:"Cancel run"})]})})]}),[v.VO.CANCELLED,v.VO.FAILED,v.VO.COMPLETED].includes(S)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(O.ZP,{bold:!0,color:"#9ECBFF",children:["Run ",S]}),(0,L.jsx)(x.Z,{mb:1}),(0,L.jsx)(O.ZP,{children:"Retry the run with changes you have made to the pipeline."}),(0,L.jsx)(x.Z,{mb:1}),(0,L.jsx)(a.Z,{onClick:F,children:"Retry run"})]})]})})]})}n.Z=function(e){var n=e.allowBulkSelect,t=e.disableRowSelect,o=e.emptyMessage,l=void 0===o?"No runs available":o,p=e.fetchPipelineRuns,g=e.onClickRow,C=e.pipelineRuns,I=e.selectedRun,w=e.selectedRuns,A=e.setSelectedRuns,R=e.setErrors,M=(0,s.useState)(null),V=M[0],U=M[1],F=(0,s.useState)(null),H=F[0],B=F[1],z=(0,d.Db)((function(e){var n=e.id,t=e.status;return Z.ZP.pipeline_runs.useUpdate(n)({pipeline_run:{status:t}})}),{onSuccess:function(e){return(0,N.wD)(e,{callback:function(){U(null),p()},onErrorCallback:function(e,n){U(null),null===R||void 0===R||R({errors:n,response:e})}})}}),Y=(0,r.Z)(z,2),W=Y[0],G=Y[1].isLoading,J=[null,1,2,1,1,null],K=[{uuid:"Status"},{uuid:"Pipeline UUID"},{uuid:"Date"},{uuid:"Trigger"},{uuid:"Block runs"},{uuid:"Completed"},{uuid:"Logs"}],q=(0,s.useMemo)((function(){return C.every((function(e){var n=e.id;return!(null===w||void 0===w||!w[n])}))}),[C,w]);return n&&(J.unshift(null),K.unshift({label:function(){return(0,L.jsx)(f.Z,{checked:q,onClick:function(){var e=(0,D.HK)(C||[],(function(e){return e.id}));A(q?{}:e)}})},uuid:"Selected"})),!t&&g&&(J.push(null),K.push({label:function(){return""},uuid:"action"})),(0,L.jsx)(y.cl,{minHeight:30*P.iI,overflowVisible:!!H,children:0===(null===C||void 0===C?void 0:C.length)?(0,L.jsx)(x.Z,{px:3,py:1,children:(0,L.jsx)(O.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:l})}):(0,L.jsx)(m.Z,{columnFlex:J,columns:K,isSelectedRow:function(e){return!t&&C[e].id===(null===I||void 0===I?void 0:I.id)},onClickRow:t?null:g,rowVerticalPadding:6,rows:null===C||void 0===C?void 0:C.map((function(e,r){var o=e.block_runs_count,l=e.completed_at,s=e.execution_date,d=e.id,m=e.pipeline_schedule_id,Z=e.pipeline_schedule_name,I=e.pipeline_uuid,y=e.status,D=!d&&!y,N=[];if(N=r>0&&C[r-1].execution_date===e.execution_date&&C[r-1].pipeline_schedule_id===e.pipeline_schedule_id?[(0,L.jsx)(x.Z,{ml:1,children:(0,L.jsxs)(j.Z,{alignItems:"center",children:[(0,L.jsx)(E.TT,{size:2*P.iI,useStroke:!0}),(0,L.jsx)(a.Z,{borderRadius:_.D7,notClickable:!0,padding:"6px",children:(0,L.jsx)(O.ZP,{muted:!0,children:v.Do[y]})})]})},"row_status"),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,muted:!0,children:I},"row_pipeline_uuid"),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,muted:!0,children:"-"},"row_date_retry"),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,muted:!0,children:"-"},"row_trigger_retry"),(0,L.jsx)(u(),{as:"/pipelines/".concat(I,"/runs/").concat(d),href:"/pipelines/[pipeline]/runs/[run]",passHref:!0,children:(0,L.jsx)(b.Z,{bold:!0,muted:!0,children:"See block runs (".concat(o,")")})},"row_block_runs"),(0,L.jsx)(O.ZP,{monospace:!0,muted:!0,children:l&&(0,k.Vx)(l)||"-"},"row_completed"),(0,L.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return c().push("/pipelines/".concat(I,"/logs?pipeline_run_id[]=").concat(d))},children:(0,L.jsx)(E.B4,{default:!0,size:2*P.iI})},"row_logs")]:[(0,L.jsx)(S,{cancelingRunId:V,disabled:D,isLoadingCancelPipeline:G,onCancel:W,onSuccess:p,pipelineRun:e,setCancelingRunId:U,setErrors:R,setShowConfirmationId:B,showConfirmationId:H},"row_retry_button"),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,children:I},"row_pipeline_uuid"),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,children:s&&(0,k.Vx)(s)||"-"},"row_date"),(0,L.jsx)(u(),{as:"/pipelines/".concat(I,"/triggers/").concat(m),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,L.jsx)(b.Z,{bold:!0,sameColorAsText:!0,children:Z})},"row_trigger"),(0,L.jsx)(u(),{as:"/pipelines/".concat(I,"/runs/").concat(d),href:"/pipelines/[pipeline]/runs/[run]",passHref:!0,children:(0,L.jsx)(b.Z,{bold:!0,disabled:D,sameColorAsText:!0,children:D?"":"See block runs (".concat(o,")")})},"row_block_runs"),(0,L.jsx)(O.ZP,{default:!0,monospace:!0,children:l&&(0,k.Vx)(l)||"-"},"row_completed"),(0,L.jsx)(a.Z,{default:!0,disabled:D,iconOnly:!0,noBackground:!0,onClick:function(){return c().push("/pipelines/".concat(I,"/logs?pipeline_run_id[]=").concat(d))},children:(0,L.jsx)(E.B4,{default:!0,size:2*P.iI})},"row_item_13")],n){var M=!(null===w||void 0===w||!w[d]);N.unshift((0,L.jsx)(f.Z,{checked:M,onClick:function(){A((function(n){return T(T({},n),{},(0,i.Z)({},d,M?null:e))}))}},"selected-pipeline-run-".concat(d)))}return!t&&g&&N.push((0,L.jsx)(h.Z,{flex:1,justifyContent:"flex-end",children:(0,L.jsx)(E._Q,{default:!0,size:2*P.iI})})),N})),uuid:"pipeline-runs"})})}},19395:function(e,n,t){t.d(n,{IJ:function(){return d},Vx:function(){return f},eI:function(){return a},gU:function(){return h},tL:function(){return p},vJ:function(){return j}});var i,r,o=t(82394),u=t(92083),l=t.n(u);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,i=n.completed_at,r=n.started_at,u=n.status,c=null;r&&i&&(c=l()(i).valueOf()-l()(r).valueOf());return s(s({},e),{},(0,o.Z)({},t,{runtime:c,status:u}))}),{})}function a(e){if(!e)return null;var n=new Date(l()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function f(e){return"string"!==typeof e?e:a(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(r||(r={}));var p=(i={},(0,o.Z)(i,r.DAY,86400),(0,o.Z)(i,r.HOUR,3600),(0,o.Z)(i,r.MINUTE,60),(0,o.Z)(i,r.SECOND,1),i);function h(e){var n=r.SECOND,t=e;return e%86400===0?(t/=86400,n=r.DAY):e%3600===0?(t/=3600,n=r.HOUR):e%60===0&&(t/=60,n=r.MINUTE),{time:t,unit:n}}function j(e,n){return e*p[n]}},51099:function(e,n,t){t.d(n,{Q:function(){return d}});t(82684);var i=t(60328),r=t(67971),o=t(86673),u=t(10503),l=t(73899),c=t(49125),s=t(28598),d=22;n.Z=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,a=e.totalPages,f=[],p=t;if(p>a)f=Array.from({length:a},(function(e,n){return n}));else{var h=Math.floor(p/2),j=n-h;n+h>=a?(j=a-p+2,p-=2):n-h<=0?(j=0,p-=2):(p-=4,j=n-Math.floor(p/2)),f=Array.from({length:p},(function(e,n){return n+j}))}return(0,s.jsx)(s.Fragment,{children:a>0&&(0,s.jsxs)(r.Z,{alignItems:"center",children:[(0,s.jsx)(i.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,s.jsx)(u.Hd,{size:1.5*c.iI,stroke:"#AEAEAE"})}),!f.includes(0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){return d(0)},borderLess:!0,noBackground:!0,children:1})},0),!f.includes(1)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(i.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0)]}),f.map((function(e){return(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){e!==n&&d(e)},notClickable:e===n,backgroundColor:e===n&&l.a$,borderLess:!0,noBackground:!0,children:e+1})},e)})),!f.includes(a-1)&&(0,s.jsxs)(s.Fragment,{children:[!f.includes(a-2)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(i.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0),(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){return d(a-1)},borderLess:!0,noBackground:!0,children:a})},a-1)]}),(0,s.jsx)(o.Z,{ml:1}),(0,s.jsx)(i.Z,{disabled:n===a-1,onClick:function(){return d(n+1)},children:(0,s.jsx)(u.Kw,{size:1.5*c.iI,stroke:"#AEAEAE"})})]})})}},47409:function(e,n,t){t.d(n,{Az:function(){return c},BF:function(){return l},Do:function(){return d},IK:function(){return u},VO:function(){return o},sZ:function(){return s}});var i,r=t(82394),o=t(66050).V,u=[o.FAILED,o.COMPLETED,o.RUNNING,o.CANCELLED,o.INITIAL],l=[o.INITIAL,o.RUNNING],c=[o.CANCELLED,o.COMPLETED,o.FAILED],s="__mage_variables",d=(i={},(0,r.Z)(i,o.CANCELLED,"Cancelled"),(0,r.Z)(i,o.COMPLETED,"Done"),(0,r.Z)(i,o.FAILED,"Failed"),(0,r.Z)(i,o.INITIAL,"Ready"),(0,r.Z)(i,o.RUNNING,"Running"),i)},93348:function(e,n,t){t.d(n,{TR:function(){return a},U5:function(){return c},Xm:function(){return o},Z4:function(){return d},fq:function(){return l},kJ:function(){return s}});var i,r,o,u=t(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(o||(o={}));var l,c,s,d=(i={},(0,u.Z)(i,o.API,(function(){return"API"})),(0,u.Z)(i,o.EVENT,(function(){return"event"})),(0,u.Z)(i,o.TIME,(function(){return"schedule"})),i);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(l||(l={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(c||(c={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(s||(s={}));var a=(r={},(0,u.Z)(r,s.CREATED_AT,"Created at"),(0,u.Z)(r,s.NAME,"Name"),(0,u.Z)(r,s.PIPELINE,"Pipeline"),(0,u.Z)(r,s.STATUS,"Status"),(0,u.Z)(r,s.TYPE,"Type"),r)}}]);