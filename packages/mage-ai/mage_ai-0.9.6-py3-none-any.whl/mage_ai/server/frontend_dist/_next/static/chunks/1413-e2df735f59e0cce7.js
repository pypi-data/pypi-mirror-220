"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1413],{27125:function(e,n,t){var i=t(75582),r=t(82684),o=t(12691),u=t.n(o),l=t(34376),c=t.n(l),s=t(38626),d=t(83455),a=t(35490),p=t(66050),f=t(60328),b=t(16634),h=t(67971),v=t(10919),g=t(98781),m=t(86673),j=t(87815),x=t(19711),O=t(46261),Z=t(82531),k=t(73828),y=t(94353),_=t(10503),P=t(49125),T=t(44162),w=t(24224),S=t(96510),L=t(43482),D=t(28598);n.Z=function(e){var n=e.blockRuns,t=e.onClickRow,o=e.pipeline,l=e.selectedRun,M=e.setErrors,C=(0,r.useContext)(s.ThemeContext),I=(0,r.useState)(null),E=I[0],R=I[1],N=(0,r.useState)(null),A=N[0],Y=N[1],B=o||{},V=B.uuid,F=B.type,H=(0,r.useMemo)((function(){return o.blocks||[]}),[o]),Q=(0,r.useMemo)((function(){return(0,w.HK)(H,(function(e){return e.uuid}))}),[H]),q=(0,r.useMemo)((function(){return g.qL.INTEGRATION===F}),[F]),J=(0,r.useMemo)((function(){return g.qL.PYTHON===F}),[F]),K=(0,r.useMemo)((function(){var e,n;return null===(e=new a.Z)||void 0===e||null===(n=e.decodedToken)||void 0===n?void 0:n.token}),[]),U=(0,d.Db)((function(e){var n=e.blockUUID,t=e.pipelineRunId;return Z.ZP.block_outputs.pipelines.downloads.detailAsync(null===o||void 0===o?void 0:o.uuid,n,{pipeline_run_id:t,token:K},{onDownloadProgress:function(e){return R((Number((null===e||void 0===e?void 0:e.loaded)||0)/1e6).toFixed(3))},responseType:y.E.BLOB})}),{onSuccess:function(e){return(0,S.wD)(e,{callback:function(e){Y(null),(0,L.uS)(e,"block_output.".concat(k.Lu.CSV))},onErrorCallback:function(e,n){return null===M||void 0===M?void 0:M({errors:n,response:e})}})}}),W=(0,i.Z)(U,2),z=W[0],X=W[1].isLoading,G=[{uuid:"Date"},{uuid:"Status"},{uuid:"Trigger"},{uuid:"Block"},{uuid:"Completed"},{uuid:"Logs"}];return J&&G.push({uuid:"Output"}),(0,D.jsx)(j.Z,{columnFlex:[null,1,3,2,null,null,null],columns:G,isSelectedRow:function(e){return n[e].id===(null===l||void 0===l?void 0:l.id)},onClickRow:t,rows:null===n||void 0===n?void 0:n.map((function(e){var n,t,i,r,o=e||{},l=o.block_uuid,s=o.completed_at,d=o.created_at,a=o.id,g=o.pipeline_run_id,j=o.pipeline_schedule_id,Z=o.pipeline_schedule_name,k=o.status,y=l,w=y.split(":"),S=A===a&&X;q&&(y=w[0],i=w[1],r=w[2]);var L=Q[y];L||(L=Q[w[0]]);var M=[(0,D.jsx)(x.ZP,{default:!0,monospace:!0,children:d},"".concat(a,"_created_at")),(0,D.jsx)(x.ZP,{danger:p.V.FAILED===k,default:p.V.CANCELLED===k,info:p.V.INITIAL===k,monospace:!0,success:p.V.COMPLETED===k,warning:p.V.RUNNING===k,children:k},"".concat(a,"_status")),(0,D.jsx)(u(),{as:"/pipelines/".concat(V,"/triggers/").concat(j),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,D.jsx)(v.Z,{bold:!0,sameColorAsText:!0,children:Z})},"".concat(a,"_trigger")),(0,D.jsx)(u(),{as:"/pipelines/".concat(V,"/edit?block_uuid=").concat(y),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,D.jsxs)(v.Z,{bold:!0,sameColorAsText:!0,verticalAlignContent:!0,children:[(0,D.jsx)(b.Z,{color:(0,T.qn)(null===(n=L)||void 0===n?void 0:n.type,{blockColor:null===(t=L)||void 0===t?void 0:t.color,theme:C}).accent,size:1.5*P.iI,square:!0}),(0,D.jsx)(m.Z,{mr:1}),(0,D.jsxs)(x.ZP,{monospace:!0,children:[y,i&&": ",i&&(0,D.jsx)(x.ZP,{default:!0,inline:!0,monospace:!0,children:i}),r>=0&&": ",r>=0&&(0,D.jsx)(x.ZP,{default:!0,inline:!0,monospace:!0,children:r})]})]})},"".concat(a,"_block_uuid")),(0,D.jsx)(x.ZP,{default:!0,monospace:!0,children:s||"-"},"".concat(a,"_completed_at")),(0,D.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return c().push("/pipelines/".concat(V,"/logs?block_run_id[]=").concat(a))},children:(0,D.jsx)(_.B4,{default:!0,size:2*P.iI})},"".concat(a,"_logs"))];return J&&M.push((0,D.jsx)(h.Z,{alignItems:"center",justifyContent:"center",children:(0,D.jsx)(O.Z,{appearBefore:!0,autoHide:!S,block:!0,forceVisible:S,label:S?"".concat(E||0,"mb downloaded..."):"Save block run output as CSV file",size:null,widthFitContent:!0,children:(0,D.jsx)(f.Z,{default:!0,disabled:!J||!(p.V.COMPLETED===k)||X,iconOnly:!0,loading:S,noBackground:!0,onClick:function(){R(null),Y(a),z({blockUUID:y,pipelineRunId:g})},children:(0,D.jsx)(_.vc,{default:!0,size:2*P.iI})})})},"".concat(a,"_save_output"))),M})),uuid:"block-runs"})}},60547:function(e,n,t){t.d(n,{Z:function(){return T}});var i=t(82394),r=t(21831),o=t(82684),u=t(34376),l=t(47999),c=t(1210),s=t(34744),d=t(49894),a=t(67971),p=t(87372),f=t(86673),b=t(82531),h=t(38626),v=t(23831),g=t(73942),m=t(49125),j=h.default.div.withConfig({displayName:"indexstyle__BannerStyle",componentId:"sc-1te3pmf-0"})(["border-radius:","px;padding:","px;"," "," ",""],g.n_,3*m.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||v.Z.shadow).small,";\n  ")}),(function(e){return e.background&&"\n    background: ".concat(e.background,";\n  ")}),(function(e){return e.backgroundImage&&'\n    background-image: url("'.concat(e.backgroundImage,'");\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n  ')})),x=t(3055),O=t(36405),Z=t(96510),k=t(24141),y=t(28598);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var T=function(e){var n=e.after,t=e.afterHidden,i=e.afterWidth,h=e.before,v=e.beforeWidth,g=e.breadcrumbs,_=e.buildSidekick,T=e.children,w=e.errors,S=e.headline,L=e.pageName,D=e.pipeline,M=e.setErrors,C=e.subheader,I=e.subheaderBackground,E=e.subheaderBackgroundImage,R=e.subheaderButton,N=e.subheaderText,A=e.title,Y=e.uuid,B=(0,k.i)().height,V=(0,u.useRouter)().query.pipeline,F=D.uuid,H=b.ZP.pipelines.detail(F,{includes_outputs:!1},{revalidateOnFocus:!1}).data,Q=null===H||void 0===H?void 0:H.pipeline;(0,o.useEffect)((function(){(0,Z.bB)(H,M)}),[H,M]);var q=(0,o.useMemo)((function(){return n||(_?_({height:B,heightOffset:x.Mz,pipeline:Q}):null)}),[n,_,B,Q]),J=i||(q?50*m.iI:null),K=(0,o.useMemo)((function(){var e=[];return Q?(e.push.apply(e,[{label:function(){return"Pipelines"},linkProps:{href:"/pipelines"}}]),g?(e.push({label:function(){return Q.uuid},linkProps:{as:"/pipelines/".concat(F,"/triggers"),href:"/pipelines/[pipeline]/triggers"}}),e.push.apply(e,(0,r.Z)(g)),e[e.length-1].bold=!0):e.push({bold:!0,label:function(){return Q.name}})):null!==H&&void 0!==H&&H.error&&e.push({bold:!0,danger:!0,label:function(){return"Error loading pipeline"}}),e}),[g,null===H||void 0===H?void 0:H.error,Q,F]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(c.Z,{after:q,afterHidden:t,afterWidth:J,before:h,beforeWidth:v,breadcrumbs:K,navigationItems:(0,O.H)(L,Q,V),subheaderChildren:"undefined"!==typeof C&&C,title:Q?A?A(Q):Q.name:null,uuid:Y,children:[(R||N)&&(0,y.jsx)(f.Z,{mb:m.Mq,mt:m.cd,mx:m.cd,children:(0,y.jsx)(j,{background:I,backgroundImage:E,children:(0,y.jsxs)(a.Z,{alignItems:"center",children:[R,N&&(0,y.jsx)(f.Z,{ml:3}),N]})})}),S&&(0,y.jsx)(f.Z,{p:m.cd,children:(0,y.jsxs)(f.Z,{mt:m.cd,px:m.cd,children:[(0,y.jsx)(p.Z,{level:5,children:S}),(0,y.jsx)(s.Z,{light:!0,mt:m.cd,short:!0})]})}),T]}),w&&(0,y.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===M||void 0===M?void 0:M(null)},children:(0,y.jsx)(d.Z,P(P({},w),{},{onClose:function(){return null===M||void 0===M?void 0:M(null)}}))})]})}},56681:function(e,n,t){t.d(n,{G7:function(){return Z},ZP:function(){return k},u$:function(){return j}});var i=t(75582),r=t(82394),o=t(26304),u=t(32316),l=t(22673),c=t(48952),s=t(86673),d=t(19711),a=t(87815),p=t(49125),f=t(19395),b=t(7715),h=t(28598),v=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var j=76,x={uuid:"Run details"},O={uuid:"Dependency tree"},Z=[O,x];function k(e){var n=e.height,t=e.heightOffset,r=e.pipeline,g=e.selectedRun,k=e.selectedTab,y=e.setSelectedTab,_=m({},(0,o.Z)(e,v));g?_.blockStatus=(0,f.IJ)(null===g||void 0===g?void 0:g.block_runs):_.noStatus=!0;var P=(0,b.Kn)(null===g||void 0===g?void 0:g.variables)?m({},null===g||void 0===g?void 0:g.variables):(null===g||void 0===g?void 0:g.variables)||{},T=null===g||void 0===g?void 0:g.event_variables;if(T&&(0,b.Kn)(T)&&!(0,b.Qr)(T))if((0,b.Kn)(P)&&P.hasOwnProperty("event")){var w=(0,b.Kn)(P.event)?P.event:{};P.event=m(m({},w),T)}else P.event=m({},T);var S=[];P&&JSON.stringify(P,null,2).split("\n").forEach((function(e){S.push("    ".concat(e))}));var L=g&&[["Run ID",null===g||void 0===g?void 0:g.id],["Variables",(0,h.jsx)(l.Z,{language:"json",small:!0,source:S.join("\n")},"variable_value")]],D=g&&(0,h.jsx)(s.Z,{pb:p.cd,px:p.cd,children:(0,h.jsx)(a.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:L.map((function(e,n){var t=(0,i.Z)(e,2),r=t[0],o=t[1];return[(0,h.jsx)(d.ZP,{monospace:!0,muted:!0,children:r},"key_".concat(n)),(0,h.jsx)(d.ZP,{monospace:!0,textOverflow:!0,children:o},"val_".concat(n))]})),uuid:"LogDetail"})}),M=k&&y;return(0,h.jsxs)(h.Fragment,{children:[M&&(0,h.jsx)(s.Z,{py:p.cd,children:(0,h.jsx)(u.Z,{onClickTab:y,selectedTabUUID:null===k||void 0===k?void 0:k.uuid,tabs:Z})}),(!M||O.uuid===(null===k||void 0===k?void 0:k.uuid))&&(0,h.jsx)(c.Z,m(m({},_),{},{height:n,heightOffset:(t||0)+(M?j:0),pipeline:r})),x.uuid===(null===k||void 0===k?void 0:k.uuid)&&D]})}},73828:function(e,n,t){t.d(n,{JD:function(){return v},Lu:function(){return o},PF:function(){return f},d2:function(){return p},dT:function(){return u},n6:function(){return s},nB:function(){return h},oy:function(){return b},xF:function(){return a}});var i,r,o,u,l=t(82394),c=t(86422);!function(e){e.CSV="csv",e.JSON="json",e.MD="md",e.PY="py",e.R="r",e.SQL="sql",e.TXT="txt",e.YAML="yaml",e.YML="yml"}(o||(o={})),function(e){e.INIT_PY="__init__.py",e.METADATA_YAML="metadata.yaml",e.REQS_TXT="requirements.txt"}(u||(u={}));var s=[o.PY,o.SQL],d=[o.JSON,o.MD,o.PY,o.R,o.SQL,o.TXT,o.YAML,o.YML],a=new RegExp(d.map((function(e){return".".concat(e,"$")})).join("|")),p=new RegExp(d.map((function(e){return".".concat(e,"$")})).join("|")),f="charts",b="pipelines",h=(i={},(0,l.Z)(i,o.MD,c.t6.MARKDOWN),(0,l.Z)(i,o.JSON,o.JSON),(0,l.Z)(i,o.PY,c.t6.PYTHON),(0,l.Z)(i,o.R,c.t6.R),(0,l.Z)(i,o.SQL,c.t6.SQL),(0,l.Z)(i,o.TXT,"text"),(0,l.Z)(i,o.YAML,c.t6.YAML),(0,l.Z)(i,o.YML,c.t6.YAML),i),v=(r={},(0,l.Z)(r,c.t6.MARKDOWN,o.MD),(0,l.Z)(r,c.t6.PYTHON,o.PY),(0,l.Z)(r,c.t6.R,o.R),(0,l.Z)(r,c.t6.SQL,o.SQL),(0,l.Z)(r,c.t6.YAML,o.YAML),(0,l.Z)(r,"text",o.TXT),r)}}]);