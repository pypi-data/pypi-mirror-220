"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[779],{779:function(e,t,n){n.d(t,{Z:function(){return ve}});n(7941),n(8309),n(4916),n(3123);var r=n(6252),s=n(3577),a=function(e){return(0,r.dD)("data-v-7eb04934"),e=e(),(0,r.Cn)(),e},o={key:1,class:"torrent-transfers fade-in"},i={key:0,class:"no-content"},l=["onClick"],c={class:"col-8 left side"},u=["textContent"],d={class:"col-2 right side"},f=["textContent"],v={class:"col-2 right side"},m={key:0,class:"modal-body torrent-info"},p={key:0,class:"row"},h=a((function(){return(0,r._)("div",{class:"attr"},"Name",-1)})),w=["textContent"],g={key:1,class:"row"},_=a((function(){return(0,r._)("div",{class:"attr"},"State",-1)})),k=["textContent"],C={class:"row"},x=a((function(){return(0,r._)("div",{class:"attr"},"Progress",-1)})),y=["textContent"],I={class:"row"},D=a((function(){return(0,r._)("div",{class:"attr"},"DL rate",-1)})),b=["textContent"],z={class:"row"},T=a((function(){return(0,r._)("div",{class:"attr"},"UL rate",-1)})),q=["textContent"],R={class:"row"},S=a((function(){return(0,r._)("div",{class:"attr"},"Size",-1)})),E=["textContent"],Z={key:2,class:"row"},N=a((function(){return(0,r._)("div",{class:"attr"},"Remaining",-1)})),W=["textContent"],j={class:"row"},P=a((function(){return(0,r._)("div",{class:"attr"},"URL",-1)})),F={class:"value nowrap"},L=["href","textContent"],M={class:"row"},U=a((function(){return(0,r._)("div",{class:"attr"},"Peers",-1)})),V=["textContent"],$={key:3,class:"row"},H=a((function(){return(0,r._)("div",{class:"attr"},"Started",-1)})),K=["textContent"],O={key:4,class:"row"},Y=a((function(){return(0,r._)("div",{class:"attr"},"Finished",-1)})),A=["textContent"],B={key:5,class:"row"},Q=a((function(){return(0,r._)("div",{class:"attr"},"Save path",-1)})),G=["textContent"],J={key:0,class:"modal-body torrent-files"},X={class:"col-1 icon"},ee={key:1,class:"fa fa-file"},te=["textContent"];function ne(e,t,n,a,ne,re){var se=(0,r.up)("Loading"),ae=(0,r.up)("DropdownItem"),oe=(0,r.up)("Dropdown"),ie=(0,r.up)("Modal");return ne.loading?((0,r.wg)(),(0,r.j4)(se,{key:0})):((0,r.wg)(),(0,r.iD)("div",o,[Object.keys(ne.transfers).length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",i,"No torrent transfers in progress")),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(ne.transfers,(function(n,a){return(0,r.wg)(),(0,r.iD)("div",{class:(0,s.C_)(["row item",{selected:ne.selectedItem===a}]),key:a,onClick:function(e){return ne.selectedItem=a}},[(0,r._)("div",c,[(0,r._)("i",{class:(0,s.C_)(["icon fa",{"fa-check":null!=n.finish_date,"fa-play":!n.finish_date&&"downloading"===n.state,"fa-pause":!n.finish_date&&"paused"===n.state,"fa-stop":!n.finish_date&&"stopped"===n.state}])},null,2),(0,r._)("div",{class:"title",textContent:(0,s.zw)(n.name||n.hash||n.url)},null,8,u)]),(0,r._)("div",d,[(0,r._)("span",{textContent:(0,s.zw)("".concat(n.progress,"%"))},null,8,f)]),(0,r._)("div",v,[(0,r.Wm)(oe,{title:"Actions","icon-class":"fa fa-ellipsis-h",onClick:function(e){return ne.selectedItem=a}},{default:(0,r.w5)((function(){return["downloading"===n.state?((0,r.wg)(),(0,r.j4)(ae,{key:0,"icon-class":"fa fa-pause",text:"Pause transfer",onClick:function(e){return re.pause(re.torrentId(n))}},null,8,["onClick"])):(0,r.kq)("",!0),"paused"===n.state?((0,r.wg)(),(0,r.j4)(ae,{key:1,"icon-class":"fa fa-play",text:"Resume transfer",onClick:function(e){return re.resume(re.torrentId(n))}},null,8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(ae,{"icon-class":"fa fa-trash",text:"Remove transfer",onClick:function(e){return re.remove(re.torrentId(n))}},null,8,["onClick"]),(0,r.Wm)(ae,{"icon-class":"fa fa-folder",text:"View files",onClick:t[0]||(t[0]=function(t){return e.$refs.torrentFiles.isVisible=!0})}),(0,r.Wm)(ae,{"icon-class":"fa fa-info",text:"Torrent info",onClick:t[1]||(t[1]=function(t){return e.$refs.torrentInfo.isVisible=!0})})]})),_:2},1032,["onClick"])])],10,l)})),128)),(0,r.Wm)(ie,{ref:"torrentInfo",title:"Torrent info",width:"80%"},{default:(0,r.w5)((function(){return[null!=ne.selectedItem&&ne.transfers[ne.selectedItem]?((0,r.wg)(),(0,r.iD)("div",m,[ne.transfers[ne.selectedItem].name?((0,r.wg)(),(0,r.iD)("div",p,[h,(0,r._)("div",{class:"value",textContent:(0,s.zw)(ne.transfers[ne.selectedItem].name)},null,8,w)])):(0,r.kq)("",!0),ne.transfers[ne.selectedItem].state?((0,r.wg)(),(0,r.iD)("div",g,[_,(0,r._)("div",{class:"value",textContent:(0,s.zw)(ne.transfers[ne.selectedItem].state)},null,8,k)])):(0,r.kq)("",!0),(0,r._)("div",C,[x,(0,r._)("div",{class:"value",textContent:(0,s.zw)("".concat(ne.transfers[ne.selectedItem].progress||0,"%"))},null,8,y)]),(0,r._)("div",I,[D,(0,r._)("div",{class:"value",textContent:(0,s.zw)("".concat(e.convertSize(ne.transfers[ne.selectedItem].download_rate||0),"/s"))},null,8,b)]),(0,r._)("div",z,[T,(0,r._)("div",{class:"value",textContent:(0,s.zw)("".concat(e.convertSize(ne.transfers[ne.selectedItem].upload_rate||0),"/s"))},null,8,q)]),(0,r._)("div",R,[S,(0,r._)("div",{class:"value",textContent:(0,s.zw)(e.convertSize(ne.transfers[ne.selectedItem].size||0))},null,8,E)]),ne.transfers[ne.selectedItem].remaining_bytes?((0,r.wg)(),(0,r.iD)("div",Z,[N,(0,r._)("div",{class:"value",textContent:(0,s.zw)(e.convertSize(ne.transfers[ne.selectedItem].remaining_bytes))},null,8,W)])):(0,r.kq)("",!0),(0,r._)("div",j,[P,(0,r._)("div",F,[(0,r._)("a",{href:ne.transfers[ne.selectedItem].url,target:"_blank",textContent:(0,s.zw)(ne.transfers[ne.selectedItem].url)},null,8,L)])]),(0,r._)("div",M,[U,(0,r._)("div",{class:"value",textContent:(0,s.zw)(ne.transfers[ne.selectedItem].peers||0)},null,8,V)]),ne.transfers[ne.selectedItem].start_date?((0,r.wg)(),(0,r.iD)("div",$,[H,(0,r._)("div",{class:"value",textContent:(0,s.zw)(e.formatDateTime(ne.transfers[ne.selectedItem].start_date))},null,8,K)])):(0,r.kq)("",!0),ne.transfers[ne.selectedItem].finish_date?((0,r.wg)(),(0,r.iD)("div",O,[Y,(0,r._)("div",{class:"value",textContent:(0,s.zw)(e.formatDateTime(ne.transfers[ne.selectedItem].finish_date))},null,8,A)])):(0,r.kq)("",!0),ne.transfers[ne.selectedItem].save_path?((0,r.wg)(),(0,r.iD)("div",B,[Q,(0,r._)("div",{class:"value",textContent:(0,s.zw)(ne.transfers[ne.selectedItem].save_path)},null,8,G)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)]})),_:1},512),(0,r.Wm)(ie,{ref:"torrentFiles",title:"Torrent files",width:"80%"},{default:(0,r.w5)((function(){return[null!=ne.selectedItem&&ne.transfers[ne.selectedItem]?((0,r.wg)(),(0,r.iD)("div",J,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(re.relativeFiles,(function(t,a){return(0,r.wg)(),(0,r.iD)("div",{class:"row",key:t},[(0,r._)("div",X,[n.isMedia&&e.mediaExtensions.has(t.split(".").pop())?((0,r.wg)(),(0,r.j4)(oe,{key:0},{default:(0,r.w5)((function(){return[(0,r.Wm)(ae,{"icon-class":"fa fa-play",text:"Play",onClick:function(t){return e.$emit("play",{url:"file://".concat(ne.transfers[ne.selectedItem].files[a]),type:"file"})}},null,8,["onClick"])]})),_:2},1024)):((0,r.wg)(),(0,r.iD)("i",ee))]),(0,r._)("div",{class:"col-11 name",textContent:(0,s.zw)(t)},null,8,te)])})),128))])):(0,r.kq)("",!0)]})),_:1},512)]))}var re=n(8534),se=(n(5666),n(1249),n(1539),n(2479),n(3948),n(1232)),ae=n(6813),oe=n(8337),ie=n(1794),le=n(2856),ce=n(2588),ue={name:"View",emits:["play","play-with-captions"],components:{Dropdown:le.Z,DropdownItem:ce.Z,Loading:se.Z,Modal:ie.Z},mixins:[ae.Z,oe.Z],props:{pluginName:{type:String,required:!0},isMedia:{type:Boolean,default:!1}},data:function(){return{loading:!1,transfers:{},selectedItem:null}},computed:{relativeFiles:function(){var e,t;return null!=this.selectedItem&&null!==(e=this.transfers[this.selectedItem])&&void 0!==e&&null!==(t=e.files)&&void 0!==t&&t.length?this.transfers[this.selectedItem].files.map((function(e){return e.split("/").pop()})):[]}},methods:{torrentId:function(e){return null!==e&&void 0!==e&&e.hash&&e.hash.length?e.hash:e.url},refresh:function(){var e=this;return(0,re.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.t0=Object,t.next=5,e.request("".concat(e.pluginName,".status"));case 5:if(t.t1=t.sent,t.t1){t.next=8;break}t.t1={};case 8:t.t2=t.t1,e.transfers=t.t0.values.call(t.t0,t.t2).reduce((function(t,n){return t[e.torrentId(n)]=n,t}),{});case 10:return t.prev=10,e.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,,10,13]])})))()},pause:function(e){var t=this;return(0,re.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".pause"),{torrent:e});case 2:return n.next=4,t.refresh();case 4:case"end":return n.stop()}}),n)})))()},resume:function(e){var t=this;return(0,re.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".resume"),{torrent:e});case 2:return n.next=4,t.refresh();case 4:case"end":return n.stop()}}),n)})))()},remove:function(e){var t=this;return(0,re.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".remove"),{torrent:e});case 2:return n.next=4,t.refresh();case 4:case"end":return n.stop()}}),n)})))()},onTorrentUpdate:function(e){this.transfers[this.torrentId(e)]=e},onTorrentRemove:function(e){var t=this.torrentId(e);t in this.transfers&&delete this.transfers[t]}},mounted:function(){this.refresh(),this.subscribe(this.onTorrentUpdate,"on-torrent-update","platypush.message.event.torrent.TorrentQueuedEvent","platypush.message.event.torrent.TorrentDownloadedMetadataEvent","platypush.message.event.torrent.TorrentDownloadStartEvent","platypush.message.event.torrent.TorrentDownloadProgressEvent","platypush.message.event.torrent.TorrentResumedEvent","platypush.message.event.torrent.TorrentPausedEvent","platypush.message.event.torrent.TorrentSeedingStartEvent","platypush.message.event.torrent.TorrentStateChangeEvent","platypush.message.event.torrent.TorrentDownloadStopEvent","platypush.message.event.torrent.TorrentDownloadCompletedEvent"),this.subscribe(this.onTorrentRemove,"on-torrent-remove","platypush.message.event.torrent.TorrentRemovedEvent")},destroy:function(){this.unsubscribe("on-torrent-update"),this.unsubscribe("on-torrent-remove")}},de=n(3744);const fe=(0,de.Z)(ue,[["render",ne],["__scopeId","data-v-7eb04934"]]);var ve=fe}}]);
//# sourceMappingURL=779-legacy.4b8d600b.js.map