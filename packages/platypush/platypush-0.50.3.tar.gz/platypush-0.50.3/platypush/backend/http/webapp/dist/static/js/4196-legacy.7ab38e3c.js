(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[4196],{4964:function(e,t,n){var r=n(5112),i=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(r){}}return!1}},3929:function(e,t,n){var r=n(7850),i=TypeError;e.exports=function(e){if(r(e))throw i("The method doesn't accept regular expressions");return e}},7852:function(e,t,n){"use strict";var r=n(2109),i=n(1702),s=n(1236).f,a=n(7466),l=n(1340),u=n(3929),o=n(4488),c=n(4964),d=n(1913),p=i("".endsWith),f=i("".slice),m=Math.min,v=c("endsWith"),h=!d&&!v&&!!function(){var e=s(String.prototype,"endsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!h&&!v},{endsWith:function(e){var t=l(o(this));u(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,i=void 0===n?r:m(a(n),r),s=l(e);return p?p(t,s,i):f(t,i-s.length,i)===s}})},6755:function(e,t,n){"use strict";var r=n(2109),i=n(1702),s=n(1236).f,a=n(7466),l=n(1340),u=n(3929),o=n(4488),c=n(4964),d=n(1913),p=i("".startsWith),f=i("".slice),m=Math.min,v=c("startsWith"),h=!d&&!v&&!!function(){var e=s(String.prototype,"startsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!h&&!v},{startsWith:function(e){var t=l(o(this));u(e);var n=a(m(arguments.length>1?arguments[1]:void 0,t.length)),r=l(e);return p?p(t,r,n):f(t,n,n+r.length)===r}})},4196:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return cr}});n(4916),n(4765);var r=n(6252),i=n(3577),s=n(9963),a={class:"media-plugin fade-in"},l={class:"nav-container"},u={class:"view-container"},o={class:"media-info-container"},c={class:"subtitles-container"},d={key:0,class:"subtitles-content"},p={class:"play-url-container"},f={class:"row"},m=(0,r.Uk)(" Play URL (use "),v=(0,r.Uk)("file://"),h=(0,r.Uk)(" prefix for local files) "),g={class:"row footer"},w=["disabled"];function y(e,t,n,y,k,b){var x,_,C=(0,r.up)("Loading"),P=(0,r.up)("Nav"),R=(0,r.up)("Header"),S=(0,r.up)("Results"),D=(0,r.up)("TorrentView"),q=(0,r.up)("Browser"),N=(0,r.up)("MediaView"),Z=(0,r.up)("Info"),M=(0,r.up)("Modal"),$=(0,r.up)("Subtitles"),V=(0,r.up)("tt");return(0,r.wg)(),(0,r.j4)(r.Ob,null,[(0,r._)("div",a,[k.loading?((0,r.wg)(),(0,r.j4)(C,{key:0})):(0,r.kq)("",!0),(0,r.Wm)(N,{"plugin-name":n.pluginName,status:(null===(x=k.selectedPlayer)||void 0===x?void 0:x.status)||{},track:(null===(_=k.selectedPlayer)||void 0===_?void 0:_.status)||{},buttons:n.mediaButtons,onPlay:b.pause,onPause:b.pause,onStop:b.stop,onSetVolume:b.setVolume,onSeek:b.seek,onSearch:b.search},{default:(0,r.w5)((function(){var s;return[(0,r._)("main",null,[(0,r._)("div",l,[(0,r.Wm)(P,{"selected-view":k.selectedView,onInput:t[0]||(t[0]=function(e){return k.selectedView=e})},null,8,["selected-view"])]),(0,r._)("div",u,[(0,r.Wm)(R,{"plugin-name":n.pluginName,"selected-view":k.selectedView,"has-subtitles-plugin":b.hasSubtitlesPlugin,ref:"header",sources:k.sources,"selected-item":k.selectedPlayer&&k.selectedPlayer.status&&("play"===k.selectedPlayer.status.state||"pause"===k.selectedPlayer.status.state)?k.selectedPlayer.status:k.results[k.selectedResult],"selected-subtitles":k.selectedSubtitles,"browser-filter":k.browserFilter,onSearch:b.search,onSelectPlayer:t[1]||(t[1]=function(e){return k.selectedPlayer=e}),onPlayerStatus:b.onStatusUpdate,onTorrentAdd:t[2]||(t[2]=function(e){return b.downloadTorrent(e)}),onShowSubtitles:t[3]||(t[3]=function(e){return k.showSubtitlesModal=!k.showSubtitlesModal}),onPlayUrl:t[4]||(t[4]=function(t){return e.$refs.playUrlModal.show()}),onFilter:t[5]||(t[5]=function(e){return k.browserFilter=e}),onSourceToggle:t[6]||(t[6]=function(e){return k.sources[e]=!k.sources[e]})},null,8,["plugin-name","selected-view","has-subtitles-plugin","sources","selected-item","selected-subtitles","browser-filter","onSearch","onPlayerStatus"]),(0,r._)("div",{class:(0,i.C_)(["body-container",{"expanded-header":null===(s=e.$refs.header)||void 0===s?void 0:s.filterVisible}])},["search"===k.selectedView?((0,r.wg)(),(0,r.j4)(S,{key:0,results:k.results,"selected-result":k.selectedResult,onSelect:t[7]||(t[7]=function(e){return b.onResultSelect(e)}),onPlay:b.play,onInfo:t[8]||(t[8]=function(t){return e.$refs.mediaInfo.isVisible=!0}),onView:b.view,onDownload:b.download,sources:k.sources},null,8,["results","selected-result","onPlay","onView","onDownload","sources"])):"torrents"===k.selectedView?((0,r.wg)(),(0,r.j4)(D,{key:1,"plugin-name":k.torrentPlugin,"is-media":!0,onPlay:b.play},null,8,["plugin-name","onPlay"])):"browser"===k.selectedView?((0,r.wg)(),(0,r.j4)(q,{key:2,"plugin-name":k.torrentPlugin,"is-media":!0,filter:k.browserFilter,onPathChange:t[9]||(t[9]=function(e){return k.browserFilter=""}),onPlay:t[10]||(t[10]=function(e){return b.play(e)})},null,8,["plugin-name","filter"])):(0,r.kq)("",!0)],2)])])]})),_:1},8,["plugin-name","status","track","buttons","onPlay","onPause","onStop","onSetVolume","onSeek","onSearch"]),(0,r._)("div",o,[(0,r.Wm)(M,{title:"Media info",ref:"mediaInfo"},{default:(0,r.w5)((function(){return[null!=k.selectedResult?((0,r.wg)(),(0,r.j4)(Z,{key:0,item:k.results[k.selectedResult]},null,8,["item"])):(0,r.kq)("",!0)]})),_:1},512)]),(0,r._)("div",c,[(0,r.Wm)(M,{title:"Available subtitles",visible:k.showSubtitlesModal,ref:"subtitlesSelector",onClose:t[12]||(t[12]=function(e){return k.showSubtitlesModal=!1})},{default:(0,r.w5)((function(){return[k.showSubtitlesModal&&null!=k.selectedResult?((0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)($,{item:k.selectedPlayer&&k.selectedPlayer.status&&("play"===k.selectedPlayer.status.state||"pause"===k.selectedPlayer.status.state)?k.selectedPlayer.status:k.results[k.selectedResult],onSelectSubs:t[11]||(t[11]=function(e){return b.selectSubtitles(e)})},null,8,["item"])])):(0,r.kq)("",!0)]})),_:1},8,["visible"])]),(0,r._)("div",p,[(0,r.Wm)(M,{title:"Play URL",ref:"playUrlModal",onOpen:t[15]||(t[15]=function(t){return e.$refs.playUrlInput.focus()})},{default:(0,r.w5)((function(){var e;return[(0,r._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)((function(e){return b.playUrl(k.urlPlay)}),["prevent"]))},[(0,r._)("div",f,[(0,r._)("label",null,[m,(0,r.Wm)(V,null,{default:(0,r.w5)((function(){return[v]})),_:1}),h,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=function(e){return k.urlPlay=e}),ref:"playUrlInput",autofocus:""},null,512),[[s.nr,k.urlPlay]])])]),(0,r._)("div",g,[(0,r._)("button",{type:"submit",disabled:!(null!==(e=k.urlPlay)&&void 0!==e&&e.length)},"Play",8,w)])],32)]})),_:1},512)])])],1024)}var k=n(6347),b=n(8534),x=(n(8309),n(1539),n(189),n(8783),n(3948),n(5666),n(1232)),_=n(1794),C=n(6813),P=n(8337),R=n(9978),S=(n(6755),n(7941),function(e){return(0,r.dD)("data-v-37a493ac"),e=e(),(0,r.Cn)(),e}),D={class:"row"},q={key:0,class:"col-7 left side"},N=S((function(){return(0,r._)("i",{class:"fa fa-filter"},null,-1)})),Z=[N],M={class:"search-box"},$={key:1,class:"col-7 left side"},V={class:"search-box"},I={key:2,class:"col-7 left side"},W={class:"search-box"},z=["value"],T={class:"col-5 right side"},j=S((function(){return(0,r._)("i",{class:"fas fa-closed-captioning"},null,-1)})),U=[j],L=S((function(){return(0,r._)("i",{class:"fa fa-plus-circle"},null,-1)})),O=[L],E=["checked","onChange"];function F(e,t,n,a,l,u){var o=(0,r.up)("Players");return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["header",{"with-filter":l.filterVisible}])},[(0,r._)("div",D,["search"===n.selectedView?((0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("button",{title:"Filter",class:(0,i.C_)(["filter-btn",{selected:l.filterVisible}]),onClick:t[0]||(t[0]=function(e){return l.filterVisible=!l.filterVisible})},Z,2),(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)((function(){return u.search&&u.search.apply(u,arguments)}),["prevent"]))},[(0,r._)("label",M,[(0,r.wy)((0,r._)("input",{type:"search",placeholder:"Search","onUpdate:modelValue":t[1]||(t[1]=function(e){return l.query=e})},null,512),[[s.nr,l.query]])])],32)])):"torrents"===n.selectedView?((0,r.wg)(),(0,r.iD)("div",$,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)((function(t){return e.$emit("torrent-add",l.torrentURL)}),["prevent"]))},[(0,r._)("label",V,[(0,r.wy)((0,r._)("input",{type:"search",placeholder:"Add torrent URL","onUpdate:modelValue":t[3]||(t[3]=function(e){return l.torrentURL=e})},null,512),[[s.nr,l.torrentURL]])])],32)])):"browser"===n.selectedView?((0,r.wg)(),(0,r.iD)("div",I,[(0,r._)("label",W,[(0,r._)("input",{type:"search",placeholder:"Filter",value:n.browserFilter,onChange:t[5]||(t[5]=function(t){return e.$emit("filter",t.target.value)}),onKeyup:t[6]||(t[6]=function(t){return e.$emit("filter",t.target.value)})},null,40,z)])])):(0,r.kq)("",!0),(0,r._)("div",T,[n.hasSubtitlesPlugin&&n.selectedItem&&("file"===n.selectedItem.type||(n.selectedItem.url||"").startsWith("file://"))?((0,r.wg)(),(0,r.iD)("button",{key:0,title:"Select subtitles",class:(0,i.C_)(["captions-btn",{selected:null!=n.selectedSubtitles}]),onClick:t[7]||(t[7]=function(t){return e.$emit("show-subtitles")})},U,2)):(0,r.kq)("",!0),(0,r.Wm)(o,{"plugin-name":n.pluginName,onSelect:t[8]||(t[8]=function(t){return e.$emit("select-player",t)}),onStatus:t[9]||(t[9]=function(t){return e.$emit("player-status",t)})},null,8,["plugin-name"]),(0,r._)("button",{title:"Play URL",onClick:t[10]||(t[10]=function(t){return e.$emit("play-url")})},O)])]),(0,r._)("div",{class:(0,i.C_)(["row filter fade-in",{hidden:!l.filterVisible}])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Object.keys(n.sources),(function(t){return(0,r.wg)(),(0,r.iD)("label",{key:t},[(0,r._)("input",{type:"checkbox",checked:n.sources[t],onChange:function(n){return e.$emit("source-toggle",t)}},null,40,E),(0,r.Uk)(" "+(0,i.zw)(t),1)])})),128))],2)],2)}n(7327);var H={class:"plugins"},K={class:"players"},B={class:"refresh"},Y={key:1,class:"no-results"};function A(e,t,n,s,a,l){var u,o,c,d,p,f,m,v=(0,r.up)("Chromecast"),h=(0,r.up)("Kodi"),g=(0,r.up)("Mplayer"),w=(0,r.up)("Mpv"),y=(0,r.up)("Omxplayer"),k=(0,r.up)("Vlc"),b=(0,r.up)("Loading"),x=(0,r.up)("DropdownItem"),_=(0,r.up)("Dropdown");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",H,[(0,r.Wm)(v,{player:"media.chromecast"===(null===(u=a.selectedPlayer)||void 0===u?void 0:u.pluginName)?a.selectedPlayer:null,ref:"chromecastPlugin",onStatus:t[0]||(t[0]=function(t){return e.$emit("status",t)})},null,8,["player"]),(0,r.Wm)(h,{player:"media.kodi"===(null===(o=a.selectedPlayer)||void 0===o?void 0:o.pluginName)?a.selectedPlayer:null,ref:"kodiPlugin",onStatus:t[1]||(t[1]=function(t){return e.$emit("status",t)})},null,8,["player"]),(0,r.Wm)(g,{player:"media.mplayer"===(null===(c=a.selectedPlayer)||void 0===c?void 0:c.pluginName)?a.selectedPlayer:null,ref:"mplayerPlugin",onStatus:t[2]||(t[2]=function(t){return e.$emit("status",t)})},null,8,["player"]),(0,r.Wm)(w,{player:"media.mpv"===(null===(d=a.selectedPlayer)||void 0===d?void 0:d.pluginName)?a.selectedPlayer:null,ref:"mpvPlugin",onStatus:t[3]||(t[3]=function(t){return e.$emit("status",t)})},null,8,["player"]),(0,r.Wm)(y,{player:"media.omxplayer"===(null===(p=a.selectedPlayer)||void 0===p?void 0:p.pluginName)?a.selectedPlayer:null,ref:"omxplayerPlugin",onStatus:t[4]||(t[4]=function(t){return e.$emit("status",t)})},null,8,["player"]),(0,r.Wm)(k,{player:"media.vlc"===(null===(f=a.selectedPlayer)||void 0===f?void 0:f.pluginName)?a.selectedPlayer:null,ref:"vlcPlugin",onStatus:t[5]||(t[5]=function(t){return e.$emit("status",t)})},null,8,["player"])]),(0,r._)("div",K,[(0,r.Wm)(_,{title:(null===(m=a.selectedPlayer)||void 0===m?void 0:m.name)||"Players","icon-class":a.selectedPlayer?a.selectedPlayer.iconClass:"fab fa-chromecast"},{default:(0,r.w5)((function(){var e;return[a.loading?((0,r.wg)(),(0,r.j4)(b,{key:0})):(0,r.kq)("",!0),(0,r._)("div",B,[(0,r.Wm)(x,{text:"Refresh","icon-class":"fa fa-sync-alt",onClick:l.refresh},null,8,["onClick"])]),null!==(e=a.players)&&void 0!==e&&e.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Y,"No players found")),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.players,(function(e,t){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["player",{selected:null!=a.selectedPlayer&&a.selectedPlayer.pluginName===e.pluginName&&a.selectedPlayer.name===e.name}]),key:t},[(0,r.Wm)(x,{text:e.name,"icon-class":e.iconClass,onClick:function(t){return l.select(e)}},null,8,["text","icon-class","onClick"])],2)})),128))]})),_:1},8,["title","icon-class"])])],64)}var Q=n(9584),G=(n(1249),n(9720),n(7852),n(2856)),X=n(2588);function J(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div")}var ee=n(4648),te={name:"Mixin",mixins:[C.Z,P.Z],emits:["status"],props:{player:{type:Object}},data:function(){return{iconClass:null,name:null,pluginName:null}},methods:{getPlayers:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=e.iconClass,t.t1=e.name,t.t2=e.pluginName,t.t3=e,t.next=6,e.status();case 6:return t.t4=t.sent,t.t5={iconClass:t.t0,name:t.t1,pluginName:t.t2,component:t.t3,status:t.t4},t.abrupt("return",[t.t5]);case 9:case"end":return t.stop()}}),t)})))()},status:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request("".concat(e.pluginName,".status"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},play:function(e,t){var n=this;return(0,b.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=4;break}return r.next=3,n.pause();case 3:return r.abrupt("return",r.sent);case 4:return r.next=6,n.request("".concat(n.pluginName,".play"),{resource:e.url,subtitles:t});case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()},pause:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request("".concat(e.pluginName,".pause"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},stop:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request("".concat(e.pluginName,".stop"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},setVolume:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".set_volume"),{volume:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},seek:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".seek"),{position:e});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},onNewMedia:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.onMediaEvent(e);case 2:r=n.sent,r&&e.title&&t.notify({title:e.player||e.device||(null===(i=t.player)||void 0===i?void 0:i.name)||t.name||t.pluginName,text:e.title,image:{iconClass:t.iconClass||"fa fa-play"}});case 4:case"end":return n.stop()}}),n)})))()},onMediaEvent:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.plugin===t.pluginName){n.next=2;break}return n.abrupt("return",!1);case 2:return n.t0=t,n.next=5,t.status();case 5:return n.t1=n.sent,n.t0.$emit.call(n.t0,"status",n.t1),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})))()},addSubtitles:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".add_subtitles"),{filename:e});case 2:return n.next=4,t.request("".concat(t.pluginName,".toggle_subtitles"),{visible:!0});case 4:case"end":return n.stop()}}),n)})))()},removeSubtitles:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request("".concat(e.pluginName,".toggle_subtitles"),{visible:!1});case 2:case"end":return t.stop()}}),t)})))()},supports:function(e){return"file"===(null===e||void 0===e?void 0:e.type)||"youtube"===(null===e||void 0===e?void 0:e.type)||(e.url||e).startsWith("file://")||(e.url||e).startsWith("http://")||(e.url||e).startsWith("https://")}},mounted:function(){this.subscribe(this.onNewMedia,"on-new-media-".concat(this.pluginName),"platypush.message.event.media.NewPlayingMediaEvent"),this.subscribe(this.onMediaEvent,"on-media-event-".concat(this.pluginName),"platypush.message.event.media.MediaPlayEvent","platypush.message.event.media.MediaStopEvent","platypush.message.event.media.MediaPauseEvent","platypush.message.event.media.MediaSeekEvent","platypush.message.event.media.MediaVolumeChangedEvent","platypush.message.event.media.MediaMuteChangedEvent")},destroy:function(){this.unsubscribe("on-media-event-".concat(this.pluginName))}};const ne=te;var re=ne,ie={name:"Chromecast",mixins:[re],data:function(){return{name:"Chromecast",pluginName:"media.chromecast",iconClass:"fab fa-chromecast"}},methods:{getPlayers:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.request("".concat(e.pluginName,".get_chromecasts"));case 2:return n=t.sent,t.abrupt("return",Promise.all(n.map(function(){var t=(0,b.Z)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,ee.Z)((0,ee.Z)({},n),{},{iconClass:"audio"===n.type?"fa fa-volume-up":"fab fa-chromecast",pluginName:e.pluginName,status:e.request("".concat(e.pluginName,".status"),{chromecast:n.name}),component:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())));case 4:case"end":return t.stop()}}),t)})))()},getPlayerName:function(e){var t;return"string"===typeof e?e:e?null===e||void 0===e?void 0:e.name:null===(t=this.player)||void 0===t?void 0:t.name},status:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".status"),{chromecast:t.getPlayerName(e)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},play:function(e,t){var n=this;return(0,b.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=4;break}return r.next=3,n.pause(t);case 3:return r.abrupt("return",r.sent);case 4:return r.next=6,n.request("".concat(n.pluginName,".play"),{resource:e.url,chromecast:n.getPlayerName(t)});case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()},pause:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".pause"),{chromecast:t.getPlayerName(e)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},stop:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request("".concat(t.pluginName,".quit"),{chromecast:t.getPlayerName(e)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},setVolume:function(e,t){var n=this;return(0,b.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.request("".concat(n.pluginName,".set_volume"),{volume:e,chromecast:n.getPlayerName(t)});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},seek:function(e,t){var n=this;return(0,b.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.request("".concat(n.pluginName,".seek"),{position:e,chromecast:n.getPlayerName(t)});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},onMediaEvent:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.plugin===t.pluginName){n.next=2;break}return n.abrupt("return",!1);case 2:return n.t0=t,n.next=5,t.status(e.player);case 5:return n.t1=n.sent,n.t0.$emit.call(n.t0,"status",n.t1),n.abrupt("return",!0);case 8:case"end":return n.stop()}}),n)})))()},supports:function(e){return"youtube"===(null===e||void 0===e?void 0:e.type)||(e.url||e).startsWith("http://")||(e.url||e).startsWith("https://")}}},se=n(3744);const ae=(0,se.Z)(ie,[["render",J]]);var le=ae;function ue(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div")}var oe={name:"Kodi",mixins:[re],data:function(){return{iconClass:"fa fa-kodi",name:"Kodi",pluginName:"media.kodi"}},methods:{getPlayers:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=e.iconClass,t.t1=e.pluginName,t.t2=(null===(n=e.$root.config["media.kodi"])||void 0===n?void 0:n.host)||e.name,t.t3=e,t.next=6,e.request("".concat(e.pluginName,".status"));case 6:return t.t4=t.sent,t.t5={iconClass:t.t0,pluginName:t.t1,name:t.t2,component:t.t3,status:t.t4},t.abrupt("return",[t.t5]);case 9:case"end":return t.stop()}}),t)})))()},supports:function(e){return"youtube"===(null===e||void 0===e?void 0:e.type)||(e.url||e).startsWith("http://")||(e.url||e).startsWith("https://")}}};const ce=(0,se.Z)(oe,[["render",ue]]);var de=ce;function pe(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div")}var fe={name:"Mplayer",mixins:[re],data:function(){return{iconClass:"fa fa-tv",name:"MPlayer",pluginName:"media.mplayer"}}};const me=(0,se.Z)(fe,[["render",pe]]);var ve=me;function he(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div")}var ge={name:"Mpv",mixins:[re],data:function(){return{iconClass:"fa fa-tv",name:"mpv",pluginName:"media.mpv"}}};const we=(0,se.Z)(ge,[["render",he]]);var ye=we;function ke(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div")}var be={name:"Omxplayer",mixins:[re],data:function(){return{iconClass:"fa fa-tv",name:"OMXPlayer",pluginName:"media.omxplayer"}}};const xe=(0,se.Z)(be,[["render",ke]]);var _e=xe;function Ce(e,t,n,i,s,a){return(0,r.wg)(),(0,r.iD)("div")}var Pe={name:"Vlc",mixins:[re],data:function(){return{iconClass:"fa fa-tv",name:"VLC",pluginName:"media.vlc"}}};const Re=(0,se.Z)(Pe,[["render",Ce]]);var Se=Re,De={name:"Players",components:{Loading:x.Z,DropdownItem:X.Z,Dropdown:G.Z,Chromecast:le,Kodi:de,Mplayer:ve,Mpv:ye,Omxplayer:_e,Vlc:Se},emits:["select","status"],props:{pluginName:{type:String,required:!0}},data:function(){return{loading:!1,players:[],selectedPlayer:null,config:{},plugins:[]}},methods:{loadPlugins:function(){this.plugins=Object.entries(this.$refs).filter((function(e){return e[0].endsWith("Plugin")})).map((function(e){return e[1]}))},refresh:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.players=[],e.loading=!0,n=e.$root.config,t.prev=3,t.next=6,Promise.all(e.plugins.map(function(){var t=(0,b.Z)(regeneratorRuntime.mark((function t(r){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.pluginName in n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,r.getPlayers();case 4:s=t.sent,(i=e.players).push.apply(i,(0,Q.Z)(s)),null==e.selectedPlayer&&r.pluginName===e.pluginName&&s.length>0&&e.select(s[0]);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return t.prev=6,e.loading=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[3,,6,9]])})))()},select:function(e){this.selectedPlayer=e,this.$emit("select",e)}},mounted:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadPlugins();case 2:return t.next=4,e.refresh();case 4:case"end":return t.stop()}}),t)})))()}};const qe=(0,se.Z)(De,[["render",A],["__scopeId","data-v-27e87a29"]]);var Ne=qe,Ze={name:"Header",components:{Players:Ne},emits:["search","select-player","player-status","torrent-add","show-subtitles","play-url","filter","source-toggle"],props:{pluginName:{type:String,required:!0},selectedView:{type:String,required:!0},selectedSubtitles:{type:String},selectedItem:{type:Object},hasSubtitlesPlugin:{type:Boolean,default:!1},browserFilter:{type:String,default:""},sources:{type:Object,default:function(){}}},data:function(){return{filterVisible:!1,query:"",torrentURL:""}},methods:{search:function(){var e,t=this,n=Object.keys(this.sources).filter((function(e){return t.sources[e]}));null!==(e=this.query)&&void 0!==e&&e.length&&null!==n&&void 0!==n&&n.length&&this.$emit("search",{query:this.query,types:n})}},mounted:function(){var e=this;this.$watch((function(){return e.selectedView}),(function(){e.$emit("filter",""),e.torrentURL="",e.query=""}))}};const Me=(0,se.Z)(Ze,[["render",F],["__scopeId","data-v-37a493ac"]]);var $e=Me,Ve=(n(2526),n(1817),n(9600),function(e){return(0,r.dD)("data-v-28611e6c"),e=e(),(0,r.Cn)(),e}),Ie={key:0,class:"row"},We=Ve((function(){return(0,r._)("div",{class:"left side"},"Title",-1)})),ze={class:"right side"},Te=["href","textContent"],je=["textContent"],Ue={key:1,class:"row"},Le=Ve((function(){return(0,r._)("div",{class:"left side"},"TV Series",-1)})),Oe=["textContent"],Ee={key:2,class:"row"},Fe=Ve((function(){return(0,r._)("div",{class:"left side"},"Season",-1)})),He=["textContent"],Ke={key:3,class:"row"},Be=Ve((function(){return(0,r._)("div",{class:"left side"},"Episode",-1)})),Ye=["textContent"],Ae={key:4,class:"row"},Qe=Ve((function(){return(0,r._)("div",{class:"left side"},"Number of seasons",-1)})),Ge=["textContent"],Xe={key:5,class:"row"},Je=Ve((function(){return(0,r._)("div",{class:"left side"},"Synopsis",-1)})),et=["textContent"],tt={key:6,class:"row"},nt=Ve((function(){return(0,r._)("div",{class:"left side"},"Description",-1)})),rt=["textContent"],it={key:7,class:"row"},st=Ve((function(){return(0,r._)("div",{class:"left side"},"Summary",-1)})),at=["textContent"],lt={key:8,class:"row"},ut=Ve((function(){return(0,r._)("div",{class:"left side"},"Overview",-1)})),ot=["textContent"],ct={key:9,class:"row"},dt=Ve((function(){return(0,r._)("div",{class:"left side"},"Duration",-1)})),pt=["textContent"],ft={key:10,class:"row"},mt=Ve((function(){return(0,r._)("div",{class:"left side"},"Country",-1)})),vt=["textContent"],ht={key:11,class:"row"},gt=Ve((function(){return(0,r._)("div",{class:"left side"},"Network",-1)})),wt=["textContent"],yt={key:12,class:"row"},kt=Ve((function(){return(0,r._)("div",{class:"left side"},"Status",-1)})),bt=["textContent"],xt={key:13,class:"row"},_t=Ve((function(){return(0,r._)("div",{class:"left side"},"Rating",-1)})),Ct=["textContent"],Pt={key:14,class:"row"},Rt=Ve((function(){return(0,r._)("div",{class:"left side"},"Votes",-1)})),St=["textContent"],Dt={key:15,class:"row"},qt=Ve((function(){return(0,r._)("div",{class:"left side"},"Genres",-1)})),Nt=["textContent"],Zt={key:16,class:"row"},Mt=Ve((function(){return(0,r._)("div",{class:"left side"},"Channel",-1)})),$t={class:"right side"},Vt=["href","textContent"],It={key:17,class:"row"},Wt=Ve((function(){return(0,r._)("div",{class:"left side"},"Year",-1)})),zt=["textContent"],Tt={key:18,class:"row"},jt=Ve((function(){return(0,r._)("div",{class:"left side"},"Published at",-1)})),Ut=["textContent"],Lt={key:19,class:"row"},Ot=Ve((function(){return(0,r._)("div",{class:"left side"},"File",-1)})),Et=["textContent"],Ft={key:20,class:"row"},Ht=Ve((function(){return(0,r._)("div",{class:"left side"},"URL",-1)})),Kt={class:"right side url"},Bt=["href","textContent"],Yt={key:21,class:"row"},At=Ve((function(){return(0,r._)("div",{class:"left side"},"Trailer",-1)})),Qt={class:"right side url"},Gt=["href","textContent"],Xt={key:22,class:"row"},Jt=Ve((function(){return(0,r._)("div",{class:"left side"},"Size",-1)})),en=["textContent"],tn={key:23,class:"row"},nn=Ve((function(){return(0,r._)("div",{class:"left side"},"Quality",-1)})),rn=["textContent"],sn={key:24,class:"row"},an=Ve((function(){return(0,r._)("div",{class:"left side"},"Seeds",-1)})),ln=["textContent"],un={key:25,class:"row"},on=Ve((function(){return(0,r._)("div",{class:"left side"},"Peers",-1)})),cn=["textContent"],dn={key:26,class:"row"},pn=Ve((function(){return(0,r._)("div",{class:"left side"},"Language",-1)})),fn=["textContent"];function mn(e,t,n,s,a,l){var u,o,c,d,p,f,m,v,h,g,w,y,k,b,x,_,C,P,R,S,D,q,N,Z,M,$,V;return(0,r.wg)(),(0,r.iD)(r.HY,null,[null!==(u=n.item)&&void 0!==u&&u.title?((0,r.wg)(),(0,r.iD)("div",Ie,[We,(0,r._)("div",ze,[n.item.imdb_id?((0,r.wg)(),(0,r.iD)("a",{key:0,href:"https://www.imdb.com/title/".concat(n.item.imdb_id),target:"_blank",textContent:(0,i.zw)(n.item.title)},null,8,Te)):((0,r.wg)(),(0,r.iD)("span",{key:1,textContent:(0,i.zw)(n.item.title)},null,8,je))])])):(0,r.kq)("",!0),null!==(o=n.item)&&void 0!==o&&o.series?((0,r.wg)(),(0,r.iD)("div",Ue,[Le,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.series)},null,8,Oe)])):(0,r.kq)("",!0),null!==(c=n.item)&&void 0!==c&&c.season?((0,r.wg)(),(0,r.iD)("div",Ee,[Fe,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.season)},null,8,He)])):(0,r.kq)("",!0),null!==(d=n.item)&&void 0!==d&&d.episode?((0,r.wg)(),(0,r.iD)("div",Ke,[Be,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.episode)},null,8,Ye)])):(0,r.kq)("",!0),null!==(p=n.item)&&void 0!==p&&p.num_seasons?((0,r.wg)(),(0,r.iD)("div",Ae,[Qe,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.num_seasons)},null,8,Ge)])):(0,r.kq)("",!0),null!==(f=n.item)&&void 0!==f&&f.synopsis?((0,r.wg)(),(0,r.iD)("div",Xe,[Je,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.synopsis)},null,8,et)])):(0,r.kq)("",!0),null!==(m=n.item)&&void 0!==m&&m.description?((0,r.wg)(),(0,r.iD)("div",tt,[nt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.description)},null,8,rt)])):(0,r.kq)("",!0),null!==(v=n.item)&&void 0!==v&&v.summary?((0,r.wg)(),(0,r.iD)("div",it,[st,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.summary)},null,8,at)])):(0,r.kq)("",!0),null!==(h=n.item)&&void 0!==h&&h.overview?((0,r.wg)(),(0,r.iD)("div",lt,[ut,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.overview)},null,8,ot)])):(0,r.kq)("",!0),null!==(g=n.item)&&void 0!==g&&g.duration?((0,r.wg)(),(0,r.iD)("div",ct,[dt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(e.convertTime(n.item.duration))},null,8,pt)])):(0,r.kq)("",!0),null!==(w=n.item)&&void 0!==w&&w.country?((0,r.wg)(),(0,r.iD)("div",ft,[mt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.country)},null,8,vt)])):(0,r.kq)("",!0),null!==(y=n.item)&&void 0!==y&&y.network?((0,r.wg)(),(0,r.iD)("div",ht,[gt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.network)},null,8,wt)])):(0,r.kq)("",!0),null!==(k=n.item)&&void 0!==k&&k.status?((0,r.wg)(),(0,r.iD)("div",yt,[kt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.status)},null,8,bt)])):(0,r.kq)("",!0),null!==(b=n.item)&&void 0!==b&&b.rating?((0,r.wg)(),(0,r.iD)("div",xt,[_t,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.rating.percentage)},null,8,Ct)])):(0,r.kq)("",!0),null!==(x=n.item)&&void 0!==x&&x.rating?((0,r.wg)(),(0,r.iD)("div",Pt,[Rt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.rating.votes)},null,8,St)])):(0,r.kq)("",!0),null!==(_=n.item)&&void 0!==_&&_.genres?((0,r.wg)(),(0,r.iD)("div",Dt,[qt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.genres.join(", "))},null,8,Nt)])):(0,r.kq)("",!0),null!==(C=n.item)&&void 0!==C&&C.channelId?((0,r.wg)(),(0,r.iD)("div",Zt,[Mt,(0,r._)("div",$t,[(0,r._)("a",{href:"https://www.youtube.com/channel/".concat(n.item.channelId),target:"_blank",textContent:(0,i.zw)(n.item.channelTitle||"https://www.youtube.com/channel/".concat(n.item.channelId))},null,8,Vt)])])):(0,r.kq)("",!0),null!==(P=n.item)&&void 0!==P&&P.year?((0,r.wg)(),(0,r.iD)("div",It,[Wt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.year)},null,8,zt)])):(0,r.kq)("",!0),null!==(R=n.item)&&void 0!==R&&R.publishedAt?((0,r.wg)(),(0,r.iD)("div",Tt,[jt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(e.formatDate(n.item.publishedAt,!0))},null,8,Ut)])):(0,r.kq)("",!0),null!==(S=n.item)&&void 0!==S&&S.file?((0,r.wg)(),(0,r.iD)("div",Lt,[Ot,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.file)},null,8,Et)])):(0,r.kq)("",!0),null!==(D=n.item)&&void 0!==D&&D.url?((0,r.wg)(),(0,r.iD)("div",Ft,[Ht,(0,r._)("div",Kt,[(0,r._)("a",{href:n.item.url,target:"_blank",textContent:(0,i.zw)(n.item.url)},null,8,Bt)])])):(0,r.kq)("",!0),null!==(q=n.item)&&void 0!==q&&q.trailer?((0,r.wg)(),(0,r.iD)("div",Yt,[At,(0,r._)("div",Qt,[(0,r._)("a",{href:n.item.trailer,target:"_blank",textContent:(0,i.zw)(n.item.trailer)},null,8,Gt)])])):(0,r.kq)("",!0),null!==(N=n.item)&&void 0!==N&&N.size?((0,r.wg)(),(0,r.iD)("div",Xt,[Jt,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(e.convertSize(n.item.size))},null,8,en)])):(0,r.kq)("",!0),null!==(Z=n.item)&&void 0!==Z&&Z.quality?((0,r.wg)(),(0,r.iD)("div",tn,[nn,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.quality)},null,8,rn)])):(0,r.kq)("",!0),null!==(M=n.item)&&void 0!==M&&M.seeds?((0,r.wg)(),(0,r.iD)("div",sn,[an,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.seeds)},null,8,ln)])):(0,r.kq)("",!0),null!==($=n.item)&&void 0!==$&&$.peers?((0,r.wg)(),(0,r.iD)("div",un,[on,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.peers)},null,8,cn)])):(0,r.kq)("",!0),null!==(V=n.item)&&void 0!==V&&V.language?((0,r.wg)(),(0,r.iD)("div",dn,[pn,(0,r._)("div",{class:"right side",textContent:(0,i.zw)(n.item.language)},null,8,fn)])):(0,r.kq)("",!0)],64)}var vn={name:"Info",mixins:[C.Z,P.Z],props:{item:{type:Object,default:function(){}}}};const hn=(0,se.Z)(vn,[["render",mn],["__scopeId","data-v-28611e6c"]]);var gn=hn,wn=["title","onClick"];function yn(e,t,n,s,a,l){return(0,r.wg)(),(0,r.iD)("nav",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.views,(function(t,s){return(0,r.wg)(),(0,r.iD)("li",{key:s,title:t.displayName,class:(0,i.C_)({selected:s===n.selectedView}),onClick:function(t){return e.$emit("input",s)}},[(0,r._)("i",{class:(0,i.C_)(t.iconClass)},null,2)],10,wn)})),128))])}var kn={name:"Nav",emits:["input"],props:{selectedView:{type:String},collapsed:{type:Boolean,default:!1},views:{type:Object,default:function(){return{search:{iconClass:"fa fa-search",displayName:"Search"},browser:{iconClass:"fa fa-folder",displayName:"Browser"},torrents:{iconClass:"fa fa-magnet",displayName:"Torrents"}}}}}};const bn=(0,se.Z)(kn,[["render",yn],["__scopeId","data-v-4597e14d"]]);var xn=bn,_n={class:"media-results"},Cn={key:0,class:"no-content"},Pn=["onClick"],Rn={class:"col-10 left side"},Sn={class:"icon"},Dn=["textContent"],qn={class:"col-2 right side"};function Nn(e,t,n,s,a,l){var u,o=(0,r.up)("DropdownItem"),c=(0,r.up)("Dropdown");return(0,r.wg)(),(0,r.iD)("div",_n,[null!==(u=n.results)&&void 0!==u&&u.length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Cn," No search results ")),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.results,(function(t,s){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["row item",{selected:n.selectedResult===s,hidden:!n.sources[t.type]}]),key:s,onClick:function(t){return e.$emit("select",s)}},[(0,r._)("div",Rn,[(0,r._)("div",Sn,[(0,r._)("i",{class:(0,i.C_)(a.typeIcons[t.type])},null,2)]),(0,r._)("div",{class:"title",textContent:(0,i.zw)(t.title)},null,8,Dn)]),(0,r._)("div",qn,[(0,r.Wm)(c,{title:"Actions","icon-class":"fa fa-ellipsis-h",onClick:function(t){return e.$emit("select",s)}},{default:(0,r.w5)((function(){return["torrent"!==(null===t||void 0===t?void 0:t.type)?((0,r.wg)(),(0,r.j4)(o,{key:0,"icon-class":"fa fa-play",text:"Play",onClick:function(n){return e.$emit("play",t)}},null,8,["onClick"])):(0,r.kq)("",!0),"torrent"===(null===t||void 0===t?void 0:t.type)?((0,r.wg)(),(0,r.j4)(o,{key:1,"icon-class":"fa fa-download",text:"Download",onClick:function(n){return e.$emit("download",t)}},null,8,["onClick"])):(0,r.kq)("",!0),"file"===(null===t||void 0===t?void 0:t.type)?((0,r.wg)(),(0,r.j4)(o,{key:2,"icon-class":"fa fa-window-maximize",text:"View in browser",onClick:function(n){return e.$emit("view",t)}},null,8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(o,{"icon-class":"fa fa-info",text:"Info",onClick:function(n){return e.$emit("info",t)}},null,8,["onClick"])]})),_:2},1032,["onClick"])])],10,Pn)})),128))])}n(9653);var Zn={name:"Results",components:{Dropdown:G.Z,DropdownItem:X.Z},emits:["select","info","play","view","download"],props:{results:{type:Array,default:function(){return[]}},selectedResult:{type:Number},sources:{type:Object,default:function(){}}},data:function(){return{typeIcons:{file:"fa fa-hdd",torrent:"fa fa-magnet",youtube:"fab fa-youtube",plex:"fa fa-plex",jellyfin:"fa fa-jellyfin"}}}};const Mn=(0,se.Z)(Zn,[["render",Nn],["__scopeId","data-v-28f7c518"]]);var $n=Mn,Vn=function(e){return(0,r.dD)("data-v-77ae3705"),e=e(),(0,r.Cn)(),e},In={class:"subtitles-container"},Wn={class:"items"},zn=Vn((function(){return(0,r._)("div",{class:"col-1 icon"},[(0,r._)("i",{class:"fa fa-ban"})],-1)})),Tn=Vn((function(){return(0,r._)("div",{class:"col-11 title"},"None",-1)})),jn=[zn,Tn],Un=["onClick"],Ln={class:"col-1 icon"},On={key:0,class:"fa fa-file"},En={key:2,class:"fa fa-closed-captioning"},Fn={class:"footer"};function Hn(e,t,n,s,a,l){var u=(0,r.up)("Loading");return(0,r.wg)(),(0,r.iD)("div",In,[(0,r._)("div",Wn,[a.loading?((0,r.wg)(),(0,r.j4)(u,{key:0})):(0,r.kq)("",!0),(0,r._)("div",{class:(0,i.C_)(["row item",{selected:null==a.selectedItem}]),onClick:t[0]||(t[0]=function(e){return a.selectedItem=null})},jn,2),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.items,(function(e,t){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["row item",{selected:a.selectedItem===t}]),key:t,onClick:function(e){return a.selectedItem=t}},[(0,r._)("div",Ln,[e.IsLocal?((0,r.wg)(),(0,r.iD)("i",On)):e.ISO639?((0,r.wg)(),(0,r.iD)("i",{key:1,class:(0,i.C_)(["flag-icon","flag-icon-".concat(e.ISO639)])},null,2)):((0,r.wg)(),(0,r.iD)("i",En))]),(0,r.Uk)(" "+(0,i.zw)(e.SubFileName),1)],10,Un)})),128))]),(0,r._)("div",Fn,[(0,r._)("button",{onClick:t[1]||(t[1]=function(t){return e.$emit("select-subs",null==a.selectedItem?null:a.items[a.selectedItem])})},"Select")])])}var Kn={name:"Subtitles",mixins:[C.Z],components:{Loading:x.Z},emits:["select-subs"],props:{item:{type:Object,default:function(){}}},data:function(){return{loading:!1,items:[],selectedItem:null}},methods:{refresh:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.request("media.subtitles.search",{resource:e.item.url,language:"all"});case 4:e.items=t.sent;case 5:return t.prev=5,e.loading=!1,t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[1,,5,8]])})))()}},mounted:function(){this.refresh()}};const Bn=(0,se.Z)(Kn,[["render",Hn],["__scopeId","data-v-77ae3705"]]);var Yn=Bn,An=n(779),Qn=(n(3123),function(e){return(0,r.dD)("data-v-a2e5c946"),e=e(),(0,r.Cn)(),e}),Gn={class:"browser-container"},Xn=Qn((function(){return(0,r._)("div",{class:"col-10 left side"},[(0,r._)("i",{class:"icon fa fa-folder"}),(0,r._)("span",{class:"name"},"..")],-1)})),Jn=[Xn],er=["onClick"],tr={class:"col-10"},nr={class:"name"},rr={class:"col-2 actions"};function ir(e,t,n,s,a,l){var u,o=(0,r.up)("Loading"),c=(0,r.up)("DropdownItem"),d=(0,r.up)("Dropdown");return(0,r.wg)(),(0,r.iD)("div",Gn,[a.loading?((0,r.wg)(),(0,r.j4)(o,{key:0})):(0,r.kq)("",!0),null!==(u=a.path)&&void 0!==u&&u.length&&"/"!==a.path?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"row item",onClick:t[0]||(t[0]=function(e){return a.path=(a.path||"")+"/.."})},Jn)):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.filteredFiles,(function(t,s){return(0,r.wg)(),(0,r.iD)("div",{class:"row item",key:s,onClick:function(e){return a.path=t.path}},[(0,r._)("div",tr,[(0,r._)("i",{class:(0,i.C_)(["icon fa",{"fa-file":"directory"!==t.type,"fa-folder":"directory"===t.type}])},null,2),(0,r._)("span",nr,(0,i.zw)(t.name),1)]),(0,r._)("div",rr,[(0,r.Wm)(d,null,{default:(0,r.w5)((function(){return[n.isMedia&&e.mediaExtensions.has(t.name.split(".").pop())?((0,r.wg)(),(0,r.j4)(c,{key:0,"icon-class":"fa fa-play",text:"Play",onClick:function(n){return e.$emit("play",{type:"file",url:"file://".concat(t.path)})}},null,8,["onClick"])):(0,r.kq)("",!0)]})),_:2},1024)])],8,er)})),128))])}var sr={name:"Browser",components:{DropdownItem:X.Z,Dropdown:G.Z,Loading:x.Z},mixins:[C.Z,P.Z],emits:["path-change"],props:{initialPath:{type:String},isMedia:{type:Boolean},filter:{type:String,default:""}},data:function(){return{loading:!1,path:this.initialPath,files:[]}},computed:{filteredFiles:function(){var e,t=this;return null!==(e=this.filter)&&void 0!==e&&e.length?this.files.filter((function(e){return((null===e||void 0===e?void 0:e.name)||"").toLowerCase().indexOf(t.filter.toLowerCase())>=0})):this.files}},methods:{refresh:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.request("file.list",{path:e.path});case 4:e.files=t.sent,e.$emit("path-change",e.path);case 6:return t.prev=6,e.loading=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])})))()}},mounted:function(){var e=this;this.$watch((function(){return e.path}),(function(){return e.refresh()})),this.refresh()}};const ar=(0,se.Z)(sr,[["render",ir],["__scopeId","data-v-a2e5c946"]]);var lr=ar,ur={name:"Media",mixins:[C.Z,P.Z],components:{Browser:lr,Loading:x.Z,MediaView:R.Z,Header:$e,Results:$n,Modal:_.Z,Info:gn,Nav:xn,TorrentView:An.Z,Subtitles:Yn},props:{pluginName:{type:String,required:!0},mediaButtons:{type:Object,default:function(){return{previous:!1,next:!1,stop:!0}}}},data:function(){return{loading:!1,results:[],selectedResult:null,selectedPlayer:null,selectedView:"search",selectedSubtitles:null,showSubtitlesModal:!1,awaitingPlayTorrent:null,urlPlay:null,browserFilter:null,torrentPlugin:null,torrentPlugins:["torrent","rtorrent"],sources:{file:!0,youtube:!0,torrent:!0}}},computed:{hasSubtitlesPlugin:function(){return"media.subtitles"in this.$root.config}},methods:{search:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.request("".concat(t.pluginName,".search"),e);case 4:t.results=n.sent;case 5:return n.prev=5,t.loading=!1,n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[1,,5,8]])})))()},play:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("torrent"!==(null===(r=e)||void 0===r?void 0:r.type)){n.next=5;break}return t.awaitingPlayTorrent=e.url,n.next=4,t.download(e);case 4:return n.abrupt("return");case 5:if(t.selectedPlayer.component.supports(e)){n.next=9;break}return n.next=8,t.startStreaming(e);case 8:e=n.sent;case 9:return n.next=11,t.selectedPlayer.component.play(e,t.selectedSubtitles,t.selectedPlayer);case 11:return n.next=13,t.refresh();case 13:case"end":return n.stop()}}),n)})))()},pause:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.selectedPlayer.component.pause(e.selectedPlayer);case 2:return t.next=4,e.refresh();case 4:case"end":return t.stop()}}),t)})))()},stop:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.selectedPlayer.component.stop(e.selectedPlayer);case 2:return t.next=4,e.refresh();case 4:case"end":return t.stop()}}),t)})))()},setVolume:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.selectedPlayer.component.setVolume(e,t.selectedPlayer);case 2:return n.next=4,t.refresh();case 4:case"end":return n.stop()}}),n)})))()},seek:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.selectedPlayer.component.seek(e,t.selectedPlayer);case 2:return n.next=4,t.refresh();case 4:case"end":return n.stop()}}),n)})))()},view:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.startStreaming(e,!0);case 2:r=n.sent,window.open(r.url,"_blank");case 4:case"end":return n.stop()}}),n)})))()},download:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("torrent"!==(null===e||void 0===e?void 0:e.type)){n.next=3;break}return n.next=3,t.downloadTorrent(e);case 3:case"end":return n.stop()}}),n)})))()},refresh:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.selectedPlayer.component.status(e.selectedPlayer);case 2:e.selectedPlayer.status=t.sent;case 3:case"end":return t.stop()}}),t)})))()},onStatusUpdate:function(e){this.selectedPlayer&&(this.selectedPlayer.status=e)},onTorrentQueued:function(e){this.notify({title:"Torrent queued for download",text:e.name,image:{iconClass:"fa fa-magnet"}})},onTorrentMetadata:function(e){this.notify({title:"Torrent metadata downloaded",text:e.name,image:{iconClass:"fa fa-info"}})},onTorrentDownloadStart:function(e){this.notify({title:"Torrent download started",text:e.name,image:{iconClass:"fa fa-download"}})},onTorrentDownloadCompleted:function(e){this.notify({title:"Torrent download completed",text:e.name,image:{iconClass:"fa fa-check"}})},getTorrentPlugin:function(){var e=this.$root.config[this.pluginName]||{},t=e.torrent_plugin;if(!t){var n,r=(0,k.Z)(this.torrentPlugins);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in this.$root.config){t=i;break}}}catch(s){r.e(s)}finally{r.f()}}return t},downloadTorrent:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.getTorrentPlugin(),r){n.next=4;break}return t.notify({text:"No torrent plugins configured",error:!0}),n.abrupt("return");case 4:return n.next=6,t.request("".concat(r,".download"),{torrent:(null===e||void 0===e?void 0:e.url)||e});case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))()},selectSubtitles:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$refs.subtitlesSelector.close(),e){n.next=4;break}return t.selectedSubtitles=null,n.abrupt("return");case 4:return t.notify({text:"Downloading subtitles track",image:{iconClass:"fa fa-download"}}),n.next=7,t.request("media.subtitles.download",{link:e.SubDownloadLink});case 7:r=n.sent,t.selectedSubtitles=r.filename,t.notify({text:"Subtitles track downloaded",image:{iconClass:"fa fa-check"}});case 10:case"end":return n.stop()}}),n)})))()},onResultSelect:function(e){null!=this.selectedResult&&this.selectedResult===e||(this.selectedResult=e,this.selectedSubtitles=null)},playUrl:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.play({url:e});case 4:t.$refs.playUrlModal.close();case 5:return n.prev=5,t.loading=!1,n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[1,,5,8]])})))()}},mounted:function(){var e=this;this.$watch((function(){return e.selectedPlayer}),(function(t){t&&e.refresh()})),this.$watch((function(){return e.selectedSubtitles}),(function(t){var n,r;new Set(["play","pause"]).has(null===(n=e.selectedPlayer)||void 0===n||null===(r=n.status)||void 0===r?void 0:r.state)&&(t?e.selectedPlayer.component.addSubtitles(t):e.selectedPlayer.component.removeSubtitles())})),this.torrentPlugin=this.getTorrentPlugin(),this.subscribe(this.onTorrentQueued,"notify-on-torrent-queued","platypush.message.event.torrent.TorrentQueuedEvent"),this.subscribe(this.onTorrentMetadata,"on-torrent-metadata","platypush.message.event.torrent.TorrentDownloadedMetadataEvent"),this.subscribe(this.onTorrentDownloadStart,"notify-on-torrent-download-start","platypush.message.event.torrent.TorrentDownloadStartEvent"),this.subscribe(this.onTorrentDownloadCompleted,"notify-on-torrent-download-completed","platypush.message.event.torrent.TorrentDownloadCompletedEvent"),"media.plex"in this.$root.config&&(this.sources.plex=!0),"media.jellyfin"in this.$root.config&&(this.sources.jellyfin=!0)},destroy:function(){this.unsubscribe("notify-on-torrent-queued"),this.unsubscribe("on-torrent-metadata"),this.unsubscribe("notify-on-torrent-download-start"),this.unsubscribe("notify-on-torrent-download-completed")}};const or=(0,se.Z)(ur,[["render",y],["__scopeId","data-v-040b2676"]]);var cr=or}}]);
//# sourceMappingURL=4196-legacy.7ab38e3c.js.map