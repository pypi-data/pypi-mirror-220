"use strict";(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[6833],{561:function(e,t,n){var l=n(2109),i=n(7908),a=n(1400),s=n(9303),r=n(6244),c=n(7207),o=n(5417),u=n(6135),d=n(5117),f=n(1194),v=f("splice"),p=Math.max,y=Math.min;l({target:"Array",proto:!0,forced:!v},{splice:function(e,t){var n,l,f,v,k,h,m=i(this),g=r(m),w=a(e,g),C=arguments.length;for(0===C?n=l=0:1===C?(n=0,l=g-w):(n=C-2,l=y(p(s(t),0),g-w)),c(g+n-l),f=o(m,l),v=0;v<l;v++)k=w+v,k in m&&u(f,v,m[k]);if(f.length=l,n<l){for(v=w;v<g-l;v++)k=v+l,h=v+n,k in m?m[h]=m[k]:d(m,h);for(v=g;v>g-l+n;v--)d(m,v-1)}else if(n>l)for(v=g-l;v>w;v--)k=v+l-1,h=v+n-1,k in m?m[h]=m[k]:d(m,h);for(v=0;v<n;v++)m[v+w]=arguments[v+2];return m.length=g-l+n,f}})},5781:function(e,t,n){n.r(t),n.d(t,{default:function(){return Wn}});var l=n(9584),i=(n(4916),n(4765),n(1249),n(1539),n(3948),n(8309),n(6252)),a=n(3577),s=n(9963),r=function(e){return(0,i.dD)("data-v-2cd8b8d5"),e=e(),(0,i.Cn)(),e},c={class:"nav-container"},o={class:"view-container"},u={class:"track-info-container"},d={key:0,class:"track-info-content"},f={key:0,class:"row file"},v=r((function(){return(0,i._)("div",{class:"col-3 attr"},"File",-1)})),p=["textContent"],y={key:1,class:"row artist"},k=r((function(){return(0,i._)("div",{class:"col-3 attr"},"Artist",-1)})),h={class:"col-9 value"},m=["href","textContent"],g={key:2,class:"row track-title"},w=r((function(){return(0,i._)("div",{class:"col-3 attr"},"Title",-1)})),C=["textContent"],_={key:3,class:"row album"},b=r((function(){return(0,i._)("div",{class:"col-3 attr"},"Album",-1)})),D={class:"col-9 value"},x=["href","textContent"],T={key:4,class:"row date"},$=r((function(){return(0,i._)("div",{class:"col-3 attr"},"Date",-1)})),P=["textContent"],S={key:5,class:"row duration"},R=r((function(){return(0,i._)("div",{class:"col-3 attr"},"Duration",-1)})),Z=["textContent"],A={key:6,class:"row track"},I=r((function(){return(0,i._)("div",{class:"col-3 attr"},"Track",-1)})),q=["textContent"],M={key:7,class:"row disc"},L=r((function(){return(0,i._)("div",{class:"col-3 attr"},"Disc",-1)})),W=["textContent"],z={key:8,class:"row url"},O=r((function(){return(0,i._)("div",{class:"col-3 attr"},"URL",-1)})),j={class:"col-9 value"},E=["href","textContent"],F={class:"playlists-modal-container"},V={class:"filter"},N={class:"playlists"},H=["checked","onChange"],K=["textContent"],U=r((function(){return(0,i._)("i",{class:"fa fa-plus"},null,-1)})),Y=(0,i.Uk)(" Â  Add "),B=[U,Y];function Q(e,t,n,r,U,Y){var Q=(0,i.up)("Loading"),G=(0,i.up)("Nav"),J=(0,i.up)("Playlist"),X=(0,i.up)("Playlists"),ee=(0,i.up)("Search"),te=(0,i.up)("Library"),ne=(0,i.up)("MediaView"),le=(0,i.up)("Modal"),ie=(0,i.up)("FormFooter");return(0,i.wg)(),(0,i.iD)(i.HY,null,[n.loading?((0,i.wg)(),(0,i.j4)(Q,{key:0})):((0,i.wg)(),(0,i.j4)(ne,{key:1,"plugin-name":n.pluginName,status:n.status,track:Y.track,onPlay:t[27]||(t[27]=function(t){return e.$emit("play",t)}),onPause:t[28]||(t[28]=function(t){return e.$emit("pause")}),onStop:t[29]||(t[29]=function(t){return e.$emit("stop")}),onPrevious:t[30]||(t[30]=function(t){return e.$emit("previous")}),onNext:t[31]||(t[31]=function(t){return e.$emit("next")}),onSetVolume:t[32]||(t[32]=function(t){return e.$emit("set-volume",t)}),onSeek:t[33]||(t[33]=function(t){return e.$emit("seek",t)}),onConsume:t[34]||(t[34]=function(t){return e.$emit("consume",t)}),onRepeat:t[35]||(t[35]=function(t){return e.$emit("repeat",t)}),onRandom:t[36]||(t[36]=function(t){return e.$emit("random",t)}),onSearch:Y.search},{default:(0,i.w5)((function(){return[(0,i._)("main",null,[(0,i._)("div",c,[(0,i.Wm)(G,{"selected-view":U.selectedView,onInput:t[0]||(t[0]=function(e){return U.selectedView=e})},null,8,["selected-view"])]),(0,i._)("div",o,["playing"===U.selectedView?((0,i.wg)(),(0,i.j4)(J,{key:0,tracks:n.tracks,status:n.status,loading:n.loading,devices:n.devices,"selected-device":n.selectedDevice,"active-device":n.activeDevice,onPlay:t[1]||(t[1]=function(t){return e.$emit("play",t)}),onClear:t[2]||(t[2]=function(t){return e.$emit("clear")}),onSwap:t[3]||(t[3]=function(t){return e.$emit("swap-tracks",t)}),onAdd:t[4]||(t[4]=function(t){return e.$emit("add-to-tracklist",t)}),onRemove:t[5]||(t[5]=function(t){return e.$emit("remove-from-tracklist",t)}),onMove:t[6]||(t[6]=function(t){return e.$emit("tracklist-move",t)}),onSave:t[7]||(t[7]=function(t){return e.$emit("tracklist-save",t)}),onInfo:t[8]||(t[8]=function(t){return e.$emit("info",t)}),onAddToPlaylist:Y.openAddToPlaylist,onSearch:Y.search,onRefreshStatus:Y.refreshStatus,onSelectDevice:Y.selectDevice},null,8,["tracks","status","loading","devices","selected-device","active-device","onAddToPlaylist","onSearch","onRefreshStatus","onSelectDevice"])):"playlists"===U.selectedView?((0,i.wg)(),(0,i.j4)(X,{key:1,playlists:n.playlists,loading:n.loading,devices:n.devices,"selected-device":n.selectedDevice,"active-device":n.activeDevice,"edited-playlist":n.editedPlaylist,tracks:n.editedPlaylistTracks,onPlay:t[9]||(t[9]=function(t){return e.$emit("play-playlist",t)}),onLoad:t[10]||(t[10]=function(t){return e.$emit("load-playlist",t)}),onRemove:t[11]||(t[11]=function(t){return e.$emit("remove-playlist",t)}),onPlaylistEdit:t[12]||(t[12]=function(t){return e.$emit("playlist-edit",t)}),onLoadTrack:t[13]||(t[13]=function(t){return e.$emit("add-to-tracklist-from-edited-playlist",t)}),onRemoveTrack:t[14]||(t[14]=function(t){return e.$emit("remove-from-playlist",t)}),onInfo:t[15]||(t[15]=function(t){return e.$emit("info",t)}),onPlaylistAdd:t[16]||(t[16]=function(t){return e.$emit("playlist-add",t)}),onAddToPlaylist:Y.openAddToPlaylist,onTrackMove:t[17]||(t[17]=function(t){return e.$emit("playlist-track-move",t)}),onSearch:Y.search,onRefreshStatus:Y.refreshStatus,onSelectDevice:Y.selectDevice},null,8,["playlists","loading","devices","selected-device","active-device","edited-playlist","tracks","onAddToPlaylist","onSearch","onRefreshStatus","onSelectDevice"])):"search"===U.selectedView?((0,i.wg)(),(0,i.j4)(ee,{key:2,loading:n.loading,devices:n.devices,"selected-device":n.selectedDevice,"active-device":n.activeDevice,onSearch:Y.search,results:n.searchResults,onClear:t[18]||(t[18]=function(t){return e.$emit("search-clear")}),onInfo:t[19]||(t[19]=function(t){return e.$emit("info",t)}),onPlay:t[20]||(t[20]=function(t){return e.$emit("play",t)}),onLoad:t[21]||(t[21]=function(t){return e.$emit("add-to-tracklist",t)}),onAddToPlaylist:Y.openAddToPlaylist,onRefreshStatus:Y.refreshStatus,onSelectDevice:Y.selectDevice},null,8,["loading","devices","selected-device","active-device","onSearch","results","onAddToPlaylist","onRefreshStatus","onSelectDevice"])):"library"===U.selectedView?((0,i.wg)(),(0,i.j4)(te,{key:3,loading:n.loading,devices:n.devices,"selected-device":n.selectedDevice,"active-device":n.activeDevice,onSearch:Y.search,results:n.libraryResults,path:n.path,onClear:t[22]||(t[22]=function(t){return e.$emit("search-clear")}),onInfo:t[23]||(t[23]=function(t){return e.$emit("info",t)}),onPlay:t[24]||(t[24]=function(t){return e.$emit("play",t)}),onLoad:t[25]||(t[25]=function(t){return e.$emit("add-to-tracklist",t)}),onAddToPlaylist:Y.openAddToPlaylist,onCd:t[26]||(t[26]=function(t){return e.$emit("cd",t)}),onRefreshStatus:Y.refreshStatus,onSelectDevice:Y.selectDevice},null,8,["loading","devices","selected-device","active-device","onSearch","results","path","onAddToPlaylist","onRefreshStatus","onSelectDevice"])):(0,i.kq)("",!0)])])]})),_:1},8,["plugin-name","status","track","onSearch"])),(0,i._)("div",u,[(0,i.Wm)(le,{title:"Track info",ref:"trackInfo"},{default:(0,i.w5)((function(){return[n.trackInfo?((0,i.wg)(),(0,i.iD)("div",d,[n.trackInfo.file?((0,i.wg)(),(0,i.iD)("div",f,[v,(0,i._)("div",{class:"col-9 value",textContent:(0,a.zw)(n.trackInfo.file)},null,8,p)])):(0,i.kq)("",!0),n.trackInfo.artist?((0,i.wg)(),(0,i.iD)("div",y,[k,(0,i._)("div",h,[(0,i._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(n.trackInfo.artist),onClick:t[37]||(t[37]=(0,s.iM)((function(e){return Y.search({artist:n.trackInfo.artist})}),["prevent"]))},null,8,m)])])):(0,i.kq)("",!0),n.trackInfo.title?((0,i.wg)(),(0,i.iD)("div",g,[w,(0,i._)("div",{class:"col-9 value",textContent:(0,a.zw)(n.trackInfo.title)},null,8,C)])):(0,i.kq)("",!0),n.trackInfo.album?((0,i.wg)(),(0,i.iD)("div",_,[b,(0,i._)("div",D,[(0,i._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(n.trackInfo.album),onClick:t[38]||(t[38]=(0,s.iM)((function(e){return Y.search({artist:n.trackInfo.artist,album:n.trackInfo.album})}),["prevent"]))},null,8,x)])])):(0,i.kq)("",!0),n.trackInfo.date?((0,i.wg)(),(0,i.iD)("div",T,[$,(0,i._)("div",{class:"col-9 value",textContent:(0,a.zw)(n.trackInfo.date)},null,8,P)])):(0,i.kq)("",!0),n.trackInfo.time?((0,i.wg)(),(0,i.iD)("div",S,[R,(0,i._)("div",{class:"col-9 value",textContent:(0,a.zw)(e.convertTime(n.trackInfo.time))},null,8,Z)])):(0,i.kq)("",!0),n.trackInfo.track?((0,i.wg)(),(0,i.iD)("div",A,[I,(0,i._)("div",{class:"col-9 value",textContent:(0,a.zw)(n.trackInfo.track)},null,8,q)])):(0,i.kq)("",!0),n.trackInfo.disc?((0,i.wg)(),(0,i.iD)("div",M,[L,(0,i._)("div",{class:"col-9 value",textContent:(0,a.zw)(n.trackInfo.disc)},null,8,W)])):(0,i.kq)("",!0),n.trackInfo.url?((0,i.wg)(),(0,i.iD)("div",z,[O,(0,i._)("div",j,[(0,i._)("a",{href:n.trackInfo.url,textContent:(0,a.zw)(n.trackInfo.uri||n.trackInfo.url),target:"_blank"},null,8,E)])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]})),_:1},512)]),(0,i._)("div",F,[(0,i.Wm)(le,{title:"Playlists",ref:"playlistsModal",onClose:t[41]||(t[41]=function(e){return U.addToPlaylistTrack=null}),onOpen:t[42]||(t[42]=function(e){return U.selectedPlaylists=(0,l.Z)(Array(n.playlists.length).keys()).map((function(){return!1}))})},{default:(0,i.w5)((function(){return[(0,i._)("div",V,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[39]||(t[39]=function(e){return U.playlistFilter=e})},null,512),[[s.nr,U.playlistFilter]])])]),(0,i._)("div",N,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.playlists,(function(e,t){var n;return(0,i.wg)(),(0,i.iD)("label",{class:(0,a.C_)(["row playlist",{hidden:(null===(n=U.playlistFilter)||void 0===n?void 0:n.length)>0&&e.name.toLowerCase().indexOf(U.playlistFilter.toLowerCase())<0}]),key:t},[(0,i._)("input",{type:"checkbox",checked:U.selectedPlaylists[t],onChange:function(e){return U.selectedPlaylists[t]=e.target.checked}},null,40,H),(0,i._)("span",{class:"name",textContent:(0,a.zw)(e.name)},null,8,K)],2)})),128))]),(0,i.Wm)(ie,null,{default:(0,i.w5)((function(){return[(0,i._)("button",{onClick:t[40]||(t[40]=function(){return Y.addToPlaylist&&Y.addToPlaylist.apply(Y,arguments)})},B)]})),_:1})]})),_:1},512)])],64)}var G=n(8534),J=(n(5666),n(9653),n(2222),n(7327),{class:"form-footer"});function X(e,t,n,l,a,s){return(0,i.wg)(),(0,i.iD)("div",J,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])}var ee={name:"FormFooter"},te=n(3744);const ne=(0,te.Z)(ee,[["render",X],["__scopeId","data-v-2495ce8a"]]);var le=ne,ie=n(1232),ae=n(1794),se=n(8337),re=n(9978),ce=["title","onClick"];function oe(e,t,n,l,s,r){return(0,i.wg)(),(0,i.iD)("nav",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.views,(function(t,l){return(0,i.wg)(),(0,i.iD)("li",{key:l,title:t.displayName,class:(0,a.C_)({selected:l===n.selectedView}),onClick:function(t){return e.$emit("input",l)}},[(0,i._)("i",{class:(0,a.C_)(t.iconClass)},null,2)],10,ce)})),128))])}var ue={name:"Nav",emits:["input"],props:{selectedView:{type:String},collapsed:{type:Boolean,default:!1},views:{type:Object,default:function(){return{playing:{iconClass:"fas fa-play",displayName:"Queue"},search:{iconClass:"fas fa-search",displayName:"Search"},playlists:{iconClass:"fas fa-list-ul",displayName:"Playlists"},library:{iconClass:"fas fa-compact-disc",displayName:"Library"}}}}}};const de=(0,te.Z)(ue,[["render",oe],["__scopeId","data-v-edee6494"]]);var fe=de,ve=(n(189),n(8783),n(7941),function(e){return(0,i.dD)("data-v-ee1cc6f4"),e=e(),(0,i.Cn)(),e}),pe={key:1,class:"playlist fade-in"},ye={class:"header-container"},ke={class:"col-8 filter"},he={class:"col-4 buttons"},me=ve((function(){return(0,i._)("i",{class:"fa fa-plus"},null,-1)})),ge=[me],we=ve((function(){return(0,i._)("i",{class:"fa fa-sync"},null,-1)})),Ce=[we],_e={class:"body",ref:"body"},be={key:0,class:"no-content"},De=["onDragstart","onDragend","onDragover","onClick","onDblclick"],xe={class:"col-10"},Te={class:"title"},$e={key:0,class:"artist"},Pe=["href","textContent","onClick"],Se={key:1,class:"album"},Re=["href","textContent","onClick"],Ze={class:"col-2 right-side"},Ae=["textContent"],Ie={class:"actions"};function qe(e,t,n,r,c,o){var u,d=(0,i.up)("Loading"),f=(0,i.up)("DropdownItem"),v=(0,i.up)("Dropdown"),p=(0,i.up)("MusicHeader");return n.loading?((0,i.wg)(),(0,i.j4)(d,{key:0})):((0,i.wg)(),(0,i.iD)("div",pe,[(0,i._)("div",ye,[(0,i.Wm)(p,{ref:"header"},{default:(0,i.w5)((function(){return[(0,i._)("div",ke,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.filter=e})},null,512),[[s.nr,c.filter]])])]),(0,i._)("div",he,[(0,i.Wm)(v,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,i.w5)((function(){var a,s,r,u,d,v,p;return[(0,i.Wm)(f,{text:"Save as playlist","icon-class":"fa fa-save",disabled:!(null!==(a=n.tracks)&&void 0!==a&&a.length),onClick:o.playlistSave},null,8,["disabled","onClick"]),2===(null===(s=c.selectedTracks)||void 0===s?void 0:s.length)?((0,i.wg)(),(0,i.j4)(f,{key:0,text:"Swap tracks","icon-class":"fa fa-retweet",onClick:t[1]||(t[1]=function(t){return e.$emit("swap",c.selectedTracks)})})):(0,i.kq)("",!0),(0,i.Wm)(f,{text:c.selectionMode?"End selection":"Start selection","icon-class":"far fa-check-square",disabled:!(null!==(r=n.tracks)&&void 0!==r&&r.length),onClick:t[2]||(t[2]=function(e){return c.selectionMode=!c.selectionMode})},null,8,["text","disabled"]),(0,i.Wm)(f,{text:(null===(u=c.selectedTracks)||void 0===u?void 0:u.length)===(null===(d=n.tracks)||void 0===d?void 0:d.length)?"Unselect all":"Select all","icon-class":"fa fa-check-double",disabled:!(null!==(v=n.tracks)&&void 0!==v&&v.length),onClick:t[3]||(t[3]=function(e){return c.selectedTracks=c.selectedTracks.length===n.tracks.length?[]:(0,l.Z)(Array(n.tracks.length).keys())})},null,8,["text","disabled"]),c.selectedTracks.length>0?((0,i.wg)(),(0,i.j4)(f,{key:1,text:"Remove track"+(c.selectedTracks.length>1?"s":""),"icon-class":"fa fa-trash",onClick:t[4]||(t[4]=function(t){return e.$emit("remove",(0,l.Z)(new Set(c.selectedTracks)))})},null,8,["text"])):(0,i.kq)("",!0),(0,i.Wm)(f,{text:"Clear playlist","icon-class":"fa fa-ban",disabled:!(null!==(p=n.tracks)&&void 0!==p&&p.length),onClick:t[5]||(t[5]=function(t){return e.$emit("clear")})},null,8,["disabled"])]})),_:1}),(0,i._)("button",{title:"Add track",onClick:t[6]||(t[6]=function(){return o.addTrack&&o.addTrack.apply(o,arguments)})},ge),null!=n.devices?((0,i.wg)(),(0,i.iD)("button",{key:0,title:"Refresh status",onClick:t[7]||(t[7]=function(t){return e.$emit("refresh-status")})},Ce)):(0,i.kq)("",!0),Object.keys(n.devices||{}).length?((0,i.wg)(),(0,i.j4)(v,{key:1,title:"Players","icon-class":"fa fa-volume-up"},{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.devices,(function(t,l){return(0,i.wg)(),(0,i.j4)(f,{key:l,textContent:(0,a.zw)(t.name),"item-class":{active:n.activeDevice===l,selected:n.selectedDevice===l},"icon-class":"fa fa-volume-up",onClick:function(t){return e.$emit("select-device",l)}},null,8,["textContent","item-class","onClick"])})),128))]})),_:1})):(0,i.kq)("",!0)])]})),_:1},512)]),(0,i._)("div",_e,[null!==(u=n.tracks)&&void 0!==u&&u.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",be," No tracks are loaded ")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.tracks,(function(t,r){var u,d,p,y,k;return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["row track",{selected:o.selectedTracksSet.has(r),active:(null===(u=n.status)||void 0===u?void 0:u.playingPos)===r,hidden:!o.displayedTracks.has(r)}]),onDragstart:function(e){return o.onTrackDragStart(r)},onDragend:function(e){return o.onTrackDragEnd(r)},onDragover:function(e){return o.onTrackDragOver(r)},draggable:"true",key:r,onClick:function(e){return o.onTrackClick(e,r)},onDblclick:function(t){return e.$emit("play",{pos:r})}},[(0,i._)("div",xe,[(0,i._)("div",Te,[(0,i.Uk)((0,a.zw)(t.title||"[No Title]")+" ",1),(null===(d=n.status)||void 0===d?void 0:d.playingPos)!==r||"play"!==(null===(p=n.status)||void 0===p?void 0:p.state)&&"pause"!==(null===(y=n.status)||void 0===y?void 0:y.state)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,a.C_)(["playing-icon",{paused:"pause"===(null===(k=n.status)||void 0===k?void 0:k.state)}])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,l.Z)(Array(3).keys()),(function(e){return(0,i.wg)(),(0,i.iD)("span",{key:e})})),128))],2))]),t.artist?((0,i.wg)(),(0,i.iD)("div",$e,[(0,i._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(t.artist),onClick:(0,s.iM)((function(n){return e.$emit("search",{artist:t.artist})}),["prevent"])},null,8,Pe)])):(0,i.kq)("",!0),t.album?((0,i.wg)(),(0,i.iD)("div",Se,[(0,i._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(t.album),onClick:(0,s.iM)((function(n){return e.$emit("search",{artist:t.artist,album:t.album})}),["prevent"])},null,8,Re)])):(0,i.kq)("",!0)]),(0,i._)("div",Ze,[(0,i._)("span",{class:"duration",textContent:(0,a.zw)(t.time?e.convertTime(t.time):"-:--")},null,8,Ae),(0,i._)("span",Ie,[(0,i.Wm)(v,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,i.w5)((function(){return[(0,i.Wm)(f,{text:"Play","icon-class":"fa fa-play",onClick:function(t){return e.$emit("play",{pos:r})}},null,8,["onClick"]),(0,i.Wm)(f,{text:"Add to playlist","icon-class":"fa fa-list-ul",onClick:function(n){return e.$emit("add-to-playlist",t)}},null,8,["onClick"]),(0,i.Wm)(f,{text:"Remove","icon-class":"fa fa-trash",onClick:function(t){return e.$emit("remove",(0,l.Z)(new Set([].concat((0,l.Z)(c.selectedTracks),[r]))))}},null,8,["onClick"]),(0,i.Wm)(f,{text:"Info","icon-class":"fa fa-info",onClick:function(t){return e.$emit("info",n.tracks[r])}},null,8,["onClick"])]})),_:2},1024)])])],42,De)})),128))],512)]))}n(2707),n(561),n(4747);var Me={class:"header"};function Le(e,t,n,l,a,s){return(0,i.wg)(),(0,i.iD)("div",Me,[(0,i.WI)(e.$slots,"default",{},void 0,!0)])}var We={name:"Header"};const ze=(0,te.Z)(We,[["render",Le],["__scopeId","data-v-8beb55c6"]]);var Oe=ze,je=n(2856),Ee=n(2588),Fe={name:"Playlist",mixins:[se.Z],components:{DropdownItem:Ee.Z,Dropdown:je.Z,MusicHeader:Oe,Loading:ie.Z},emits:["play","clear","add","remove","swap","search","move","save","info","refresh-status","select-device"],props:{tracks:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},status:{type:Object,default:function(){}},devices:{type:Object},selectedDevice:{type:String},activeDevice:{type:String}},data:function(){return{selectionMode:!1,selectedTracks:[],filter:"",infoTrack:null,sourcePos:null,targetPos:null}},computed:{selectedTracksSet:function(){return new Set(this.selectedTracks)},displayedTracks:function(){var e,t=this,n=(0,l.Z)(Array(this.tracks.length).keys());if(null===(e=this.filter)||void 0===e||!e.length)return new Set(n);var i=this,a=(i.filter||"").toLowerCase();return new Set(n.filter((function(e){var n=t.tracks[e];return((null===n||void 0===n?void 0:n.artist)||"").toLowerCase().indexOf(a)>=0||((null===n||void 0===n?void 0:n.title)||"").toLowerCase().indexOf(a)>=0||((null===n||void 0===n?void 0:n.album)||"").toLowerCase().indexOf(a)>=0})))}},methods:{onTrackClick:function(e,t){if(e.shiftKey){var n=this.selectedTracks.sort();n.length?t<n[0]?this.selectedTracks=[].concat((0,l.Z)(this.selectedTracks),(0,l.Z)((0,l.Z)(Array(n[0]-t).keys()).map((function(e){return e+t})))):t>n[n.length-1]&&(this.selectedTracks=[].concat((0,l.Z)(this.selectedTracks),(0,l.Z)((0,l.Z)(Array(t-n[n.length-1]+1).keys()).map((function(e){return e+n[n.length-1]}))))):this.selectedTracks=[t]}else{var i=this.selectedTracks.indexOf(t);this.selectionMode||e.ctrlKey?i>=0?this.selectedTracks.splice(i,1):this.selectedTracks.push(t):this.selectedTracks=i>=0?[]:[t]}},addTrack:function(){var e=prompt("Item path or URL");null!==e&&void 0!==e&&e.length&&this.$emit("add",e)},onTrackDragStart:function(e){this.sourcePos=e},onTrackDragEnd:function(){this.$refs.body.querySelectorAll(".track").forEach((function(e){return e.classList.remove("dragover")})),null!=this.sourcePos&&null!=this.targetPos&&this.sourcePos!==this.targetPos&&(this.$emit("move",{from:this.sourcePos,to:this.targetPos}),this.sourcePos=null,this.targetPos=null)},onTrackDragOver:function(e){this.targetPos=e;var t=this.$refs.body.querySelectorAll(".track");t.forEach((function(e){return e.classList.remove("dragover")})),(0,l.Z)(t)[e].classList.add("dragover")},playlistSave:function(){var e=prompt("Playlist name");null!==e&&void 0!==e&&e.length&&this.$emit("save",e)}},mounted:function(){var e=this;this.$watch((function(){var t;return null===(t=e.status)||void 0===t?void 0:t.playingPos}),(function(t){if(null!=t){var n=(0,l.Z)(e.$refs.body.querySelectorAll(".track"))[t],i=n.offsetTop-parseFloat(getComputedStyle(e.$refs.header.$el).height);e.$refs.body.scrollTo(0,i)}}))}};const Ve=(0,te.Z)(Fe,[["render",qe],["__scopeId","data-v-ee1cc6f4"]]);var Ne=Ve,He=function(e){return(0,i.dD)("data-v-c01651b6"),e=e(),(0,i.Cn)(),e},Ke={key:1,class:"editor-container fade-in"},Ue={class:"header-container"},Ye={class:"col-8 filter"},Be=He((function(){return(0,i._)("i",{class:"fas fa-arrow-left"},null,-1)})),Qe=[Be],Ge={class:"search-box"},Je={class:"buttons pull-right"},Xe=He((function(){return(0,i._)("i",{class:"fa fa-sync"},null,-1)})),et=[Xe],tt=He((function(){return(0,i._)("i",{class:"fas fa-plus"},null,-1)})),nt=[tt],lt={class:"editor",ref:"editor"},it={key:0,class:"no-content"},at=["onDragstart","onDragend","onDragover","onClick","onDblclick"],st={class:"col-10"},rt={class:"title"},ct={key:0,class:"artist"},ot=["href","textContent","onClick"],ut={key:1,class:"album"},dt=["href","textContent","onClick"],ft={class:"col-2 right-side"},vt=["textContent"],pt={class:"actions"},yt={key:2,class:"playlists fade-in"},kt={class:"header-container"},ht={class:"col-8 filter"},mt={class:"col-4 buttons"},gt=He((function(){return(0,i._)("i",{class:"fa fa-sync"},null,-1)})),wt=[gt],Ct={class:"body",ref:"body"},_t={key:0,class:"no-content"},bt=["onClick","onDblclick"],Dt={class:"col-10"},xt=["textContent"],Tt={class:"col-2 right-side"},$t={class:"actions"};function Pt(e,t,n,r,c,o){var u,d,f=(0,i.up)("Loading"),v=(0,i.up)("DropdownItem"),p=(0,i.up)("Dropdown"),y=(0,i.up)("MusicHeader");return n.loading?((0,i.wg)(),(0,i.j4)(f,{key:0})):null!=n.editedPlaylist?((0,i.wg)(),(0,i.iD)("div",Ke,[(0,i._)("div",Ue,[(0,i.Wm)(y,{ref:"header"},{default:(0,i.w5)((function(){return[(0,i._)("div",Ye,[(0,i._)("button",{class:"back-btn",title:"Back",onClick:t[0]||(t[0]=function(t){return e.$emit("playlist-edit",null)})},Qe),(0,i._)("label",Ge,[(0,i.wy)((0,i._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.trackFilter=e})},null,512),[[s.nr,c.trackFilter]])])]),(0,i._)("div",Je,[Object.keys(n.devices||{}).length?((0,i.wg)(),(0,i.j4)(p,{key:0,title:"Players","icon-class":"fa fa-volume-up"},{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.devices,(function(t,l){return(0,i.wg)(),(0,i.j4)(v,{key:l,textContent:(0,a.zw)(t.name),"item-class":{active:n.activeDevice===l,selected:n.selectedDevice===l},"icon-class":"fa fa-volume-up",onClick:function(t){return e.$emit("select-device",l)}},null,8,["textContent","item-class","onClick"])})),128))]})),_:1})):(0,i.kq)("",!0),null!=n.devices?((0,i.wg)(),(0,i.iD)("button",{key:1,title:"Refresh status",onClick:t[2]||(t[2]=function(t){return e.$emit("refresh-status")})},et)):(0,i.kq)("",!0),(0,i._)("button",{class:"add-btn",title:"Add track",onClick:t[3]||(t[3]=function(){return o.addTrack&&o.addTrack.apply(o,arguments)})},nt)])]})),_:1},512)]),(0,i._)("div",lt,[null!==(u=n.tracks)&&void 0!==u&&u.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",it," No tracks found ")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.tracks,(function(t,r){var u;return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["row track",{selected:o.selectedTracksSet.has(r),active:(null===(u=e.status)||void 0===u?void 0:u.playingPos)===r,hidden:!o.displayedTracks.has(r)}]),draggable:"true",key:r,onDragstart:function(e){return o.onTrackDragStart(r)},onDragend:function(e){return o.onTrackDragEnd(r)},onDragover:function(e){return o.onTrackDragOver(r)},onClick:function(e){return o.onTrackClick(e,r)},onDblclick:function(t){return e.$emit("load-track",{pos:r,play:!0})}},[(0,i._)("div",st,[(0,i._)("div",rt,(0,a.zw)(t.title||"[No Title]"),1),t.artist?((0,i.wg)(),(0,i.iD)("div",ct,[(0,i._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(t.artist),onClick:(0,s.iM)((function(n){return e.$emit("search",{artist:t.artist})}),["prevent"])},null,8,ot)])):(0,i.kq)("",!0),t.album?((0,i.wg)(),(0,i.iD)("div",ut,[(0,i._)("a",{href:e.$route.fullPath,textContent:(0,a.zw)(t.album),onClick:(0,s.iM)((function(n){return e.$emit("search",{artist:t.artist,album:t.album})}),["prevent"])},null,8,dt)])):(0,i.kq)("",!0)]),(0,i._)("div",ft,[(0,i._)("span",{class:"duration",textContent:(0,a.zw)(t.time?e.convertTime(t.time):"-:--")},null,8,vt),(0,i._)("span",pt,[(0,i.Wm)(p,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{text:"Play","icon-class":"fa fa-play",onClick:function(t){return e.$emit("load-track",{pos:r,play:!0})}},null,8,["onClick"]),(0,i.Wm)(v,{text:"Add to queue","icon-class":"fa fa-plus",onClick:function(t){return e.$emit("load-track",{pos:r,play:!1})}},null,8,["onClick"]),(0,i.Wm)(v,{text:"Add to playlist","icon-class":"fa fa-list-ul",onClick:function(n){return e.$emit("add-to-playlist",t)}},null,8,["onClick"]),(0,i.Wm)(v,{text:"Remove","icon-class":"fa fa-trash",onClick:function(t){return e.$emit("remove-track",(0,l.Z)(new Set([].concat((0,l.Z)(c.selectedTracks),[r]))))}},null,8,["onClick"]),(0,i.Wm)(v,{text:"Info","icon-class":"fa fa-info",onClick:(0,s.iM)((function(t){return e.$emit("info",n.tracks[r])}),["stop"])},null,8,["onClick"])]})),_:2},1024)])])],42,at)})),128))],512)])):((0,i.wg)(),(0,i.iD)("div",yt,[(0,i._)("div",kt,[(0,i.Wm)(y,{ref:"header"},{default:(0,i.w5)((function(){return[(0,i._)("div",ht,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[4]||(t[4]=function(e){return c.filter=e})},null,512),[[s.nr,c.filter]])])]),(0,i._)("div",mt,[Object.keys(n.devices||{}).length?((0,i.wg)(),(0,i.j4)(p,{key:0,title:"Players","icon-class":"fa fa-volume-up"},{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.devices,(function(t,l){return(0,i.wg)(),(0,i.j4)(v,{key:l,textContent:(0,a.zw)(t.name),"item-class":{active:n.activeDevice===l,selected:n.selectedDevice===l},"icon-class":"fa fa-volume-up",onClick:function(t){return e.$emit("select-device",l)}},null,8,["textContent","item-class","onClick"])})),128))]})),_:1})):(0,i.kq)("",!0),null!=n.devices?((0,i.wg)(),(0,i.iD)("button",{key:1,title:"Refresh status",onClick:t[5]||(t[5]=function(t){return e.$emit("refresh-status")})},wt)):(0,i.kq)("",!0)])]})),_:1},512)]),(0,i._)("div",Ct,[null!==(d=n.playlists)&&void 0!==d&&d.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",_t," No playlists found ")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.playlists,(function(t,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["row playlist",{hidden:!o.displayedPlaylists.has(n)}]),key:n,onClick:function(t){return e.$emit("playlist-edit",n)},onDblclick:function(t){return e.$emit("load",n)}},[(0,i._)("div",Dt,[(0,i._)("div",{class:"name",textContent:(0,a.zw)(t.name||"[No Name]")},null,8,xt)]),(0,i._)("div",Tt,[(0,i._)("span",$t,[(0,i.Wm)(p,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{text:"Play","icon-class":"fa fa-play",onClick:(0,s.iM)((function(t){return e.$emit("play",n)}),["stop"])},null,8,["onClick"]),(0,i.Wm)(v,{text:"Load","icon-class":"fa fa-list-ul",onClick:(0,s.iM)((function(t){return e.$emit("load",n)}),["stop"])},null,8,["onClick"]),(0,i.Wm)(v,{text:"Edit","icon-class":"fa fa-edit",onClick:(0,s.iM)((function(t){return e.$emit("playlist-edit",n)}),["stop"])},null,8,["onClick"]),(0,i.Wm)(v,{text:"Remove","icon-class":"fa fa-trash",onClick:(0,s.iM)((function(t){return e.$emit("remove",n)}),["stop"])},null,8,["onClick"])]})),_:2},1024)])])],42,bt)})),128))],512)]))}var St={name:"Playlists",mixins:[se.Z],components:{DropdownItem:Ee.Z,Dropdown:je.Z,MusicHeader:Oe,Loading:ie.Z},emits:["play","load","remove","playlist-edit","search","remove-track","load-track","info","playlist-add","add-to-playlist","track-move","refresh-status","select-device"],props:{playlists:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},tracks:{type:Array,default:function(){return[]}},editedPlaylist:{type:Number},devices:{type:Object},selectedDevice:{type:String},activeDevice:{type:String}},data:function(){return{selectedTracks:[],filter:"",trackFilter:"",sourcePos:null,targetPos:null}},computed:{selectedTracksSet:function(){return new Set(this.selectedTracks)},displayedPlaylists:function(){var e,t=this,n=(0,l.Z)(Array(this.playlists.length).keys());if(null===(e=this.filter)||void 0===e||!e.length)return new Set(n);var i=this,a=(i.filter||"").toLowerCase();return new Set(n.filter((function(e){var n=t.playlists[e];return((null===n||void 0===n?void 0:n.name)||"").toLowerCase().indexOf(a)>=0})))},displayedTracks:function(){var e,t=this,n=(0,l.Z)(Array(this.tracks.length).keys());if(null===(e=this.trackFilter)||void 0===e||!e.length)return new Set(n);var i=this,a=(i.trackFilter||"").toLowerCase();return new Set(n.filter((function(e){var n=t.tracks[e];return((null===n||void 0===n?void 0:n.artist)||"").toLowerCase().indexOf(a)>=0||((null===n||void 0===n?void 0:n.title)||"").toLowerCase().indexOf(a)>=0||((null===n||void 0===n?void 0:n.album)||"").toLowerCase().indexOf(a)>=0})))}},methods:{onTrackClick:function(e,t){if(e.shiftKey){var n=this.selectedTracks.sort();n.length?t<n[0]?this.selectedTracks=[].concat((0,l.Z)(this.selectedTracks),(0,l.Z)((0,l.Z)(Array(n[0]-t).keys()).map((function(e){return e+t})))):t>n[n.length-1]&&(this.selectedTracks=[].concat((0,l.Z)(this.selectedTracks),(0,l.Z)((0,l.Z)(Array(t-n[n.length-1]+1).keys()).map((function(e){return e+n[n.length-1]}))))):this.selectedTracks=[t]}else{var i=this.selectedTracks.indexOf(t);e.ctrlKey?i>=0?this.selectedTracks.splice(i,1):this.selectedTracks.push(t):this.selectedTracks=i>=0?[]:[t]}},addTrack:function(){var e=prompt("Track path or URL");null!==e&&void 0!==e&&e.length&&this.$emit("playlist-add",e)},onTrackDragStart:function(e){this.sourcePos=e},onTrackDragEnd:function(){this.$refs.editor.querySelectorAll(".track").forEach((function(e){return e.classList.remove("dragover")})),null!=this.sourcePos&&null!=this.targetPos&&this.sourcePos!==this.targetPos&&(this.$emit("track-move",{from:this.sourcePos,to:this.targetPos,playlist:this.editedPlaylist}),this.sourcePos=null,this.targetPos=null)},onTrackDragOver:function(e){this.targetPos=e;var t=this.$refs.editor.querySelectorAll(".track");t.forEach((function(e){return e.classList.remove("dragover")})),(0,l.Z)(t)[e].classList.add("dragover")}}};const Rt=(0,te.Z)(St,[["render",Pt],["__scopeId","data-v-c01651b6"]]);var Zt=Rt,At=function(e){return(0,i.dD)("data-v-6fe42598"),e=e(),(0,i.Cn)(),e},It={class:"search-form"},qt={class:"row"},Mt={class:"row"},Lt={class:"row"},Wt={class:"row"},zt=At((function(){return(0,i._)("i",{class:"icon fa fa-times"},null,-1)})),Ot=At((function(){return(0,i._)("span",{class:"btn-title"},"Clear",-1)})),jt=[zt,Ot],Et=At((function(){return(0,i._)("button",{type:"submit"},[(0,i._)("i",{class:"icon fa fa-search"}),(0,i._)("span",{class:"btn-title"},"Search")],-1)})),Ft={class:"search-box"},Vt={class:"buttons"},Nt=At((function(){return(0,i._)("i",{class:"icon fa fa-times"},null,-1)})),Ht=At((function(){return(0,i._)("span",{class:"btn-title"},"Clear",-1)})),Kt=[Nt,Ht],Ut={class:"results"},Yt=["onClick"],Bt={class:"col-10"},Qt={class:"title"},Gt=["textContent"],Jt=["textContent"],Xt={class:"col-2 right-side"},en=["textContent"],tn={class:"actions"};function nn(e,t,n,l,r,c){var o=(0,i.up)("FormFooter"),u=(0,i.up)("MusicHeader"),d=(0,i.up)("DropdownItem"),f=(0,i.up)("Dropdown");return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["search fade-in",{"form-collapsed":c.formCollapsed}])},[c.formCollapsed?((0,i.wg)(),(0,i.j4)(u,{key:1},{default:(0,i.w5)((function(){return[(0,i._)("label",Ft,[(0,i.wy)((0,i._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.filter=e})},null,512),[[s.nr,r.filter]])]),(0,i._)("span",Vt,[(0,i._)("button",{onClick:t[7]||(t[7]=function(){return c.clear&&c.clear.apply(c,arguments)})},Kt)])]})),_:1})):((0,i.wg)(),(0,i.iD)("div",{key:0,class:"form-container",onSubmit:t[5]||(t[5]=(0,s.iM)((function(t){return e.$emit("search",c.filteredQuery)}),["prevent"]))},[(0,i._)("form",It,[(0,i._)("div",qt,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Any","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.query.any=e})},null,512),[[s.nr,r.query.any]])])]),(0,i._)("div",Mt,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Artist","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.query.artist=e})},null,512),[[s.nr,r.query.artist]])])]),(0,i._)("div",Lt,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Title","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.query.title=e})},null,512),[[s.nr,r.query.title]])])]),(0,i._)("div",Wt,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Album","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.query.album=e})},null,512),[[s.nr,r.query.album]])])]),(0,i.Wm)(o,null,{default:(0,i.w5)((function(){return[(0,i._)("button",{onClick:t[4]||(t[4]=function(){return c.clear&&c.clear.apply(c,arguments)})},jt),Et]})),_:1})])],32)),(0,i._)("div",Ut,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.results,(function(t,n){var l,s;return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["row track",{selected:r.selectedResults.has(n),hidden:!c.displayedTracks.has(n)}]),key:n,onClick:function(e){return c.resultClick(n,e)}},[(0,i._)("div",Bt,[(0,i._)("div",Qt,(0,a.zw)(t.title||"[No Title]"),1),null!==(l=t.artist)&&void 0!==l&&l.length?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"artist",textContent:(0,a.zw)(t.artist)},null,8,Gt)):(0,i.kq)("",!0),null!==(s=t.album)&&void 0!==s&&s.length?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"album",textContent:(0,a.zw)(t.album)},null,8,Jt)):(0,i.kq)("",!0)]),(0,i._)("div",Xt,[(0,i._)("span",{class:"duration",textContent:(0,a.zw)(t.time&&parseInt(t.time)?e.convertTime(t.time):"-:--")},null,8,en),(0,i._)("span",tn,[(0,i.Wm)(f,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,i.w5)((function(){return[(0,i.Wm)(d,{text:"Play","icon-class":"fa fa-play",onClick:function(e){return c.play(n)}},null,8,["onClick"]),(0,i.Wm)(d,{text:"Add to queue","icon-class":"fa fa-plus",onClick:function(e){return c.load(n)}},null,8,["onClick"]),(0,i.Wm)(d,{text:"Add to playlist","icon-class":"fa fa-list-ul",onClick:function(n){return e.$emit("add-to-playlist",t)}},null,8,["onClick"]),(0,i.Wm)(d,{text:"Info","icon-class":"fa fa-info",onClick:function(n){return e.$emit("info",t)}},null,8,["onClick"])]})),_:2},1024)])])],10,Yt)})),128))])],2)}var ln=n(6084),an=(n(9720),{name:"Search",components:{Dropdown:je.Z,DropdownItem:Ee.Z,FormFooter:le,MusicHeader:Oe},mixins:[se.Z],emits:["search","clear","play","load","add-to-playlist","info","refresh-status","select-device"],props:{loading:{type:Boolean,default:!1},results:{type:Array},devices:{type:Object},selectedDevice:{type:String},activeDevice:{type:String}},data:function(){return{selectedResults:new Set,filter:"",query:{any:"",artist:"",title:"",album:""}}},computed:{formCollapsed:function(){var e;return(null===(e=this.results)||void 0===e?void 0:e.length)>0},filteredQuery:function(){return Object.entries(this.query).filter((function(e){var t;return null===(t=e[1])||void 0===t?void 0:t.length})).reduce((function(e,t){var n=(0,ln.Z)(t,2),l=n[0],i=n[1];return e[l]=i,e}),{})},displayedTracks:function(){var e,t=this;return new Set((0,l.Z)(Array((null===(e=this.results)||void 0===e?void 0:e.length)||0).keys()).filter((function(e){var n,l=t.results[e];if(null===(n=t.filter)||void 0===n||!n.length)return l;var i=t.filter.toLowerCase();return((null===l||void 0===l?void 0:l.artist)||"").toLowerCase().indexOf(i)>=0||((null===l||void 0===l?void 0:l.title)||"").toLowerCase().indexOf(i)>=0||((null===l||void 0===l?void 0:l.album)||"").toLowerCase().indexOf(i)>=0})))}},methods:{clear:function(){this.$emit("clear"),this.selectedResults=new Set},resultClick:function(e,t){if(t.shiftKey){if(this.selectedResults.size>0&&!this.selectedResults.has(e)){var n=(0,l.Z)(this.selectedResults),i=Math.min(Math.min(n),e),a=Math.max(Math.max(n),e);this.selectedResults=new Set((0,l.Z)(Array(a-i+1).keys()).map((function(e){return e+i})))}}else t.ctrlKey||(this.selectedResults=new Set),this.selectedResults.has(e)?this.selectedResults.delete(e):this.selectedResults.add(e)},play:function(e){var t=this;this.$emit("play",this.results[e]),this.selectedResults.size&&this.selectedResults.forEach((function(e){t.$emit("load",e)}))},load:function(e){var t=this;this.selectedResults.has(e)||this.selectedResults.add(e),this.selectedResults.forEach((function(e){t.$emit("load",t.results[e])}))}}});const sn=(0,te.Z)(an,[["render",nn],["__scopeId","data-v-6fe42598"]]);var rn=sn,cn=(n(3123),function(e){return(0,i.dD)("data-v-c3245ea8"),e=e(),(0,i.Cn)(),e}),on={class:"library fade-in"},un={class:"search-box"},dn={class:"results"},fn=cn((function(){return(0,i._)("div",{class:"icon-container"},[(0,i._)("i",{class:"icon fa fa-folder"})],-1)})),vn=cn((function(){return(0,i._)("div",{class:"result-container"},[(0,i._)("div",{class:"title"},"..")],-1)})),pn=[fn,vn],yn=["onClick"],kn={class:"col-10 left-side"},hn={class:"icon-container"},mn={key:0,class:"icon fa fa-folder"},gn={key:1,class:"icon fa fa-music"},wn={class:"info"},Cn={class:"title"},_n=["textContent"],bn=["textContent"],Dn={class:"artist-album"},xn=["textContent"],Tn=["textContent"],$n={class:"col-2 right-side"},Pn=["textContent"],Sn={class:"actions"};function Rn(e,t,n,l,r,c){var o=(0,i.up)("Loading"),u=(0,i.up)("MusicHeader"),d=(0,i.up)("DropdownItem"),f=(0,i.up)("Dropdown");return(0,i.wg)(),(0,i.iD)("div",on,[n.loading?((0,i.wg)(),(0,i.j4)(o,{key:0})):(0,i.kq)("",!0),(0,i.Wm)(u,null,{default:(0,i.w5)((function(){return[(0,i._)("label",un,[(0,i.wy)((0,i._)("input",{type:"search",placeholder:"Filter","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.filter=e})},null,512),[[s.nr,r.filter]])])]})),_:1}),(0,i._)("div",dn,["/"!==n.path?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"row track back-track",onClick:t[1]||(t[1]=function(){return c.back&&c.back.apply(c,arguments)})},pn)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.results,(function(t,n){var l,s;return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["row track",{selected:r.selectedResults.has(n),hidden:!c.displayedResults.has(n)}]),key:n,onClick:function(e){return c.resultClick(n,e)}},[(0,i._)("div",kn,[(0,i._)("div",hn,[t.directory?((0,i.wg)(),(0,i.iD)("i",mn)):t.file?((0,i.wg)(),(0,i.iD)("i",gn)):(0,i.kq)("",!0)]),(0,i._)("div",wn,[(0,i._)("div",Cn,[t.directory?((0,i.wg)(),(0,i.iD)("span",{key:0,textContent:(0,a.zw)(t.directory.split("/").pop())},null,8,_n)):t.title?((0,i.wg)(),(0,i.iD)("span",{key:1,textContent:(0,a.zw)(t.title)},null,8,bn)):(0,i.kq)("",!0)]),(0,i._)("div",Dn,[null!==(l=t.artist)&&void 0!==l&&l.length?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"artist",textContent:(0,a.zw)(t.artist)},null,8,xn)):(0,i.kq)("",!0),null!==(s=t.album)&&void 0!==s&&s.length?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"album",textContent:(0,a.zw)(t.album)},null,8,Tn)):(0,i.kq)("",!0)])])]),(0,i._)("div",$n,[(0,i._)("span",{class:"duration",textContent:(0,a.zw)(t.time&&parseInt(t.time)?e.convertTime(t.time):"-:--")},null,8,Pn),(0,i._)("span",Sn,[(0,i.Wm)(f,{title:"Actions","icon-class":"fa fa-ellipsis-h"},{default:(0,i.w5)((function(){return[(0,i.Wm)(d,{text:"Play","icon-class":"fa fa-play",onClick:function(e){return c.play(n)}},null,8,["onClick"]),(0,i.Wm)(d,{text:"Add to queue","icon-class":"fa fa-plus",onClick:function(e){return c.load(n)}},null,8,["onClick"]),(0,i.Wm)(d,{text:"Add to playlist","icon-class":"fa fa-list-ul",onClick:function(n){return e.$emit("add-to-playlist",t)}},null,8,["onClick"]),(0,i.Wm)(d,{text:"Info","icon-class":"fa fa-info",onClick:function(n){return e.$emit("info",t)}},null,8,["onClick"])]})),_:2},1024)])])],10,yn)})),128))])])}n(9600),n(7042);var Zn={name:"Library",components:{Dropdown:je.Z,DropdownItem:Ee.Z,MusicHeader:Oe,Loading:ie.Z},mixins:[se.Z],emits:["search","play","load","add-to-playlist","info","cd","refresh-status","select-device"],props:{loading:{type:Boolean,default:!1},results:{type:Array},path:{type:String},devices:{type:Object},selectedDevice:{type:String},activeDevice:{type:String}},data:function(){return{selectedResults:new Set,filter:"",query:{any:"",artist:"",title:"",album:""}}},computed:{displayedResults:function(){var e,t=this;return new Set((0,l.Z)(Array((null===(e=this.results)||void 0===e?void 0:e.length)||0).keys()).filter((function(e){var n,l=t.results[e];if(null===(n=t.filter)||void 0===n||!n.length)return l;var i=t.filter.toLowerCase();return((null===l||void 0===l?void 0:l.artist)||"").toLowerCase().indexOf(i)>=0||((null===l||void 0===l?void 0:l.title)||"").toLowerCase().indexOf(i)>=0||((null===l||void 0===l?void 0:l.album)||"").toLowerCase().indexOf(i)>=0||((null===l||void 0===l?void 0:l.directory)||"").toLowerCase().indexOf(i)>=0})))}},methods:{resultClick:function(e,t){if(t.shiftKey){if(this.selectedResults.size>0&&!this.selectedResults.has(e)){var n=(0,l.Z)(this.selectedResults),i=Math.min(Math.min(n),e),a=Math.max(Math.max(n),e);this.selectedResults=new Set((0,l.Z)(Array(a-i+1).keys()).map((function(e){return e+i})))}}else t.ctrlKey?this.selectedResults.has(e)?this.selectedResults.delete(e):this.selectedResults.add(e):this.results[e].directory?this.$emit("cd",this.results[e].directory):(this.selectedResults=new Set,this.selectedResults.has(e)?this.selectedResults.delete(e):this.selectedResults.add(e))},play:function(e){var t=this;this.$emit("play",this.results[e]),this.selectedResults.size&&this.selectedResults.forEach((function(e){t.$emit("load",e)}))},load:function(e){var t=this;this.selectedResults.has(e)||this.selectedResults.add(e),this.selectedResults.forEach((function(e){t.$emit("load",t.results[e])}))},back:function(){var e=this.path.split("/");this.$emit("cd",e.slice(0,e.length-1).join("/"))}}};const An=(0,te.Z)(Zn,[["render",Rn],["__scopeId","data-v-c3245ea8"]]);var In=An,qn=n(6813),Mn={name:"Music",emits:["play","pause","stop","clear","previous","next","set-volume","seek","consume","repeat","random","status-update","playlist-update","new-playing-track","add-to-tracklist","remove-from-tracklist","swap-tracks","play-playlist","load-playlist","remove-playlist","tracklist-move","tracklist-save","add-to-tracklist-from-edited-playlist","remove-from-playlist","info","playlist-add","add-to-playlist","playlist-track-move","search","search-clear","cd","refresh-status","select-device"],mixins:[qn.Z,se.Z],components:{Loading:ie.Z,Modal:ae.Z,Nav:fe,MediaView:re.Z,Playlist:Ne,Playlists:Zt,FormFooter:le,Search:rn,Library:In},props:{pluginName:{type:String,required:!0},loading:{type:Boolean,default:!1},config:{type:Object,default:function(){}},tracks:{type:Array,default:function(){return[]}},editedPlaylistTracks:{type:Array,default:function(){return[]}},playlists:{type:Array,default:function(){return[]}},status:{type:Object,default:function(){}},editedPlaylist:{type:Number},trackInfo:{type:String},searchResults:{type:Array},libraryResults:{type:Array},path:{type:String},devices:{type:Object},activeDevice:{type:String},selectedDevice:{type:String}},data:function(){return{selectedView:"playing",selectedPlaylists:[],addToPlaylistTrack:null,playlistFilter:""}},computed:{track:function(){var e;return null==(null===(e=this.status)||void 0===e?void 0:e.playingPos)?null:this.tracks[this.status.playingPos]}},methods:{onStatusEvent:function(e){var t=this;return(0,G.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.plugin_name===t.pluginName){n.next=2;break}return n.abrupt("return");case 2:t.$emit("status-update",e);case 3:case"end":return n.stop()}}),n)})))()},onPlaylistEvent:function(e){var t=this;return(0,G.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.plugin_name===t.pluginName){n.next=2;break}return n.abrupt("return");case 2:t.$emit("playlist-update",e);case 3:case"end":return n.stop()}}),n)})))()},onNewPlayingTrack:function(e){var t=this;return(0,G.Z)(regeneratorRuntime.mark((function n(){var l,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.plugin_name===t.pluginName){n.next=2;break}return n.abrupt("return");case 2:t.notify({html:"<b>".concat(null===(l=e.track)||void 0===l?void 0:l.artist,"</b><br>").concat(null===(i=e.track)||void 0===i?void 0:i.title),image:{iconClass:"fa fa-play"}}),t.$emit("new-playing-track",e);case 4:case"end":return n.stop()}}),n)})))()},openAddToPlaylist:function(e){var t=this;return(0,G.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.addToPlaylistTrack=e,t.$refs.playlistsModal.isVisible=!0;case 2:case"end":return n.stop()}}),n)})))()},addToPlaylist:function(){var e=this;return(0,G.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("add-to-playlist",{track:e.addToPlaylistTrack,playlists:(0,l.Z)(Array(e.selectedPlaylists.length).keys()).filter((function(t){return e.selectedPlaylists[t]}))}),e.$refs.playlistsModal.isVisible=!1,e.addToPlaylistTrack=null,e.playlistFilter="";case 4:case"end":return t.stop()}}),t)})))()},search:function(e){var t=this;return(0,G.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$emit("search",e),t.$refs.trackInfo.isVisible=!1,t.selectedView="search";case 3:case"end":return n.stop()}}),n)})))()},selectDevice:function(e){this.$emit("select-device",e)},refreshStatus:function(){this.$emit("refresh-status")}},mounted:function(){var e=this;this.subscribe(this.onStatusEvent,"on-status-update","platypush.message.event.music.MusicPlayEvent","platypush.message.event.music.MusicPauseEvent","platypush.message.event.music.MusicStopEvent","platypush.message.event.music.SeekChangeEvent","platypush.message.event.music.VolumeChangeEvent","platypush.message.event.music.MuteChangeEvent","platypush.message.event.music.PlaybackRepeatModeChangeEvent","platypush.message.event.music.PlaybackRandomModeChangeEvent","platypush.message.event.music.PlaybackConsumeModeChangeEvent","platypush.message.event.music.PlaybackSingleModeChangeEvent"),this.subscribe(this.onPlaylistEvent,"on-playlist-update","platypush.message.event.music.PlaylistChangeEvent"),this.subscribe(this.onNewPlayingTrack,"on-new-playing-track","platypush.message.event.music.NewPlayingTrackEvent"),this.$watch((function(){return e.trackInfo}),(function(t){null!=t&&(e.$refs.trackInfo.isVisible=!0)}))},unmounted:function(){this.unsubscribe("on-status-update"),this.unsubscribe("on-playlist-update")}};const Ln=(0,te.Z)(Mn,[["render",Q],["__scopeId","data-v-2cd8b8d5"]]);var Wn=Ln}}]);
//# sourceMappingURL=6833-legacy.78ead800.js.map