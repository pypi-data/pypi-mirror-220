(self["webpackChunkplatypush"]=self["webpackChunkplatypush"]||[]).push([[6739],{4964:function(e,t,a){var r=a(5112),n=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,"/./"[e](t)}catch(r){}}return!1}},647:function(e,t,a){var r=a(1702),n=a(7908),i=Math.floor,s=r("".charAt),c=r("".replace),u=r("".slice),o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,r,d,f){var m=a+e.length,p=r.length,g=l;return void 0!==d&&(d=n(d),g=o),c(f,g,(function(n,c){var o;switch(s(c,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,a);case"'":return u(t,m);case"<":o=d[u(c,1,-1)];break;default:var l=+c;if(0===l)return n;if(l>p){var f=i(l/10);return 0===f?n:f<=p?void 0===r[f-1]?s(c,1):r[f-1]+s(c,1):n}o=r[l-1]}return void 0===o?"":o}))}},3929:function(e,t,a){var r=a(7850),n=TypeError;e.exports=function(e){if(r(e))throw n("The method doesn't accept regular expressions");return e}},5306:function(e,t,a){"use strict";var r=a(2104),n=a(6916),i=a(1702),s=a(7007),c=a(7293),u=a(9670),o=a(614),l=a(9303),d=a(7466),f=a(1340),m=a(4488),p=a(1530),g=a(8173),v=a(647),h=a(7651),b=a(5112),y=b("replace"),_=Math.max,k=Math.min,C=i([].concat),w=i([].push),S=i("".indexOf),x=i("".slice),$=function(e){return void 0===e?e:String(e)},D=function(){return"$0"==="a".replace(/./,"$0")}(),q=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),A=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,a){var i=q?"$":"$0";return[function(e,a){var r=m(this),i=void 0==e?void 0:g(e,y);return i?n(i,e,r,a):n(t,f(r),e,a)},function(e,n){var s=u(this),c=f(e);if("string"==typeof n&&-1===S(n,i)&&-1===S(n,"$<")){var m=a(t,s,c,n);if(m.done)return m.value}var g=o(n);g||(n=f(n));var b=s.global;if(b){var y=s.unicode;s.lastIndex=0}var D=[];while(1){var q=h(s,c);if(null===q)break;if(w(D,q),!b)break;var A=f(q[0]);""===A&&(s.lastIndex=p(c,d(s.lastIndex),y))}for(var I="",L=0,R=0;R<D.length;R++){q=D[R];for(var T=f(q[0]),W=_(k(l(q.index),c.length),0),Z=[],M=1;M<q.length;M++)w(Z,$(q[M]));var j=q.groups;if(g){var F=C([T],Z,W,c);void 0!==j&&w(F,j);var O=f(r(n,void 0,F))}else O=v(T,c,W,Z,j,n);W>=L&&(I+=x(c,L,W)+O,L=W+T.length)}return I+x(c,L)}]}),!A||!D||q)},6755:function(e,t,a){"use strict";var r=a(2109),n=a(1702),i=a(1236).f,s=a(7466),c=a(1340),u=a(3929),o=a(4488),l=a(4964),d=a(1913),f=n("".startsWith),m=n("".slice),p=Math.min,g=l("startsWith"),v=!d&&!g&&!!function(){var e=i(String.prototype,"startsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!v&&!g},{startsWith:function(e){var t=c(o(this));u(e);var a=s(p(arguments.length>1?arguments[1]:void 0,t.length)),r=c(e);return f?f(t,r,a):m(t,a,a+r.length)===r}})},6739:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Q}});a(7941);var r=a(6252),n=a(3577),i=function(e){return(0,r.dD)("data-v-a0c26180"),e=e(),(0,r.Cn)(),e},s={class:"camera"},c={class:"camera-selector"},u={class:"left"},o={key:0,selected:"",disabled:""},l=["value","textContent"],d={class:"right"},f=["disabled"],m=i((function(){return(0,r._)("i",{class:"fas fa-sync-alt",title:"Refresh cameras"},null,-1)})),p=[m],g={class:"camera-container"},v={class:"frame-container",ref:"frameContainer"},h={key:0,class:"no-frame"},b={class:"frame",ref:"frame",alt:"",src:""},y={class:"controls"},_={class:"left"},k=["disabled"],C=i((function(){return(0,r._)("i",{class:"fa fa-play",title:"Start video"},null,-1)})),w=[C],S=["disabled"],x=i((function(){return(0,r._)("i",{class:"fa fa-stop",title:"Stop video"},null,-1)})),$=[x],D=["disabled"],q=i((function(){return(0,r._)("i",{class:"fas fa-camera",title:"Take a picture"},null,-1)})),A=[q],I={class:"right"},L=["disabled"],R=i((function(){return(0,r._)("i",{class:"fas fa-retweet",title:"Flip camera"},null,-1)})),T=[R],W=["disabled"],Z=i((function(){return(0,r._)("i",{class:"fa fa-volume-mute",title:"Start audio"},null,-1)})),M=[Z],j=["disabled"],F=i((function(){return(0,r._)("i",{class:"fa fa-volume-up",title:"Stop audio"},null,-1)})),O=[F],E={class:"sound-container"},Y={key:0,autoplay:"",preload:"none",ref:"player"},z=["src"],H=(0,r.Uk)(" Your browser does not support audio elements ");function K(e,t,a,i,m,C){var x=(0,r.up)("Loading");return(0,r.wg)(),(0,r.iD)("div",s,[m.loading?((0,r.wg)(),(0,r.j4)(x,{key:0})):(0,r.kq)("",!0),(0,r._)("div",c,[(0,r._)("div",u,[(0,r._)("label",null,[(0,r._)("select",{ref:"cameraSelector",onChange:t[0]||(t[0]=function(){return C.onCameraSelected&&C.onCameraSelected.apply(C,arguments)})},[Object.keys(m.cameras).length?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("option",o,"-- No cameras available")),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Object.keys(m.cameras),(function(e){return(0,r.wg)(),(0,r.iD)("option",{key:e,value:e,textContent:(0,n.zw)(e)},null,8,l)})),128))],544)])]),(0,r._)("div",d,[(0,r._)("button",{type:"button",onClick:t[1]||(t[1]=function(){return C.updateCameraStatus&&C.updateCameraStatus.apply(C,arguments)}),disabled:m.loading},p,8,f)])]),(0,r._)("div",g,[(0,r._)("div",v,[m.streaming||m.capturing||m.captured?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",h,"The camera is not active")),(0,r._)("img",b,null,512)],512),(0,r._)("div",y,[(0,r._)("div",_,[m.streaming?((0,r.wg)(),(0,r.iD)("button",{key:1,type:"button",onClick:t[3]||(t[3]=function(){return C.stopStreaming&&C.stopStreaming.apply(C,arguments)}),disabled:m.capturing||m.loading},$,8,S)):((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",onClick:t[2]||(t[2]=function(){return C.startStreaming&&C.startStreaming.apply(C,arguments)}),disabled:m.capturing||m.loading},w,8,k)),(0,r._)("button",{type:"button",onClick:t[4]||(t[4]=function(){return C.capture&&C.capture.apply(C,arguments)}),disabled:m.streaming||m.capturing||m.loading},A,8,D)]),(0,r._)("div",I,[(0,r._)("button",{type:"button",onClick:t[5]||(t[5]=function(){return C.flipCamera&&C.flipCamera.apply(C,arguments)}),disabled:m.loading},T,8,L),m.recording?((0,r.wg)(),(0,r.iD)("button",{key:1,type:"button",onClick:t[7]||(t[7]=function(e){return m.recording=!1}),disabled:m.loading},O,8,j)):((0,r.wg)(),(0,r.iD)("button",{key:0,type:"button",onClick:t[6]||(t[6]=function(e){return m.recording=!0}),disabled:m.loading},M,8,W))])])]),(0,r._)("div",E,[m.recording?((0,r.wg)(),(0,r.iD)("audio",Y,[(0,r._)("source",{src:m.cameras[m.selectedCamera].audio_url,type:"audio/x-wav;codec=pcm"},null,8,z),H],512)):(0,r.kq)("",!0)])])}var N=a(8534),U=(a(5666),a(8309),a(1539),a(6755),a(4916),a(5306),a(6813)),B=a(1232),G={name:"CameraAndroidIpcam",components:{Loading:B.Z},mixins:[U.Z],data:function(){return{loading:!1,streaming:!1,capturing:!1,recording:!1,captured:!1,cameras:{},selectedCamera:void 0}},computed:{config:function(){return this.$root.config["camera.android.ipcam"]}},methods:{startStreaming:function(){if(!this.streaming){var e=this.cameras[this.selectedCamera];this.streaming=!0,this.capturing=!1,this.captured=!1,this.$refs.frame.setAttribute("src",e.stream_url)}},stopStreaming:function(){this.streaming&&(this.streaming=!1,this.capturing=!1,this.$refs.frame.removeAttribute("src"))},capture:function(){if(!this.capturing){var e=this.cameras[this.selectedCamera];this.streaming=!1,this.capturing=!0,this.captured=!0,this.$refs.frame.setAttribute("src",e.image_url+"?t="+(new Date).getTime())}},onFrameLoaded:function(){this.capturing&&(this.capturing=!1)},onCameraSelected:function(e){this.selectedCamera=e.target.value},flipCamera:function(){var e=this;return(0,N.Z)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.cameras[e.selectedCamera],e.loading=!0,t.prev=2,r=!a.ffc,t.next=6,e.request("camera.android.ipcam.set_front_facing_camera",{activate:r,camera:a.name});case 6:e.cameras[e.selectedCamera].ffc=r;case 7:return t.prev=7,e.loading=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[2,,7,10]])})))()},updateCameraStatus:function(){var e=this;return(0,N.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.request("camera.android.ipcam.status");case 4:a=t.sent,e.cameras=a.reduce((function(t,a){for(var r=0,n=["stream_url","image_url","audio_url"];r<n.length;r++){var i=n[r];a[i].startsWith("https://")&&(a[i]=a[i].replace("https://","http://")),a.name in e.config.cameras&&e.config.cameras[a.name].username&&(a[i]="http://"+e.config.cameras[a.name].username+":"+e.config.cameras[a.name].password+"@"+a[i].substr(7))}return t[a.name]=a,t}),{}),a.length&&(e.selectedCamera=a[0].name);case 7:return t.prev=7,e.loading=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})))()}},mounted:function(){this.$refs.frame.addEventListener("load",this.onFrameLoaded),this.updateCameraStatus()}},J=a(3744);const P=(0,J.Z)(G,[["render",K],["__scopeId","data-v-a0c26180"]]);var Q=P}}]);
//# sourceMappingURL=6739-legacy.c665b953.js.map