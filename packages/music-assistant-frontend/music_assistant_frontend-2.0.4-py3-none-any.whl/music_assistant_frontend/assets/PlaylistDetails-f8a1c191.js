import{_,f as y}from"./ItemsListing.vue_vue_type_script_setup_true_lang-3b792876.js";import{_ as k}from"./InfoHeader.vue_vue_type_style_index_0_lang-2f9c70b4.js";import{C as b}from"./Container-282a676b.js";import{l as h,r as c,w,o as I,O as l,af as D,b as C,q as E,y as g,j as n,x as T}from"./index-ade73b84.js";import"./ListviewItem-2bd74fad.js";import"./MediaItemThumb.vue_vue_type_style_index_0_lang-cd169f56.js";import"./VMenu-ccc026f2.js";import"./VDivider-adefbf87.js";import"./VBtn-61e39030.js";import"./VListItem-f848c028.js";import"./VDialog-93a2100b.js";import"./VCard-f3e11b51.js";import"./VToolbar-806969a3.js";import"./VSelect-a66ffc02.js";/* empty css                             */import"./PanelviewItem.vue_vue_type_style_index_0_lang-93dbfb68.js";import"./Alert-4d78da02.js";import"./VSpacer-159b0383.js";import"./VBadge-12aff0c7.js";import"./VRow-74a0e5a5.js";/* empty css              */import"./layout-b0232ef9.js";const W=h({__name:"PlaylistDetails",props:{itemId:{},provider:{}},setup(d){const i=d,s=c(!1),o=c(),p=async function(){o.value=await l.getPlaylist(i.itemId,i.provider)};w(()=>i.itemId,t=>{t&&p()},{immediate:!0}),I(()=>{const t=l.subscribe(D.MEDIA_ITEM_ADDED,e=>{var r;const a=e.data;((r=o.value)==null?void 0:r.uri)==a.uri&&(s.value=!0)});C(t)});const f=async function(t,e,a,r,v=!0){const m=[];return await l.getPlaylistTracks(i.itemId,i.provider,u=>{console.log("chunk",u.length),m.push(...u)}),y(m,t,e,a,r,v)};return(t,e)=>{var a;return E(),g("section",null,[n(k,{item:o.value,"active-provider":(a=o.value)==null?void 0:a.provider_mappings[0].provider_domain},null,8,["item","active-provider"]),n(b,null,{default:T(()=>[n(_,{itemtype:"playlisttracks","parent-item":o.value,"show-provider":!1,"show-library":!1,"show-favorites-only-filter":!1,"show-track-number":!1,"load-data":f,"sort-keys":["position","position DESC","sort_name","sort_artist","sort_album"],"update-available":s.value,onRefreshClicked:e[0]||(e[0]=r=>{p(),s.value=!1}),title:t.$t("playlist_tracks")},null,8,["parent-item","update-available","title"])]),_:1})])}}});export{W as default};
