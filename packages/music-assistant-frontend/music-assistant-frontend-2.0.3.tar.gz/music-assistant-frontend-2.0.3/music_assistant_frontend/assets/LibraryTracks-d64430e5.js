import{l as v,J as y,r as i,B as m,O as r,U as l,b as p,o as E,af as n,q as I,v as T}from"./index-e9211ef1.js";import{_ as D}from"./ItemsListing.vue_vue_type_script_setup_true_lang-436cf3d3.js";import"./ListviewItem-b7a4258b.js";import"./MediaItemThumb.vue_vue_type_style_index_0_lang-278977b5.js";import"./VMenu-bc0cce60.js";import"./VDivider-336c24cd.js";import"./VBtn-68784d55.js";import"./VListItem-230d1393.js";import"./Container-349a0ac0.js";/* empty css              */import"./VDialog-5f240a62.js";import"./VCard-138864fc.js";import"./VToolbar-daf2b89f.js";import"./VSelect-04a129eb.js";/* empty css                             */import"./PanelviewItem.vue_vue_type_style_index_0_lang-fefd2afe.js";import"./Alert-55091fd0.js";import"./VSpacer-bdf2f653.js";import"./VBadge-9fa94f29.js";import"./VRow-e8f3e51e.js";const z=v({__name:"LibraryTracks",setup(k){const{t:s}=y(),c=i([]),o=i(!1);m.topBarContextMenuItems=[{label:"sync_now",labelArgs:[s("tracks")],action:()=>{r.startSync([l.TRACK])},icon:"mdi-sync"},{label:"add_url_item",labelArgs:[],action:()=>{_()},icon:"mdi-link-plus"}],p(()=>{m.topBarContextMenuItems=[]}),E(()=>{const a=r.subscribe_multi([n.MEDIA_ITEM_ADDED,n.MEDIA_ITEM_UPDATED,n.MEDIA_ITEM_DELETED],t=>{var e;(e=t.object_id)!=null&&e.startsWith("library://track")&&(o.value=!0)});p(a)});const u=async function(a,t,e,d,f=!0){const b=f||void 0;return o.value=!1,await r.getLibraryTracks(b,d,t,a,e)},_=async function(){const a=prompt(s("enter_url"));a&&r.getItem(l.TRACK,a,"url").then(t=>{const e=prompt(s("enter_name"),t.name);t.name=e||t.name,r.addItemToLibrary(t).then(()=>o.value=!0)}).catch(t=>alert(t))};return(a,t)=>(I(),T(D,{itemtype:"tracks",items:c.value,"show-provider":!1,"show-favorites-only-filter":!0,"show-track-number":!1,"load-data":u,"sort-keys":["sort_name","timestamp_added DESC","sort_artist","duration"],"show-album":!1,"update-available":o.value},null,8,["items","update-available"]))}});export{z as default};
