/* empty css                             */import{l as j,I as F,r as q,c as x,O as a,af as K,b as Q,w as T,a9 as G,q as s,v as r,x as n,y as C,z as M,A as i,F as P,aN as f,j as o,L as p,N as u,k as H,K as m,M as v,Q as J,a5 as W,a6 as X}from"./index-e9211ef1.js";import{C as I,L as A,a as S,_ as Y}from"./Container-349a0ac0.js";import{B as b}from"./Button-59559304.js";import{A as Z}from"./Alert-55091fd0.js";import{a as B}from"./VCard-138864fc.js";import{V as ee}from"./VToolbar-daf2b89f.js";import{b as te}from"./VMenu-bc0cce60.js";import{l as ne,V as g}from"./VBtn-68784d55.js";import{V as ae}from"./VDivider-336c24cd.js";import"./VListItem-230d1393.js";/* empty css              */const ie=_=>(W("data-v-273ae240"),_=_(),X(),_),se={class:"line-clamp-1"},oe=ie(()=>p("br",null,null,-1)),re={class:"line-clamp-1"},de={class:"line-clamp-1"},le=j({__name:"Providers",setup(_){const V=F(),c=q([]),$=x(()=>Object.values(a.providerManifests).filter(t=>!t.hidden&&(t.multi_instance||!c.value.find(d=>d.domain==t.domain))).sort((t,d)=>(t.name||a.providerManifests[t.domain].name).toUpperCase()>(d.name||a.providerManifests[d.domain].name).toUpperCase()?1:-1)),D=a.subscribe(K.PROVIDERS_UPDATED,()=>{w()});Q(D);const w=async function(){c.value=await a.getProviderConfigs()},N=function(t){a.removeProviderConfig(t),c.value=c.value.filter(d=>d.instance_id!=t)},y=function(t){V.push(`/settings/editprovider/${t}`)},U=function(t){V.push(`/settings/addprovider/${t.domain}`)},E=function(t){t.enabled=!t.enabled,a.saveProviderConfig(t.domain,{enabled:t.enabled},t.instance_id)},L=function(t){a.getData("config/providers/reload",{instance_id:t}).catch(d=>alert(d))},z=function(t){window.open(t,"_blank")};return T(()=>a.providers,t=>{t&&w()},{immediate:!0}),(t,d)=>{const O=G("hold");return s(),r(I,null,{default:n(()=>[(s(!0),C(P,null,M(i(f),l=>(s(),r(B,{key:l,style:{"margin-bottom":"10px"}},{default:n(()=>[o(ee,{color:"transparent",density:"compact",class:"titlebar"},{title:n(()=>[p("h2",se,u(t.$t(`settings.${l}providers`)),1)]),append:n(()=>[$.value.filter(e=>e.type==l).length?(s(),r(te,{key:0},{activator:n(({props:e})=>[o(ne,H({variant:"text"},e),{default:n(()=>[m(u(t.$t("settings.add_new")),1)]),_:2},1040)]),default:n(()=>[o(B,{density:"compact"},{default:n(()=>[(s(!0),C(P,null,M($.value.filter(e=>e.type==l),e=>(s(),r(A,{key:e.domain,density:"compact",style:{"padding-top":"0","padding-bottom":"0","margin-bottom":"0"},title:e.name,onClick:h=>U(e)},{prepend:n(()=>[o(S,{domain:e.domain,size:26,class:"media-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1024)):v("",!0)]),_:2},1024),o(ae),l==i(f).MUSIC&&c.value.filter(e=>e.type==i(f).MUSIC&&e.domain in i(a).providerManifests&&!i(a).providerManifests[e.domain].hidden).length==0?(s(),r(Z,{key:0,icon:"mdi-radio-tower"},{default:n(()=>[p("b",null,u(t.$t("settings.no_providers")),1),oe,m(" "+u(t.$t("settings.no_providers_detail")),1)]),_:1})):v("",!0),o(I,null,{default:n(()=>[(s(!0),C(P,null,M(c.value.filter(e=>e.type==l),e=>{var h;return J((s(),r(A,{key:e.instance_id,link:"",onClick:k=>y(e.instance_id),"context-menu-items":[{label:"settings.configure",labelArgs:[],action:()=>{y(e.instance_id)},icon:"mdi-cog"},{label:e.enabled?"settings.disable":"settings.enable",labelArgs:[],action:()=>{E(e)},icon:"mdi-cancel",disabled:i(a).providerManifests[e.domain].builtin},{label:"settings.documentation",labelArgs:[],action:()=>{z(i(a).providerManifests[e.domain].documentation)},icon:"mdi-bookshelf",disabled:!i(a).providerManifests[e.domain].documentation},{label:"settings.sync",labelArgs:[],action:()=>{i(a).startSync(void 0,[e.instance_id])},icon:"mdi-sync",hide:((h=i(a).providers[e.instance_id])==null?void 0:h.available)&&l!=i(f).MUSIC},{label:"settings.delete",labelArgs:[],action:()=>{N(e.instance_id)},icon:"mdi-delete",hide:i(a).providerManifests[e.domain].builtin},{label:"settings.reload",labelArgs:[],action:()=>{L(e.instance_id)},icon:"mdi-refresh"}]},{prepend:n(()=>[o(S,{domain:e.domain,size:40,class:"listitem-media-thumb"},null,8,["domain"])]),title:n(()=>[p("div",re,u(e.name||i(a).providerManifests[e.domain].name),1)]),subtitle:n(()=>[p("div",de,u(i(a).providerManifests[e.domain].description),1)]),append:n(()=>{var k;return[i(a).syncTasks.value.filter(R=>R.provider_instance==e.instance_id).length>0?(s(),r(b,{key:0,icon:"",title:t.$t("settings.sync_running")},{default:n(()=>[o(g,{color:"grey"},{default:n(()=>[m(" mdi-sync ")]),_:1})]),_:1},8,["title"])):v("",!0),e.enabled?e.last_error?(s(),r(b,{key:2,icon:"",title:e.last_error},{default:n(()=>[o(g,{color:"red"},{default:n(()=>[m(" mdi-alert-circle ")]),_:1})]),_:2},1032,["title"])):(k=i(a).providers[e.instance_id])!=null&&k.available?v("",!0):(s(),r(b,{key:3,icon:"",title:t.$t("settings.not_loaded")},{default:n(()=>[o(g,{icon:"mdi-timer-sand"})]),_:1},8,["title"])):(s(),r(b,{key:1,icon:"",title:t.$t("settings.provider_disabled")},{default:n(()=>[o(g,{color:"grey"},{default:n(()=>[m(" mdi-cancel ")]),_:1})]),_:1},8,["title"]))]}),_:2},1032,["onClick","context-menu-items"])),[[O,()=>{y(e.instance_id)}]])}),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})}}});const Ce=Y(le,[["__scopeId","data-v-273ae240"]]);export{Ce as default};
