import{l as y,J as v,r as l,B as r,O as o,S as b,ag as E,b as p,o as I,af as i,q as A,v as D}from"./index-ade73b84.js";import{_ as M}from"./ItemsListing.vue_vue_type_script_setup_true_lang-3b792876.js";import"./ListviewItem-2bd74fad.js";import"./MediaItemThumb.vue_vue_type_style_index_0_lang-cd169f56.js";import"./VMenu-ccc026f2.js";import"./VDivider-adefbf87.js";import"./VBtn-61e39030.js";import"./VListItem-f848c028.js";import"./Container-282a676b.js";/* empty css              */import"./VDialog-93a2100b.js";import"./VCard-f3e11b51.js";import"./VToolbar-806969a3.js";import"./VSelect-a66ffc02.js";/* empty css                             */import"./PanelviewItem.vue_vue_type_style_index_0_lang-93dbfb68.js";import"./Alert-4d78da02.js";import"./VSpacer-159b0383.js";import"./VBadge-12aff0c7.js";import"./VRow-74a0e5a5.js";const z=y({__name:"LibraryPlaylists",setup(T){const{t:n}=v(),m=l([]),s=l(!1);r.topBarContextMenuItems=[{label:"sync_now",labelArgs:[n("playlists")],action:()=>{o.startSync([b.PLAYLIST])},icon:"mdi-sync"}];for(const e of Object.values(o.providers).filter(t=>t.available&&t.supported_features.includes(E.PLAYLIST_CREATE)))r.topBarContextMenuItems.push({label:"create_playlist",labelArgs:[e.name],action:()=>{c(e.instance_id)},icon:"mdi-sync"});p(()=>{r.topBarContextMenuItems=[]});const u=async function(e,t,a,d,_=!0){const f=_||void 0;return s.value=!1,await o.getLibraryPlaylists(f,d,t,e,a)};I(()=>{const e=o.subscribe_multi([i.MEDIA_ITEM_ADDED,i.MEDIA_ITEM_UPDATED,i.MEDIA_ITEM_DELETED],t=>{var a;(a=t.object_id)!=null&&a.startsWith("library://playlist")&&(s.value=!0)});p(e)});const c=async function(e){const t=prompt(n("new_playlist_name"));t&&await o.createPlaylist(t,e).then(()=>location.reload()).catch(a=>alert(a))};return(e,t)=>(A(),D(M,{itemtype:"playlists",items:m.value,"show-duration":!1,"show-provider":!0,"show-favorites-only-filter":!0,"load-data":u,"show-library":!0,"sort-keys":["sort_name","timestamp_added DESC"],"update-available":s.value,onRefreshClicked:t[0]||(t[0]=a=>s.value=!1)},null,8,["items","update-available"]))}});export{z as default};
