import{l as E,r as v,w as B,o as L,O as u,af as N,b as S,q as d,y as k,j as i,x as s,v as b,F as g,z,M as _,L as A,K as y,N as h,A as F,ah as R}from"./index-ade73b84.js";import{_ as w,f as I}from"./ItemsListing.vue_vue_type_script_setup_true_lang-3b792876.js";import{_ as j}from"./InfoHeader.vue_vue_type_style_index_0_lang-2f9c70b4.js";import{C,L as q,a as K}from"./Container-282a676b.js";import{V as O}from"./VToolbar-806969a3.js";import{V as U}from"./VDivider-adefbf87.js";import{V as G}from"./VMenu-ccc026f2.js";import{a as H}from"./VCard-f3e11b51.js";import{l as J}from"./VBtn-61e39030.js";import"./ListviewItem-2bd74fad.js";import"./MediaItemThumb.vue_vue_type_style_index_0_lang-cd169f56.js";import"./VDialog-93a2100b.js";import"./VListItem-f848c028.js";import"./VSelect-a66ffc02.js";/* empty css                             */import"./PanelviewItem.vue_vue_type_style_index_0_lang-93dbfb68.js";import"./Alert-4d78da02.js";import"./VSpacer-159b0383.js";import"./VBadge-12aff0c7.js";import"./VRow-74a0e5a5.js";/* empty css              */import"./layout-b0232ef9.js";const M=A("br",null,null,-1),P=A("br",null,null,-1),be=E({__name:"ArtistDetails",props:{itemId:{},provider:{}},setup(V){const o=V,p=v("library"),n=v(!1),l=v(),c=async function(){const e=p.value;p.value="",l.value=await u.getArtist(o.itemId,o.provider),p.value=e};B(()=>o.itemId,e=>{e&&c()},{immediate:!0}),L(()=>{const e=u.subscribe(N.MEDIA_ITEM_ADDED,a=>{var t;const r=a.data;((t=l.value)==null?void 0:t.uri)==r.uri&&(n.value=!0)});S(e)});const D=async function(e,a,r,t,m=!0){const f=await u.getArtistAlbums(o.itemId,o.provider);return I(f,e,a,r,t,m)},T=async function(e,a,r,t,m=!0){const f=await u.getArtistTracks(o.itemId,o.provider);return I(f,e,a,r,t,m)},$=function(e){window.open(e,"_blank")};return(e,a)=>(d(),k("section",null,[i(j,{item:l.value,"active-provider":e.provider},null,8,["item","active-provider"]),i(C,null,{default:s(()=>[i(w,{itemtype:"artisttracks","parent-item":l.value,"show-provider":!1,"show-favorites-only-filter":!1,"show-track-number":!1,"load-data":T,"sort-keys":["timestamp_added DESC","sort_name","sort_album"],"update-available":n.value,onRefreshClicked:a[0]||(a[0]=r=>{c(),n.value=!1}),title:e.$t("tracks"),checksum:e.provider+e.itemId},null,8,["parent-item","update-available","title","checksum"]),M,i(w,{itemtype:"artistalbums","parent-item":l.value,"show-provider":!1,"show-favorites-only-filter":!1,"load-data":D,"sort-keys":["timestamp_added DESC","sort_name","year"],"update-available":n.value,onRefreshClicked:a[1]||(a[1]=r=>{c(),n.value=!1}),title:e.$t("albums"),checksum:e.provider+e.itemId},null,8,["parent-item","update-available","title","checksum"]),P,e.provider=="library"?(d(),b(H,{key:0,style:{"margin-bottom":"10px"}},{default:s(()=>[i(O,{color:"transparent",title:e.$t("mapped_providers"),style:{height:"55px"}},null,8,["title"]),i(U),i(C,null,{default:s(()=>[i(G,null,{default:s(()=>{var r;return[(d(!0),k(g,null,z((r=l.value)==null?void 0:r.provider_mappings,t=>(d(),b(q,{onClick:m=>e.$router.push({name:"album",params:{itemId:t.item_id,provider:t.provider_instance}})},{prepend:s(()=>[i(K,{domain:t.provider_domain,size:30},null,8,["domain"])]),title:s(()=>[y(h(F(u).providerManifests[t.provider_domain].name),1)]),subtitle:s(()=>[y(h(t.item_id),1)]),append:s(()=>[t.url?(d(),b(J,{key:0,variant:"plain",icon:"mdi-open-in-new",onClick:R(m=>$(t.url),["prevent"])},null,8,["onClick"])):_("",!0)]),_:2},1032,["onClick"]))),256))]}),_:1})]),_:1})]),_:1})):_("",!0)]),_:1})]))}});export{be as default};
