import{r as e,H as w,n as h,G as b,I as v}from"./index.cd74d362.js";import{C as y}from"./choose-partition.20507f2d.js";import{B as i,a as C}from"./browse.3a6caef0.js";import{F as S}from"./FormLabel.d2d5306b.js";import{I as A,S as I,M as P,F as D}from"./TextField.f66708ec.js";import{D as k}from"./DataGrid.6bd4666c.js";import"./Input.1fa642e8.js";import"./toPropertyKey.012fc217.js";import"./Checkbox.d9af7a26.js";import"./FormControlLabel.6c8bbf37.js";const B=t=>{const s=t.item.data.attributes.structure.macro.npartitions,[o,n]=e.exports.useState(0),[r,a]=e.exports.useState([]),[m,c]=e.exports.useState(!1),u=t.item.data.attributes.structure.macro.columns;e.exports.useEffect(()=>{const l=new AbortController,d=t.item.data.links.partition.replace("{index}",o);async function x(){var g=await C.get(`${d}&format=application/json-seq`,{signal:l.signal});const f=g.data.split(`
`).map(E=>JSON.parse(E));a(f),c(!0)}return x(),()=>{l.abort()}},[t.segments,t.item.data.links.full,t.item.data.links.partition,o]);const p=l=>{a([]),c(!1),n(l)};return e.exports.createElement(i,{sx:{my:4}},e.exports.createElement(w,{maxWidth:"lg"},e.exports.createElement(F,{segments:t.segments,columns:u}),e.exports.createElement(i,{width:"100%",mt:5},e.exports.createElement(h,{id:"table-title",variant:"h6",component:"h2"},"Table"),s>1?e.exports.createElement(i,null,e.exports.createElement(b,{severity:"info"},"This large dataframe available in ",e.exports.createElement("em",null,"partitions")," (chunks of rows) because the full dataframe may be slow to download and display.",e.exports.createElement("br",null),'In the "Download" tab, you can request the full table as a single file if you wish.'),e.exports.createElement(y,{npartitions:s,value:o,setValue:p})):"",e.exports.createElement(_,{rows:r,columns:u,loading:!m}))))},F=t=>{let s=v();const o=n=>{const r=n.target.value;s(`/browse${t.segments.map(function(a){return"/"+a}).join("")}/${r}`)};return e.exports.createElement(i,null,e.exports.createElement(S,null,e.exports.createElement(A,{id:"column-select-helper-label"},"Go to Column"),e.exports.createElement(I,{labelId:"column-select-label",id:"column-select",value:"",label:"Column",onChange:o},t.columns.map(n=>e.exports.createElement(P,{key:`column-${n}`,value:n},n))),e.exports.createElement(D,null,"Access a single column as an Array.")))},T=10,_=t=>{const[s,o]=e.exports.useState(T),n=t.columns.map(a=>({field:a,headerName:a,width:200})),r=t.rows.map((a,m)=>(a.id=m,a));return e.exports.createElement(k,{...t.loading?{loading:!0}:{},rows:r,columns:n,pagination:!0,pageSize:s,rowsPerPageOptions:[10,30,100],onPageSizeChange:a=>o(a),autoHeight:!0})};export{B as default};
